!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-redux"),require("es6-promise"),require("react-native"),require("json5"),require("redux-actions"),require("@react-native-community/async-storage"),require("clone"),require("react-native-elements"),require("deepmerge"),require("uuid"),require("isomorphic-fetch"),require("redux"),require("react-native-app-auth"),require("react-fast-compare"),require("react-native-root-view"),require("@react-navigation/stack"),require("@ui-kitten/components"),require("moment"),require("expo-image-picker"),require("expo-file-system"),require("react-native-signature-canvas"),require("react-native-web-hooks"),require("react-native-modal-datetime-picker"),require("react-native-render-html"),require("react-number-format"),require("react-dom"),require("redux-devtools-extension"),require("redux-thunk"),require("lodash"),require("rn-snackbar-component"),require("react-native-webview"),require("@microsoft/signalr"),require("object-hash")):"function"==typeof define&&define.amd?define(["react","react-redux","es6-promise","react-native","json5","redux-actions","@react-native-community/async-storage","clone","react-native-elements","deepmerge","uuid","isomorphic-fetch","redux","react-native-app-auth","react-fast-compare","react-native-root-view","@react-navigation/stack","@ui-kitten/components","moment","expo-image-picker","expo-file-system","react-native-signature-canvas","react-native-web-hooks","react-native-modal-datetime-picker","react-native-render-html","react-number-format","react-dom","redux-devtools-extension","redux-thunk","lodash","rn-snackbar-component","react-native-webview","@microsoft/signalr","object-hash"],t):"object"==typeof exports?exports["optimajet-app"]=t(require("react"),require("react-redux"),require("es6-promise"),require("react-native"),require("json5"),require("redux-actions"),require("@react-native-community/async-storage"),require("clone"),require("react-native-elements"),require("deepmerge"),require("uuid"),require("isomorphic-fetch"),require("redux"),require("react-native-app-auth"),require("react-fast-compare"),require("react-native-root-view"),require("@react-navigation/stack"),require("@ui-kitten/components"),require("moment"),require("expo-image-picker"),require("expo-file-system"),require("react-native-signature-canvas"),require("react-native-web-hooks"),require("react-native-modal-datetime-picker"),require("react-native-render-html"),require("react-number-format"),require("react-dom"),require("redux-devtools-extension"),require("redux-thunk"),require("lodash"),require("rn-snackbar-component"),require("react-native-webview"),require("@microsoft/signalr"),require("object-hash")):e["optimajet-app"]=t(e.react,e["react-redux"],e["es6-promise"],e["react-native"],e.json5,e["redux-actions"],e["@react-native-community/async-storage"],e.clone,e["react-native-elements"],e.deepmerge,e.uuid,e["isomorphic-fetch"],e.redux,e["react-native-app-auth"],e["react-fast-compare"],e["react-native-root-view"],e["@react-navigation/stack"],e["@ui-kitten/components"],e.moment,e["expo-image-picker"],e["expo-file-system"],e["react-native-signature-canvas"],e["react-native-web-hooks"],e["react-native-modal-datetime-picker"],e["react-native-render-html"],e["react-number-format"],e["react-dom"],e["redux-devtools-extension"],e["redux-thunk"],e.lodash,e["rn-snackbar-component"],e["react-native-webview"],e["@microsoft/signalr"],e["object-hash"])}(window,function(r,n,o,a,i,l,s,c,u,p,f,d,h,m,y,b,v,g,w,O,C,S,k,E,P,j,x,_,R,D,T,F,A,I){return B={},L.m=N=[function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function s(e){var t=void 0===e?"undefined":n(e);return"function"===t||"object"===t&&!!e}r.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},r.callbackName=function(e,t){return(t=t||"on")+r.capitalize(e)},r.isObject=s,r.extend=function(e){if(!s(e))return e;for(var t,r,n,o=1,a=arguments.length;o<a;o++){t=arguments[o],r=Object.keys(t);for(var i,l=0;l<r.length;l++)n=r[l],Object.getOwnPropertyDescriptor&&Object.defineProperty?(i=Object.getOwnPropertyDescriptor(t,n),Object.defineProperty(e,n,i)):e[n]=t[n]}return e},r.isFunction=function(e){return"function"==typeof e},r.nextTick=function(e){setTimeout(e,0)},r.object=function(e,t){for(var r={},n=0;n<e.length;n++)r[e[n]]=t[n];return r},r.isArguments=function(e){return"object"===(void 0===e?"undefined":n(e))&&"callee"in e&&"number"==typeof e.length},r.throwIf=function(e,t){if(e)throw Error(t||e)},r.EventEmitter=t(48)},function(e,t){e.exports=l},function(e,t){e.exports=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinStrict=t.joinConcat=t.joinLeading=t.joinTrailing=t.fetchInitialState=t.stopListeningToAll=t.stopListeningTo=t.listenTo=t.validateListening=t.listenToMany=t.hasListener=void 0;var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(5)),r=r(29);function s(e){var t,r={};for(t in e){var n,o=e[t],a=s(function(e){for(var t,r=0,n={};r<(e.children||[]).length;++r)e[t=e.children[r]]&&(n[t]=e[t]);return n}(o));for(n in r[t]=o,a){var i=a[n];r[t+l.capitalize(n)]=i}}return r}t.hasListener=function(e){for(var t,r,n,o=0;o<(this.subscriptions||[]).length;++o)for(n=[].concat(this.subscriptions[o].listenable),t=0;t<n.length;t++)if((r=n[t])===e||r.hasListener&&r.hasListener(e))return!0;return!1},t.listenToMany=function(e){var t,r=s(e);for(t in r){var n=l.callbackName(t),o=this[n]?n:this[t]?t:void 0;o&&this.listenTo(r[t],o,this[n+"Default"]||this[o+"Default"]||o)}},t.validateListening=function(e){return e===this?"Listener is not able to listen to itself":l.isFunction(e.listen)?e.hasListener&&e.hasListener(this)?"Listener cannot listen to this listenable because of circular loop":void 0:e+" is missing a listen method"},t.listenTo=function(e,t,r){var n,o,a=this.subscriptions=this.subscriptions||[];return l.throwIf(this.validateListening(e)),this.fetchInitialState(e,r),n=e.listen(this[t]||t,this),t=function(){var e=a.indexOf(o);l.throwIf(-1===e,"Tried to remove listen already gone from subscriptions list!"),a.splice(e,1),n()},a.push(o={stop:t,listenable:e}),o},t.stopListeningTo=function(e){for(var t,r=0,n=this.subscriptions||[];r<n.length;r++)if((t=n[r]).listenable===e)return t.stop(),l.throwIf(-1!==n.indexOf(t),"Failed to remove listen from subscriptions list!"),!0;return!1},t.stopListeningToAll=function(){for(var e,t=this.subscriptions||[];e=t.length;)t[0].stop(),l.throwIf(t.length!==e-1,"Failed to remove listen from subscriptions list!")},t.fetchInitialState=function(e,t){t=t&&this[t]||t;var r=this;l.isFunction(t)&&l.isFunction(e.getInitialState)&&((e=e.getInitialState())&&l.isFunction(e.then)?e.then(function(){t.apply(r,arguments)}):t.call(this,e))},t.joinTrailing=(0,r.instanceJoinCreator)("last"),t.joinLeading=(0,r.instanceJoinCreator)("first"),t.joinConcat=(0,r.instanceJoinCreator)("all"),t.joinStrict=(0,r.instanceJoinCreator)("strict")},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t){e.exports=p},function(e,t){e.exports=f},function(e,t){e.exports=d},function(e,t){e.exports=h},function(e,t){e.exports=m},function(e,t){e.exports=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__keep=t.joinConcat=t.joinStrict=t.joinLeading=t.all=t.joinTrailing=t.use=t.nextTick=t.setEventEmitter=t.createActions=t.createStore=t.createAction=t.utils=t.StoreMethods=t.PublisherMethods=t.ListenerMethods=t.ActionMethods=t.version=void 0;var n=f(r(28)),o=f(r(8)),a=f(r(19)),i=f(r(31)),l=r(29),s=f(r(5)),c=r(51),u=r(30),p=f(r(18));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var d=(0,l.staticJoinCreator)("last"),h=d,m=(0,l.staticJoinCreator)("first"),y=(0,l.staticJoinCreator)("strict"),b=(0,l.staticJoinCreator)("all"),r=s,l=function(e){var t={};return e instanceof Array?e.forEach(function(e){s.isObject(e)?v(e,t):t[e]=(0,c.createAction)(e)}):v(e,t),t};function v(r,n){Object.keys(r).forEach(function(e){var t=r[e];n[e]=(0,c.createAction)(t)})}t.version={"reflux-core":"1.0.0"},t.ActionMethods=n,t.ListenerMethods=o,t.PublisherMethods=a,t.StoreMethods=i,t.utils=r,t.createAction=c.createAction,t.createStore=u.createStore,t.createActions=l,t.setEventEmitter=function(e){s.EventEmitter=e},t.nextTick=function(e){s.nextTick=e},t.use=function(e){e(this)},t.joinTrailing=d,t.all=h,t.joinLeading=m,t.joinStrict=y,t.joinConcat=b,t.__keep=p,Object.defineProperty(t,"default",{get:function(){return t}}),Function.prototype.bind||console.error("Function.prototype.bind not available. ES5 shim required. https://github.com/spoike/refluxjs#es5")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=!1,o=[],a=[];t.useKeep=function(){n=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},t.addStore=function(e){n&&o.push(e)},t.addAction=function(e){n&&a.push(e)},t.createdStores=o,t.createdActions=a,t.reset=function(){for(;o.length;)o.pop();for(;a.length;)a.pop()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deferWith=t.triggerAsync=t.trigger=t.listen=t.shouldEmit=t.preEmit=void 0;var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(5));t.preEmit=function(){},t.shouldEmit=function(){return!0},t.listen=function(t,r){r=r||this;function e(e){o||t.apply(r,e)}var n=this,o=!1;return this.emitter.addListener(this.eventLabel,e),function(){o=!0,n.emitter.removeListener(n.eventLabel,e)}},t.trigger=function(){var e=this.preEmit.apply(this,t=arguments),t=void 0===e?t:n.isArguments(e)?e:[].concat(e);this.shouldEmit.apply(this,t)&&this.emitter.emit(this.eventLabel,t)},t.triggerAsync=function(){var e=arguments,t=this;n.nextTick(function(){t.trigger.apply(t,e)})},t.deferWith=function(e){var t=this.trigger,r=this;this.trigger=function(){e.apply(r,[function(){t.apply(r,arguments)}].concat([].splice.call(arguments,0)))}}},function(e,t,r){var n=r(5),r=r(8);e.exports=n.extend({componentWillUnmount:r.stopListeningToAll},r)},function(e,t){e.exports=b},function(e,t){e.exports=v},function(e,t){e.exports=g},function(e,t){e.exports=w},function(e,t){e.exports=O},function(e,t){e.exports=C},function(e,t,r){var n=r(17);n.serverMode="object"!=typeof window,n.connect=r(52),n.connectFilter=r(53),n.ListenerMixin=r(20),n.listenTo=r(54),n.listenToMany=r(55),r(56),e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticJoinCreator=function(t){return function(){var e=p.call(arguments);return(0,n.createStore)({init:function(){this[o[t]].apply(this,e.concat("triggerAsync"))}})}},t.instanceJoinCreator=function(c){return function(){u.throwIf(arguments.length<2,"Cannot create a join with less than 2 listenables!");for(var n,o,a,e=p.call(arguments),t=e.pop(),r=e.length,i={numberOfListenables:r,callback:this[t]||t,listener:this,strategy:c},l=[],s=0;s<r;s++)u.throwIf(this.validateListening(e[s]));for(s=0;s<r;s++)l.push(e[s].listen(function(t,r){return function(){var e=p.call(arguments);if(r.listenablesEmitted[t])switch(r.strategy){case"strict":throw new Error("Strict join failed because listener triggered twice.");case"last":r.args[t]=e;break;case"all":r.args[t].push(e)}else r.listenablesEmitted[t]=!0,r.args[t]="all"===r.strategy?[e]:e;!function(e){for(var t=0;t<e.numberOfListenables;t++)if(!e.listenablesEmitted[t])return;e.callback.apply(e.listener,e.args),f(e)}(r)}}(s,i),this));return f(i),(t={listenable:e}).stop=(n=t,o=l,a=this,function(){var e,t=a.subscriptions,r=t?t.indexOf(n):-1;for(u.throwIf(-1===r,"Tried to remove join already gone from subscriptions list!"),e=0;e<o.length;e++)o[e]();t.splice(r,1)}),this.subscriptions=(this.subscriptions||[]).concat(t),t}};var n=r(30),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(5));var p=Array.prototype.slice,o={strict:"joinStrict",first:"joinLeading",last:"joinTrailing",all:"joinConcat"};function f(e){e.listenablesEmitted=new Array(e.numberOfListenables),e.args=new Array(e.numberOfListenables)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=function(r){for(var e in r=r||{},c)if(!f[e]&&(u[e]||p[e]))throw new Error("Cannot override API method "+e+" in Reflux.StoreMethods. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");for(var t in r)if(!f[t]&&(u[t]||p[t]))throw new Error("Cannot override API method "+t+" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");function n(){var e,t=0;if(this.subscriptions=[],this.emitter=new a.EventEmitter,this.eventLabel="change",(0,s.bindMethods)(this,r),this.init&&a.isFunction(this.init)&&this.init(),this.listenables)for(e=[].concat(this.listenables);t<e.length;t++)this.listenToMany(e[t])}r=(0,l.mix)(r),a.extend(n.prototype,p,u,c,r);var o=new n;return i.addStore(o),o};var a=n(r(5)),i=n(r(18)),l=r(49),s=r(50),c=n(r(31)),u=n(r(19)),p=n(r(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var f={preEmit:1,shouldEmit:1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){var n;void 0===(n="function"==typeof(n=function(){var E,a,e,l={},P={},t={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:true},s={currentLocale:t.currentLocale,zeroFormat:t.zeroFormat,nullFormat:t.nullFormat,defaultFormat:t.defaultFormat,scalePercentBy100:t.scalePercentBy100};function i(e,t){this._input=e;this._value=t}return(E=function(e){var t,r,n,o;if(E.isNumeral(e))t=e.value();else if(e===0||typeof e==="undefined")t=0;else if(e===null||a.isNaN(e))t=null;else if(typeof e==="string")if(s.zeroFormat&&e===s.zeroFormat)t=0;else if(s.nullFormat&&e===s.nullFormat||!e.replace(/[^0-9]+/g,"").length)t=null;else{for(r in l){o=typeof l[r].regexps.unformat==="function"?l[r].regexps.unformat():l[r].regexps.unformat;if(o&&e.match(o)){n=l[r].unformat;break}}n=n||E._.stringToNumber;t=n(e)}else t=Number(e)||null;return new i(e,t)}).version="2.0.6",E.isNumeral=function(e){return e instanceof i},E._=a={numberToFormat:function(e,t,r){var n=P[E.options.currentLocale],o=false,a=false,i=0,l="",s=1e12,c=1e9,u=1e6,p=1e3,f="",d=false,h,m,y,b,v,g,w,O,C,S;e=e||0;m=Math.abs(e);if(E._.includes(t,"(")){o=true;t=t.replace(/[\(|\)]/g,"")}else if(E._.includes(t,"+")||E._.includes(t,"-")){O=E._.includes(t,"+")?t.indexOf("+"):e<0?t.indexOf("-"):-1;t=t.replace(/[\+|\-]/g,"")}if(E._.includes(t,"a")){h=t.match(/a(k|m|b|t)?/);h=h?h[1]:false;if(E._.includes(t," a"))l=" ";t=t.replace(new RegExp(l+"a[kmbt]?"),"");if(m>=s&&!h||h==="t"){l+=n.abbreviations.trillion;e=e/s}else if(m<s&&m>=c&&!h||h==="b"){l+=n.abbreviations.billion;e=e/c}else if(m<c&&m>=u&&!h||h==="m"){l+=n.abbreviations.million;e=e/u}else if(m<u&&m>=p&&!h||h==="k"){l+=n.abbreviations.thousand;e=e/p}}if(E._.includes(t,"[.]")){a=true;t=t.replace("[.]",".")}g=e.toString().split(".")[0];w=t.split(".")[1];C=t.indexOf(",");i=(t.split(".")[0].split(",")[0].match(/0/g)||[]).length;if(w){if(E._.includes(w,"[")){w=w.replace("]","");w=w.split("[");f=E._.toFixed(e,w[0].length+w[1].length,r,w[1].length)}else f=E._.toFixed(e,w.length,r);g=f.split(".")[0];if(E._.includes(f,"."))f=n.delimiters.decimal+f.split(".")[1];else f="";if(a&&Number(f.slice(1))===0)f=""}else g=E._.toFixed(e,0,r);if(l&&!h&&Number(g)>=1e3&&l!==n.abbreviations.trillion){g=String(Number(g)/1e3);switch(l){case n.abbreviations.thousand:l=n.abbreviations.million;break;case n.abbreviations.million:l=n.abbreviations.billion;break;case n.abbreviations.billion:l=n.abbreviations.trillion;break}}if(E._.includes(g,"-")){g=g.slice(1);d=true}if(g.length<i)for(var k=i-g.length;k>0;k--)g="0"+g;if(C>-1)g=g.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+n.delimiters.thousands);if(t.indexOf(".")===0)g="";S=g+f+(l?l:"");if(o)S=(o&&d?"(":"")+S+(o&&d?")":"");else if(O>=0)S=O===0?(d?"-":"+")+S:S+(d?"-":"+");else if(d)S="-"+S;return S},stringToNumber:function(e){var t=P[s.currentLocale],r=e,n={thousand:3,million:6,billion:9,trillion:12},o,a,i,l;if(s.zeroFormat&&e===s.zeroFormat)a=0;else if(s.nullFormat&&e===s.nullFormat||!e.replace(/[^0-9]+/g,"").length)a=null;else{a=1;if(t.delimiters.decimal!==".")e=e.replace(/\./g,"").replace(t.delimiters.decimal,".");for(o in n){l=new RegExp("[^a-zA-Z]"+t.abbreviations[o]+"(?:\\)|(\\"+t.currency.symbol+")?(?:\\))?)?$");if(r.match(l)){a*=Math.pow(10,n[o]);break}}a*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1;e=e.replace(/[^0-9\.]+/g,"");a*=Number(e)}return a},isNaN:function(e){return typeof e==="number"&&isNaN(e)},includes:function(e,t){return e.indexOf(t)!==-1},insert:function(e,t,r){return e.slice(0,r)+t+e.slice(r)},reduce:function(e,t){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof t!=="function")throw new TypeError(t+" is not a function");var r=Object(e),n=r.length>>>0,o=0,a;if(arguments.length===3)a=arguments[2];else{while(o<n&&!(o in r))o++;if(o>=n)throw new TypeError("Reduce of empty array with no initial value");a=r[o++]}for(;o<n;o++)if(o in r)a=t(a,r[o],o,r);return a},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var r=a.multiplier(t);return e>r?e:r},1)},toFixed:function(e,t,r,n){var o=e.toString().split("."),a=t-(n||0),i,l,s,c;if(o.length===2)i=Math.min(Math.max(o[1].length,a),t);else i=a;s=Math.pow(10,i);c=(r(e+"e+"+i)/s).toFixed(i);if(n>t-i){l=new RegExp("\\.?0{1,"+(n-(t-i))+"}$");c=c.replace(l,"")}return c}},E.options=s,E.formats=l,E.locales=P,E.locale=function(e){if(e)s.currentLocale=e.toLowerCase();return s.currentLocale},E.localeData=function(e){if(!e)return P[s.currentLocale];e=e.toLowerCase();if(!P[e])throw new Error("Unknown locale : "+e);return P[e]},E.reset=function(){for(var e in t)s[e]=t[e]},E.zeroFormat=function(e){s.zeroFormat=typeof e==="string"?e:null},E.nullFormat=function(e){s.nullFormat=typeof e==="string"?e:null},E.defaultFormat=function(e){s.defaultFormat=typeof e==="string"?e:"0.0"},E.register=function(e,t,r){t=t.toLowerCase();if(this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");this[e+"s"][t]=r;return r},E.validate=function(e,t){var r,n,o,a,i,l,s,c;if(typeof e!=="string"){e+="";if(console.warn)console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)}e=e.trim();if(!!e.match(/^\d+$/))return true;if(e==="")return false;try{s=E.localeData(t)}catch(e){s=E.localeData(E.locale())}o=s.currency.symbol;i=s.abbreviations;r=s.delimiters.decimal;if(s.delimiters.thousands===".")n="\\.";else n=s.delimiters.thousands;c=e.match(/^[^\d]+/);if(c!==null){e=e.substr(1);if(c[0]!==o)return false}c=e.match(/[^\d]+$/);if(c!==null){e=e.slice(0,-1);if(c[0]!==i.thousand&&c[0]!==i.million&&c[0]!==i.billion&&c[0]!==i.trillion)return false}l=new RegExp(n+"{2}");if(!e.match(/[^\d.,]/g)){a=e.split(r);if(a.length>2)return false;else if(a.length<2)return!!a[0].match(/^\d+.*\d$/)&&!a[0].match(l);else if(a[0].length===1)return!!a[0].match(/^\d+$/)&&!a[0].match(l)&&!!a[1].match(/^\d+$/);else return!!a[0].match(/^\d+.*\d$/)&&!a[0].match(l)&&!!a[1].match(/^\d+$/)}return false},E.fn=i.prototype={clone:function(){return E(this)},format:function(e,t){var r=this._value,n=e||s.defaultFormat,o,a,i;t=t||Math.round;if(r===0&&s.zeroFormat!==null)a=s.zeroFormat;else if(r===null&&s.nullFormat!==null)a=s.nullFormat;else{for(o in l)if(n.match(l[o].regexps.format)){i=l[o].format;break}i=i||E._.numberToFormat;a=i(r,n,t)}return a},value:function(){return this._value},input:function(){return this._input},set:function(e){this._value=Number(e);return this},add:function(e){var o=a.correctionFactor.call(null,this._value,e);function t(e,t,r,n){return e+Math.round(o*t)}this._value=a.reduce([this._value,e],t,0)/o;return this},subtract:function(e){var o=a.correctionFactor.call(null,this._value,e);function t(e,t,r,n){return e-Math.round(o*t)}this._value=a.reduce([e],t,Math.round(this._value*o))/o;return this},multiply:function(e){function t(e,t,r,n){var o=a.correctionFactor(e,t);return Math.round(e*o)*Math.round(t*o)/Math.round(o*o)}this._value=a.reduce([this._value,e],t,1);return this},divide:function(e){function t(e,t,r,n){var o=a.correctionFactor(e,t);return Math.round(e*o)/Math.round(t*o)}this._value=a.reduce([this._value,e],t);return this},difference:function(e){return Math.abs(E(this._value).subtract(e).value())}},E.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"},currency:{symbol:"$"}}),function(){E.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(e,t,r){var n=E._.includes(t," BPS")?" ":"",o;e=e*1e4;t=t.replace(/\s?BPS/,"");o=E._.numberToFormat(e,t,r);if(E._.includes(o,")")){o=o.split("");o.splice(-1,0,n+"BPS");o=o.join("")}else o=o+n+"BPS";return o},unformat:function(e){return+(E._.stringToNumber(e)*1e-4).toFixed(15)}})}(),function(){var c={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},u={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]};var e=c.suffixes.concat(u.suffixes.filter(function(e){return c.suffixes.indexOf(e)<0}));var t=e.join("|");t="("+t.replace("B","B(?!PS)")+")";E.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(t)},format:function(e,t,r){var n,o=E._.includes(t,"ib")?u:c,a=E._.includes(t," b")||E._.includes(t," ib")?" ":"",i,l,s;t=t.replace(/\s?i?b/,"");for(i=0;i<=o.suffixes.length;i++){l=Math.pow(o.base,i);s=Math.pow(o.base,i+1);if(e===null||e===0||e>=l&&e<s){a+=o.suffixes[i];if(l>0)e=e/l;break}}n=E._.numberToFormat(e,t,r);return n+a},unformat:function(e){var t=E._.stringToNumber(e),r,n;if(t){for(r=c.suffixes.length-1;r>=0;r--){if(E._.includes(e,c.suffixes[r])){n=Math.pow(c.base,r);break}if(E._.includes(e,u.suffixes[r])){n=Math.pow(u.base,r);break}}t*=n||1}return t}})}(),function(){E.register("format","currency",{regexps:{format:/(\$)/},format:function(e,t,r){var n=E.locales[E.options.currentLocale],o={before:t.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:t.match(/([\+|\-|\)|\s|\$]*)$/)[0]},a,i,l;t=t.replace(/\s?\$\s?/,"");a=E._.numberToFormat(e,t,r);if(e>=0){o.before=o.before.replace(/[\-\(]/,"");o.after=o.after.replace(/[\-\)]/,"")}else if(e<0&&(!E._.includes(o.before,"-")&&!E._.includes(o.before,"(")))o.before="-"+o.before;for(l=0;l<o.before.length;l++){i=o.before[l];switch(i){case"$":a=E._.insert(a,n.currency.symbol,l);break;case" ":a=E._.insert(a," ",l+n.currency.symbol.length-1);break}}for(l=o.after.length-1;l>=0;l--){i=o.after[l];switch(i){case"$":a=l===o.after.length-1?a+n.currency.symbol:E._.insert(a,n.currency.symbol,-(o.after.length-(1+l)));break;case" ":a=l===o.after.length-1?a+" ":E._.insert(a," ",-(o.after.length-(1+l)+n.currency.symbol.length-1));break}}return a}})}(),function(){E.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(e,t,r){var n,o=typeof e==="number"&&!E._.isNaN(e)?e.toExponential():"0e+0",a=o.split("e");t=t.replace(/e[\+|\-]{1}0/,"");n=E._.numberToFormat(Number(a[0]),t,r);return n+"e"+a[1]},unformat:function(e){var t=E._.includes(e,"e+")?e.split("e+"):e.split("e-"),r=Number(t[0]),n=Number(t[1]);n=E._.includes(e,"e-")?n*=-1:n;function o(e,t,r,n){var o=E._.correctionFactor(e,t),a=e*o*(t*o)/(o*o);return a}return E._.reduce([r,Math.pow(10,n)],o,1)}})}(),function(){E.register("format","ordinal",{regexps:{format:/(o)/},format:function(e,t,r){var n=E.locales[E.options.currentLocale],o,a=E._.includes(t," o")?" ":"";t=t.replace(/\s?o/,"");a+=n.ordinal(e);o=E._.numberToFormat(e,t,r);return o+a}})}(),function(){E.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(e,t,r){var n=E._.includes(t," %")?" ":"",o;if(E.options.scalePercentBy100)e=e*100;t=t.replace(/\s?\%/,"");o=E._.numberToFormat(e,t,r);if(E._.includes(o,")")){o=o.split("");o.splice(-1,0,n+"%");o=o.join("")}else o=o+n+"%";return o},unformat:function(e){var t=E._.stringToNumber(e);if(E.options.scalePercentBy100)return t*.01;return t}})}(),function(){E.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,r){var n=Math.floor(e/60/60),o=Math.floor((e-n*60*60)/60),a=Math.round(e-n*60*60-o*60);return n+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)},unformat:function(e){var t=e.split(":"),r=0;if(t.length===3){r=r+Number(t[0])*60*60;r=r+Number(t[1])*60;r=r+Number(t[2])}else if(t.length===2){r=r+Number(t[0])*60;r=r+Number(t[1])}return Number(r)}})}(),E})?n.call(t,r,t,e):n)||(e.exports=n)},function(e,t){e.exports=S},function(e,t){e.exports=k},function(e,t){e.exports=E},function(e,t){e.exports=P},function(e,t){e.exports=j},function(e,t){e.exports=x},function(e,t){e.exports=_},function(e,t){e.exports=R},function(e,t){e.exports=D},function(e,t){e.exports=T},function(e,n,o){!function(e){var t,r;function ju(e){return(ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window,r=function(r,n,o,a,i,l,s,c,u,p,f,d,h,m,y,b,v,g,w,O){return k={},C.m=S=[function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,t){e.exports=l},function(e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}e.exports={initDefaultState:function e(t){var r=t.model,n=t.data;if(Array.isArray(r)&&void 0!==n)for(var o=0;o<r.length;o++){var a=r[o].propertyName||r[o].key;if(r[o].defaultValue&&!n[a]&&(n[a]=r[o].defaultValue),Array.isArray(r[o].children)&&e({model:r[o].children,data:n}),void 0!==r[o].placeholders)for(var i in r[o].placeholders)e({model:r[o].placeholders[i],data:n});"customblock"===r[o]["data-buildertype"]&&"source"===r[o].sourceType&&null!=r[o].source&&e({model:JSON5.parse(r[o].source),data:n})}},initDefaultStateFormUrl:function(e){void 0===e&&(e={});var t,t=null==(t=new RegExp("[?&]defaultvalues=([^&#]*)").exec(window.location.href))?null:decodeURI(t[1])||0;if(t){var r=void 0;try{r=JSON5.parse(t)}catch(e){}if(r&&"object"===o(r))for(var n in r)void 0!==r[n]&&(e[n]=r[n])}return e},validate:function(e){for(var t,r,n,o=e.data,a=!0,i={},l=function n(e){var o=[];return e.forEach(function(e){var t;if((!0===e["other-required"]||void 0!==e["other-customValidation"]&&""!==e["other-customValidation"])&&o.push(e),void 0!==e.children&&0<e.children.length&&(t=n(e.children),o=o.concat(t)),void 0!==e.placeholders)for(var r in e.placeholders)r=n(e.placeholders[r]),o=o.concat(r);"customblock"===e["data-buildertype"]&&"source"===e.sourceType&&null!=e.source&&(t=JSON5.parse(e.source),t=n(t),o=o.concat(t))}),o}(e.model),s=0;s<l.length;s++){var c=l[s].propertyName||l[s].key,u=(t=l[s],r=o?o[c]:void 0,n=o,!(u=u=void 0)===t["other-required"]&&(null==r||""===r||"collectioneditor"===t["data-buildertype"]&&Array.isArray(r)&&0===r.length)?u="This field is required!":void 0!==t["other-customValidation"]&&""!==t["other-customValidation"]&&(t="return "+t["other-customValidation"],"boolean"==typeof(n=new Function("value, data",t)(r,n))?!1===n&&(u=!0):u=n),u);u&&(i[c]=u,a=!1)}return{valid:a,errors:i}},checkConditions:function e(t){var r=t.model,n=t.data,o={hideControls:[],readOnlyControls:[]};if(!r||!n)return o;for(var a=0;a<r.length;a++){var i,l=r[a]["other-visibleConition"];if(void 0!==l&&""!==l&&(new Function("data","return "+l)(n)||o.hideControls.push(r[a].key)),void 0!==(l=r[a]["other-readOnlyConition"])&&""!==l&&new Function("data","return "+l)(n)&&o.readOnlyControls.push(r[a].key),Array.isArray(r[a].children)&&(i=e({model:r[a].children,data:n}),o={hideControls:o.hideControls.concat(i.hideControls),readOnlyControls:o.readOnlyControls.concat(i.readOnlyControls)}),void 0!==r[a].placeholders)for(var s in r[a].placeholders)s=e({model:r[a].placeholders[s],data:n}),o={hideControls:o.hideControls.concat(s.hideControls),readOnlyControls:o.readOnlyControls.concat(s.readOnlyControls)};"customblock"===r[a]["data-buildertype"]&&"source"===r[a].sourceType&&null!=r[a].source&&(i=e({model:JSON5.parse(r[a].source),data:n}),o={hideControls:o.hideControls.concat(i.hideControls),readOnlyControls:o.readOnlyControls.concat(i.readOnlyControls)})}return o},updateEventsFormat:function(n){return n.updated||(Object.keys(n).forEach(function(e){var t,r=n[e];((t=r).actions||r.parameters||r.targets)&&(t={actions:r.actions||[],parameters:r.parameters||[],targets:r.targets||[]},n[e]={active:r.active||!1,triggers:r.actions?[t]:void 0})}),n.updated=!0),n}}},function(e,t){e.exports=s},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t){e.exports=p},function(e,t){e.exports=f},function(e,t,r){r(20),e.exports=self.fetch.bind(self)},function(e,t){e.exports=d},function(e,t){e.exports=h},function(e,t){e.exports=m},function(e,t){e.exports=y},function(e,t){e.exports=b},function(e,t){e.exports=v},function(e,t){e.exports=g},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",function(){return u}),r.d(t,"Request",function(){return b}),r.d(t,"Response",function(){return g}),r.d(t,"DOMException",function(){return O}),r.d(t,"fetch",function(){return C});var n,o,l="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==l&&l,s={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e?String(e):e}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s.iterable&&(e[Symbol.iterator]=function(){return e}),e}function u(t){this.map={},t instanceof u?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(r){return new Promise(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function d(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:s.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s.arrayBuffer&&s.blob&&e&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=h(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(d)}),this.text=function(){var e,t,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,r=f(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}s.arrayBuffer&&(n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&-1<n.indexOf(Object.prototype.toString.call(e))}),u.prototype.append=function(e,t){e=a(e),t=c(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[a(e)]},u.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},u.prototype.set=function(e,t){this.map[a(e)]=c(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t)}),i(r)},u.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},u.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),i(r)},s.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=(e=(r=t.method||this.method||"GET").toUpperCase(),-1<y.indexOf(e)?e:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((t=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(t,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function v(e){var r=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(e=(t=e.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),r.append(decodeURIComponent(e),decodeURIComponent(t)))}),r}function g(e,t){if(!(this instanceof g))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];g.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})};var O=l.DOMException;try{new O}catch(e){(O=function(e,t){this.message=e,this.name=t,e=Error(e),this.stack=e.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function C(n,i){return new Promise(function(o,e){var t=new b(n,i);if(t.signal&&t.signal.aborted)return e(new O("Aborted","AbortError"));var a=new XMLHttpRequest;function r(){a.abort()}a.onload=function(){var e,r,t={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",r=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var t=e.split(":");(e=t.shift().trim())&&(t=t.join(":").trim(),r.append(e,t))}),r)};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;setTimeout(function(){o(new g(n,t))},0)},a.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.onabort=function(){setTimeout(function(){e(new O("Aborted","AbortError"))},0)},a.open(t.method,function(t){try{return""===t&&l.location.href?l.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?a.withCredentials=!0:"omit"===t.credentials&&(a.withCredentials=!1),"responseType"in a&&(s.blob?a.responseType="blob":s.arrayBuffer&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!i||"object"!=ju(i.headers)||i.headers instanceof u?t.headers.forEach(function(e,t){a.setRequestHeader(t,e)}):Object.getOwnPropertyNames(i.headers).forEach(function(e){a.setRequestHeader(e,c(i.headers[e]))}),t.signal&&(t.signal.addEventListener("abort",r),a.onreadystatechange=function(){4===a.readyState&&t.signal.removeEventListener("abort",r)}),a.send(void 0===t._bodyInit?null:t._bodyInit)})}C.polyfill=!0,l.fetch||(l.fetch=C,l.Headers=u,l.Request=b,l.Response=g)},function(t,r,n){!function(y){var e;void 0===(e="function"==typeof(e=function(){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function e(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(r){var n=t();return function(){var e,t=a(r);return e=n?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==ju(e)&&"function"!=typeof e?l(t):e}}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(r):t.value}})(e,t,r||e)}var r,u,p=(e(m,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n]===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(t){var r=this;if(t.type in this.listeners){for(var e=this.listeners[t.type],n=0,o=e.length;n<o;n++)!function(e){setTimeout(function(){return e.call(r,t)})}(e[n]);return!t.defaultPrevented}}}]),m),f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,p);var t=s(r);function r(){var e;return n(this,r),(e=t.call(this)).listeners||p.call(l(e)),Object.defineProperty(l(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return e(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),c(a(r.prototype),"dispatchEvent",this).call(this,e)}}]),r}(),d=(e(h,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),h);function h(){n(this,h),Object.defineProperty(this,"signal",{value:new f,writable:!0,configurable:!0})}function m(){n(this,m),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",f.prototype[Symbol.toStringTag]="AbortSignal"),r="undefined"!=typeof self?self:y,((u=r).__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),1):"function"==typeof u.Request&&!u.Request.prototype.hasOwnProperty("signal")||!u.AbortController)&&(r.AbortController=d,r.AbortSignal=f)})?e.call(r,n,r,t):e)||(t.exports=e)}.call(this,n(22))},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":ju(window))&&(r=window)}e.exports=r},function(e,t){e.exports=w},function(e,t){e.exports=O},function(e,t,r){"use strict";r.r(t),r.d(t,"DWKitForm",function(){return iu}),r.d(t,"GridView",function(){return Zt}),r.d(t,"CollectionEditor",function(){return _e}),r.d(t,"BaseEditControl",function(){return Pu});var c=r(0),z=r.n(c);function o(e){return(o="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=r(7),l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,c.Component);var r,n,l=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=p(r),t=n?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t});function s(){var r;!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);for(var e,t,n,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=function(e,t){r.props.handleChange(r.props.row,e,t)},(t="handleChange")in(e=u(r=l.call.apply(l,[this].concat(a))))?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,r}return a(s.prototype,[{key:"shouldComponentUpdate",value:function(e){return!f(this.props,e)}}]),s}();function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=(n(h.prototype,[{key:"register",value:function(e,t){if(s.map[e])throw new Error("Component "+e+" already registered!");s.map[e]=t}},{key:"draw",value:function(e,t){var r=s.map[e];return r?r(t):(r=s.map["null-control"])({"data-buildertype":e,text:"".concat(e," is unsupported")})}}]),new h),d=s.register,K=s.draw;function h(){var e;!function(e){if(!(e instanceof h))throw new TypeError("Cannot call a class as a function")}(this),e={},"map"in this?Object.defineProperty(this,"map",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.map=e}function m(e){return(m="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=v(r),t=n?(t=v(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==m(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return y(t.prototype,[{key:"render",value:function(){return K("collection-checkbox",{me:this,props:this.props})}}]),t}();function g(e){return(g="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=S(r),t=n?(t=S(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==g(t)&&"function"!=typeof t?C(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k(C(n=o.call.apply(o,[this].concat(t))),"handleEvent",function(e){e.parameters||(e.parameters={}),e.parameters.row||(e.parameters.row=n.props.row),"onChange"===e.eventName?n.props.handleChange(n.props.row,e.syntheticEvent,e):n.props.handleEvent(e)}),k(C(n),"getAdditionalDataForControl",function(e,t,r){return(t=t||{}).row||(t.row=n.props.row),n.props.getAdditionalDataForControl(e,t,r)}),n}return w(a.prototype,[{key:"render",value:function(){return K("collection-custom-control",{getAdditionalDataForControl:this.getAdditionalDataForControl,handleEvent:this.handleEvent,props:this.props})}}]),a}();function j(e){return(j="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=R(r),t=n?(t=R(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==j(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return x(t.prototype,[{key:"render",value:function(){return K("collection-date-time",{me:this,props:this.props})}}]),t}();function T(e){return(T="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=I(r),t=n?(t=I(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==T(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return F(t.prototype,[{key:"render",value:function(){return K("collection-dropdown",{me:this,props:this.props})}}]),t}();function N(e){return(N="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=M(r),t=n?(t=M(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==N(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return B(t.prototype,[{key:"render",value:function(){return K("collection-input",{me:this,props:this.props})}}]),t}();function W(e){return(W="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=G(r),t=n?(t=G(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==W(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return H(t.prototype,[{key:"render",value:function(){return K("collection-upload",{me:this,props:this.props})}}]),t}();function Y(e){return(Y="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=X(r),t=n?(t=X(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Y(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return Q(t.prototype,[{key:"render",value:function(){return K("collection-camera",{me:this,props:this.props})}}]),t}();function te(e){return(te="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=oe(r),t=n?(t=oe(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==te(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return re(t.prototype,[{key:"render",value:function(){return K("collection-signature",{me:this,props:this.props})}}]),t}();function ie(e){return(ie="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=ue(r),t=n?(t=ue(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ie(t)&&"function"!=typeof t?ce(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return pe(ce(n=o.call.apply(o,[this].concat(t))),"onUpload",function(e,t){var r=ce(n),e={name:e.name,token:t.result.properties.Token,success:t.success,properties:t.result.properties};t.success?r.props.onChange&&r.props.onChange(null,{name:r.props.name,propertyName:r.props.propertyName,value:t.result.properties.Token,parameters:e}):r.props.onUploadFail&&r.props.onUploadFail(null,{name:r.props.name,propertyName:r.props.propertyName,message:t.result.message,details:t.result.details,success:!1})}),pe(ce(n),"onClear",function(e){var t=ce(n);t.props.onChange&&t.props.onChange(null,{name:t.props.name,propertyName:t.props.propertyName,value:null})}),n}return le(a.prototype,[{key:"render",value:function(){var e=this.onClear,t=this.onUpload;return K("camera",{handleChange:this.handleChange,me:this,onClear:e,onUpload:t,props:this.props,state:this.state})}}]),a}();function de(e){return void 0===e}function he(e){return!de(e)&&null!==e}function me(e){return he(e)&&""!==e}r(7);var ye=r(4),be=r.n(ye),ve=r(8),ge=r.n(ve);function we(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var je=r(7),xe=r(10),_e=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Ee(r),t=n?(t=Ee(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Oe(t)&&"function"!=typeof t?ke(e):t});function a(e){var u;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),Pe(ke(u=o.call(this,e)),"btnAdd",function(){var e=de(u.props.defaultrow)?{}:u.props.defaultrow;e.__id="CLIENT_"+ge.a.v1(),u.fillDefaultValues(e,u.props.columns,u.props.placeholders),u.state.data.push(e),u.props.handleEvent&&u.props.handleEvent({key:u.props.name,propertyName:u.props.propertyName,eventName:"onAdd",parameters:{rowIdx:u.state.data.length-1,row:e}}),u.sendChangesToParent()}),Pe(ke(u),"handleChange",function(e,t,r){var n=r.name,o=r.propertyName,a=r.value,i=r.checked,l=r.additionalValues;if(u.props.handleEvent||u.props.onChange){var s=o||n;if(de(a)&&he(i)?e[s]=i:e[s]=a,"object"==Oe(l))for(var c in l)e[s+"_"+c]=l[c];u.sendChangesToParent(),t&&t.preventDefault?t.preventDefault():u.forceUpdate()}}),u.state={expanded:{},data:[]},u}return t=[{key:"getDerivedStateFromProps",value:function(e,t){var r=null;return je(t.originalValue,e.value)||((r={}).originalValue=xe(e.value),e=null==e.value?[]:e.value,Array.isArray(e)?(r.data=xe(e),r.stringmode=!1):(r.data=e.length?be.a.parse(e):[],r.stringmode=!0)),r}}],Ce((e=a).prototype,[{key:"applyCollapseAll",value:function(e){for(var t in e)de(this.state.expanded[t])&&(this.state.expanded[t]=!1)}},{key:"getFilteredItems",value:function(e,t){return void 0===e?[]:void 0!==t?e.filter(function(e){return t.IsRowMatched(e)}):e}},{key:"btnDelete",value:function(e,t){var r;(this.props.handleEvent||this.props.onChange)&&(r=(t=void 0===t?this.state.data:t)[e],t.splice(e,1),this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onDelete",parameters:{rowIdx:e,row:r}}),this.sendChangesToParent())}},{key:"btnAddChild",value:function(e,t){var r=(t=void 0===t?de(this.state.data)?[]:this.state.data:t)[e];(e=de(this.props.defaultrow)?{}:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?we(Object(r),!0).forEach(function(e){Pe(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},this.props.defaultrow)).__id="CLIENT_"+ge.a.v1(),this.fillDefaultValues(e,this.props.columns,this.props.placeholders),this.props.parentIdField?(e[this.props.parentIdField]=r[this.props.idField]||r.__id,t.push(e)):(Array.isArray(r[this.props.childrenField])||(r[this.props.childrenField]=[]),r[this.props.childrenField].push(e)),this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onAddChild",parameters:{rowIdx:t.length-1,row:e}}),this.sendChangesToParent()}},{key:"fillDefaultValues",value:function(e,t,r){if(t&&r)for(var n=0;n<t.length;n++){var o=void 0,a=r[o="object"===Oe(t[n])?t[n].key:t[n]];Array.isArray(a)&&0<a.length&&(a=a[0])&&(a.propertyName&&(o=a.propertyName),a.defaultValue&&(e[o]=a.defaultValue))}}},{key:"copyForParentId",value:function(t,r,e){var n=this,o=xe(r);return o.__id="CLIENT_"+ge.a.v1(),delete o[this.props.idField],o[this.props.parentIdField]=e,t.filter(function(e){return e[n.props.parentIdField]===(r[n.props.idField]||r.__id)}).forEach(function(e){return n.copyForParentId(t,e,o.__id)}),t.push(o),o}},{key:"resetIdsRecursive",value:function(e){var t=this;e.__id="CLIENT_"+ge.a.v1(),delete e[this.props.idField],Array.isArray(e[this.props.childrenField])&&e[this.props.childrenField].forEach(function(e){return t.resetIdsRecursive(e)})}},{key:"btnCopy",value:function(e,t){var r,e=(t=t||this.state.data)[e];this.props.parentIdField&&e.hasOwnProperty(this.props.parentIdField)?r=this.copyForParentId(t,e,e[this.props.parentIdField]):(r=xe(e),this.resetIdsRecursive(r),t.push(r)),this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onCopy",parameters:{rowIdx:t.length-1,row:r}}),this.sendChangesToParent()}},{key:"onExpand",value:function(e,t){this.state.expanded[e]=t,this.forceUpdate()}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragStart",value:function(e,t,r){r.dataTransfer.setData("index",e);var n=r.target;(n=(n=n&&n.parentElement)&&n.parentElement)&&r.dataTransfer.setDragImage($(r.target).parent().parent()[0],0,0),this.state.dragElementIndex=e,this.state.dragRows=t}},{key:"onDragEnd",value:function(e,t){this.state.dragElementIndex=void 0,this.state.dragRows=void 0}},{key:"onDrop",value:function(e,t,r){var n=this.state.dragElementIndex,o=this.state.dragRows,e=e,t=t;return he(n)&&(e!==n&&(void 0!==this.props.parentIdField&&""!==this.props.parentIdField&&(o[n][this.props.parentIdField]=t[e][this.props.parentIdField]),t.splice(e,0,o.splice(n,1)[0]),this.sendChangesToParent()),r.preventDefault()),!1}},{key:"sendChangesToParent",value:function(){var e=this.state.data,e=this.state.stringmode?e.length?be.a.stringify(e):[]:e;this.props.buildermode||(this.props.onChange?this.props.onChange(null,{name:this.props.name,propertyName:this.props.propertyName,value:e}):this.props.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onChange",name:this.props.name,value:e,propertyName:this.props.propertyName}))}},{key:"render",value:function(){return K("collection-editor",{applyCollapseAll:this.applyCollapseAll,btnAdd:this.btnAdd,btnAddChild:this.btnAddChild,btnCopy:this.btnCopy,btnDelete:this.btnDelete,getFilteredItems:this.getFilteredItems,handleChange:this.handleChange,me:this,onExpand:this.onExpand,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDragOver:this.onDragOver,onDrop:this.onDrop,props:this.props,state:this.state})}}]),Ce(e,t),a}();function Re(e){return(Re="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ae=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Fe(r),t=n?(t=Fe(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Re(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return De(o.prototype,[{key:"render",value:function(){return K("container",{props:this.props})}}]),o}(),Ie=r(5),Le=r.n(Ie);function Ne(e){return window.DWKitLang&&window.DWKitLang.common&&window.DWKitLang.common.dateFormat?window.DWKitLang.common.dateFormat:e}function Be(e){return window.DWKitLang&&window.DWKitLang.common&&window.DWKitLang.common.timeFormat?window.DWKitLang.common.timeFormat:e}function Ve(){if(window.DWKitAdminLang&&window.DWKitAdminLang.workflowbar)return window.DWKitAdminLang.workflowbar}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=We(r),t=n?(t=We(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Me(t)&&"function"!=typeof t?Ke(e):t});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),He(Ke(r=t.call(this,e)),"handleChangeRaw",function(e){e=Le()(e.target.value,r.state.dateFormat),r.onChange(e)}),He(Ke(r),"onChange",function(e){var t;r.props.readOnly||he(r.props.onChange)&&((t=null)!=e&&he(e)&&(t="date"===r.props.type?e.format("YYYY-MM-DD"):e.toJSON()),r.props.onChange(null,{propertyName:r.props.propertyName,name:r.props.name,value:t}))}),r.state={},r}return Ue(o.prototype,[{key:"render",value:function(){var e=this.props.type,t=this.props.value?Le()(this.props.value):void 0;t&&!t.isValid()&&(t=void 0);var r={style:this.props.style,className:this.props.className,onBlur:this.props.onBlur,onClick:this.props.onClick,onFocus:this.props.onFocus,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},n={};return"date"===e?n.dateFormat=Ne("DD.MM.YYYY"):"time"===e?(n.showTimeSelect=!0,n.showTimeSelectOnly=!0,n.timeIntervals=10,n.dateFormat=Be(),n.dateFormat||(n.dateFormat="HH:mm",n.timeFormat="HH:mm")):"datetime"===e&&(n.showTimeSelect=!0,Ne()?n.dateFormat=Ne()+" "+Be("HH:ss"):(n.dateFormat="DD.MM.YYYY HH:mm",n.timeFormat="HH:mm")),this.state.dateFormat=n.dateFormat,K("date-picker",{controlProps:r,date:t,datePickerProps:n,handleChangeRaw:this.handleChangeRaw,onChange:this.onChange,state:this.state,placeholder:this.placeholder,props:this.props})}}]),o}();function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qe=r(7),Ze=r(10),Xe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Ye(r),t=n?(t=Ye(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Ge(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function a(e){var t;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),(t=o.call(this,e)).state={options:[],value:t.props.value},t.pageSize=e.pageSize,t.pageSize||(t.pageSize=100),t}return t=[{key:"getDerivedStateFromProps",value:function(e,t){return e.dataModel!==t.dataModel?{getAdditionalDataForControl:e.getAdditionalDataForControl,dataModel:e.dataModel,needFetch:!0,needValueFetch:!0,filters:e.filters}:e.paging&&e.value!==t.value&&void 0!==e.value?{needValueFetch:!0,value:e.value}:e.filters!=t.filters?{needFetch:!0,filters:e.filters}:null}}],Je((e=a).prototype,[{key:"componentDidMount",value:function(){this.GetAdditionalData()}},{key:"shouldComponentUpdate",value:function(e,t){return!Qe(this.state,t)||!Qe(this.props,e)}},{key:"componentDidUpdate",value:function(e,t){this.GetAdditionalData()}},{key:"GetAdditionalData",value:function(){var r,e,n=this;void 0===this.state.dataModel?void 0!==console&&!0===this.props.buildermode&&console.log("Dictionary: Set DataModel label!"):void 0===this.state.getAdditionalDataForControl?void 0!==console&&!0===this.props.buildermode&&console.log("Dictionary: For paging on server need to set getAdditionalDataForControl func!"):this.state.needFetch?(e={model:(r=this).state.dataModel,filters:this.state.filters},this.props.paging&&(e.startIndex=0,e.pageSize=this.pageSize),this.state.isFetching=!0,this.state.needFetch=!1,this.state.getAdditionalDataForControl(this,e,function(e){var t=e.items,e=e.rowsCount;r.setData({items:t,rowsCount:e,page:0},!0),n.state.needValueFetch&&(n.state.needValueFetch=!1,n.loadCurrentValue())})):this.state.needValueFetch&&(this.state.needValueFetch=!1,this.loadCurrentValue())}},{key:"render",value:function(){var e,t=this,r={};for(e in this.props)"parentIsForm"!==e&&"getAdditionalDataForControl"!==e&&"dataModel"!==e&&"clearable"!==e&&"columns"!==e&&"paging"!==e&&"pageSize"!==e&&"handleEvent"!==e&&"propertyName"!==e&&"textAsValue"!==e&&(r[e]=this.props[e]);return this.props.readOnly&&(r.disabled=!0),r.options=this.state.options,r.onChange=this.onChange.bind(this),this.props.paging&&(r.onSearchChange=this.handleSearchChange.bind(this),r.onClose=this.onClose.bind(this),null!=this.state.open&&(this.state.open?r.open=!0:(r.open=!1,this.state.open=void 0,setTimeout(function(){t.forceUpdate()})))),r.multiple&&(void 0!==r.value&&null!==r.value||(r.value=[]),Array.isArray(r.value)||(r.value=this.getArrayValues(r.value))),r.loading=this.state.isFetching,r.searchQuery=this.state.searchQuery,K("dictionary",{propsControl:r,props:this.props})}},{key:"onChange",value:function(e,t){var r,n=this,o=(t.name,t.value),t=!1;this.props.multiple?Array.isArray(o)&&(r=!1,o.forEach(function(e){"string"==typeof e&&0===e.lastIndexOf("__load",0)&&(r=!0)}),r&&(t=!0)):"string"==typeof o&&0===o.lastIndexOf("__load",0)&&(t=!0),t?(this.state.open=!0,this.setState({isFetching:!0}),this.loadNextPage(),o=this.props.value):he(this.state.open)&&(this.state.open=!1);var a=null;this.props.textAsValue||(Array.isArray(o)?(a=new Array,o.forEach(function(t){var e;"string"!=typeof t||0!==t.lastIndexOf("__load",0)||0<(e=n.state.options.filter(function(e){return e.key===t})).length&&a.push(e[0].values)})):0<(t=this.state.options.filter(function(e){return e.key===o})).length?a=t[0].values:(t=this.getCollumnsForFilter())&&(a={},t.split(",").forEach(function(e){a[e]=null}))),this.props.handleEvent&&this.props.handleEvent({syntheticEvent:e,key:this.props.name,eventName:"onChange",name:this.props.name,propertyName:this.props.propertyName,value:o,additionalValues:a})}},{key:"onClose",value:function(){1!=this.state.open&&this.state.searchQuery?(this.state.isFetching=!0,this.state.searchQuery="",this.state.lastLoadPage=-1,this.loadNextPage(!0)):!1===this.state.open&&this.forceUpdate()}},{key:"handleSearchChange",value:function(e,t){var r=t.searchQuery,n=this;n.searchTimeout&&clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(function(){n.searchTimeout=void 0,n.setState({isFetching:!0,searchQuery:r,lastLoadPage:-1}),n.loadNextPage(!0)},100)}},{key:"loadNextPage",value:function(r){var n=this,e={model:this.state.dataModel},o=this.state.lastLoadPage+1;n.state.searchQuery&&(e.filters=[{column:this.getCollumnsForFilter(),term:"like",value:n.state.searchQuery}]),e.startIndex=o*this.pageSize,e.pageSize=this.pageSize,this.state.getAdditionalDataForControl(this,e,function(e){var t=e.items,e=e.rowsCount;n.setData({items:t,rowsCount:e,page:o},r),r&&n.loadCurrentValue()})}},{key:"setData",value:function(e,t){var r,n=e.items,o=e.rowsCount,e=e.page;if(t){if(o>(r=Ze(n)).length&&(u=(null!=this.state.searchQuery?this.state.searchQuery:"")+"...",r.push({key:"__load",value:"__load",text:u})),this.props.clearable&&!this.props.multiple&&r.unshift({key:"__reset",value:"",text:"   "}),this.props.multiple)for(var a=this.getArrayValues(this.props.value),i=0;i<a.length;i++)for(var l=a[i],s=0;s<this.state.options.length;s++){var c=this.state.options[s];l==c.value&&r.unshift(c)}}else{var u=void 0;0<(r=this.state.options).length&&"__load"===r[r.length-1].key&&((u=r.pop()).value="__load_"+e);for(var p=0;p<n.length;p++){for(var f=n[p],d=0;d<r.length;d++)if(r[d].key===f.key){r.splice(d,1);break}r.push(f)}void 0!==u&&o>r.length&&r.push(u)}this.props.textAsValue&&r.forEach(function(e){"__load"!=e.key&&(e.value=e.text)}),this.setState({needFetch:!1,options:r,rowsCount:o,isFetching:!1,lastLoadPage:e}),this.props.handleEvent&&this.props.handleEvent({syntheticEvent:void 0,key:this.props.name,eventName:"onDataReceived",name:this.props.name,propertyName:this.props.propertyName,value:this.props.value,parameters:{options:r}})}},{key:"getArrayValues",value:function(e){var t,e=e;if(!Array.isArray(e)){try{t=JSON.parse(e)}catch(e){}e=t=Array.isArray(t)?t:[e]}return e}},{key:"loadCurrentValue",value:function(){var t=this;if(this.props.value)if(this.props.multiple){for(var r,e=this.getArrayValues(this.props.value),n=[],o=0;o<e.length;o++){for(var a=e[o],i=!1,l=0;l<this.state.options.length;l++)if(this.state.options[l].value==a){i=!0;break}i||n.push(a)}0<n.length&&(this.props.textAsValue?(r=this.state.options,n.forEach(function(e){r.push({value:e,text:e})})):((s={model:this.state.dataModel}).filters=[{column:"__id",term:"in",value:n}],this.state.isFetching=!0,this.state.getAdditionalDataForControl(this,s,function(e){e=e.items,t.addAdditionalOptions(e)})))}else{for(var s,c=!1,u=0;u<this.state.options.length;u++)if(this.state.options[u].value==this.props.value){c=!0;break}c||(this.props.textAsValue?this.state.options.push({value:t.props.value,text:t.props.value}):((s={model:this.state.dataModel}).filters=[{column:"__id",term:"=",value:t.props.value}],this.state.isFetching=!0,this.state.getAdditionalDataForControl(this,s,function(e){e=e.items,t.addAdditionalOptions(e)})))}}},{key:"addAdditionalOptions",value:function(e){if(this.state.isFetching=!1,Array.isArray(e)&&e.length){for(var t=this.state.options,r=e.length-1;0<=r;r--){for(var n=!1,o=0;o<t.length;o++)if(t[o].key==e[r].key){n=!0;break}n||t.unshift(e[r])}this.forceUpdate()}}},{key:"getCollumnsForFilter",value:function(){if(this.props.columns){var e=new RegExp(" asc","gi"),t=this.props.columns.replace(e,""),e=new RegExp(" desc","gi"),t=t.replace(e,"");return e=new RegExp(" ","gi"),t.replace(e,"")}}}]),Je(e,t),a}();function et(e){return(et="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var it=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=ot(r),t=n?(t=ot(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==et(t)&&"function"!=typeof t?nt(e):t});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),at(nt(r=t.call(this,e)),"onChange",function(e,t){t.name,t=t.value,1!=r.state.opendialog?he(r.props.handleEvent)&&r.props.handleEvent({e:e,key:r.props.name,propertyName:r.props.propertyName,eventName:"onItemClick",parameters:{target:t}}):r.state.opendialog=!1}),at(nt(r),"onMouseDown",function(e){r.state.opendialog=!Boolean(r.state.opendialog)}),r.state={},r}return tt(o.prototype,[{key:"render",value:function(){var e,n={};for(e in this.props)"imageUrl"!==e&&"defaultValue"!==e&&"value"!==e&&"handleEvent"!==e&&"items"!==e&&"propertyName"!==e&&(n[e]=this.props[e]);return n.options=[],this.props.items.forEach(function(e){var t=!1;if(void 0!==e.visibleCondition&&null!==e.visibleCondition&&""!==e.visibleCondition){var r="return "+e.visibleCondition;try{new Function("",r)()||(t=!0)}catch(e){}}t||n.options.push({value:e.target,text:e.title,target:e.target})}),n.value="",n.onChange=this.onChange,K("dropdown-trigger",{controlProps:n,onMouseDown:this.onMouseDown,props:this.props})}}]),o}();function lt(e){return(lt="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function st(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ft=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=pt(r),t=n?(t=pt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==lt(t)&&"function"!=typeof t?ut(e):t});function a(e){var i,t,r,n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),n=function(e,t){var r,n=i.props.additionalParams.handleEvent,o=i.props.onSuccess,a=i.props.onFail;(n||o||a)&&(t.success?(r={name:e.name,size:e.size,token:t.result.properties.Token,success:t.success,properties:t.result.properties},o?o(i.props.name,i.props.propertyName,r):n&&n({key:i.props.name,eventName:"success",name:i.props.name,propertyName:i.props.propertyName,value:t.message,parameters:r})):(t={name:e.name,size:e.size,message:t.message,success:t.success,details:t.details},a?a(i.props.name,i.props.propertyName,t):n&&n({key:i.props.name,eventName:"fail",name:i.props.name,propertyName:i.props.propertyName,parameters:t})),i.props.addRemoveLinks&&setTimeout(function(){e._removeLink.click()},500))},(r="fileUploadSuccess")in(t=ut(i=o.call(this,e)))?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,i.state={commands:e.commands,states:e.states},i}return st(a.prototype,[{key:"componentDidMount",value:function(){this.isMount=!0}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"render",value:function(){var e=this.props.additionalParams.parentItem,t=void 0;this.props.iconFiletypes&&(o=this.props.iconFiletypes.split(","),Array.isArray(o)&&0<o.length&&(t=[],o.forEach(function(e){t.push(e.trim())})));var r={addRemoveLinks:this.props.addRemoveLinks,autoProcessQueue:this.props.autoProcessQueue&&he(this.props.postUrl)},n={iconFiletypes:t,showFiletypeIcon:this.props.showFiletypeIcon,postUrl:de(this.props.postUrl)?"no-url":this.props.postUrl},o={success:this.fileUploadSuccess};return K("dropzone",{componentConfig:n,djsConfig:r,eventHandlers:o,isForm:this.isForm(e),props:this.props})}},{key:"isForm",value:function(e){return e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"getEvents",value:function(){return["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","processing","uploadprogress","sending","success","complete","canceled","maxfilesreached","maxfilesexceeded","processingmultiple","sendingmultiple","successmultiple","completemultiple","canceledmultiple","totaluploadprogress","reset","queuecompleted"]}}]),a}();function dt(e){return(dt="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function ht(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){if(e){if("string"==typeof e)return mt(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mt(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function bt(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):yt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ot=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=wt(r),t=n?(t=wt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==dt(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(r=t.call(this,e)).state={},r.props.events.forEach(function(e){var t=r.props.data[e]||{triggers:[]};(de(t)||t.actions||t.parameters||t.targets||de(t.triggers[0]))&&(t=r.props.data[e]={active:t.active||!1,triggers:[{actions:t.actions||[],parameters:t.parameters||[{name:"",value:""}],targets:t.targets||[]}]},r.handleChange(e,{},{name:"triggers",checked:t.active||!1,value:t.triggers}))}),r}return vt(o.prototype,[{key:"render",value:function(){var n=[];Array.isArray(this.props.actions)&&this.props.actions.forEach(function(e){"string"==typeof e?n.push({text:e,value:e}):n.push(bt(bt({},e),{},{value:e.text}))});var r=this.props.data,e=this.props.events,o=ht(this.props.targets);return e.forEach(function(e){var t;he(r)&&(t=r[e])&&t.triggers&&Array.isArray(t.triggers)&&t.triggers.forEach(function(e){e.actions&&e.actions.forEach(function(e){for(var t=!1,r=0;r<n.length;r++)if(e==n[r].value){t=!0;break}t||n.push({text:e,value:e})}),e.targets&&e.targets.forEach(function(e){for(var t=!1,r=0;r<o.length;r++)if(e===o[r].value){t=!0;break}t||o.push({text:e,value:e})})})}),K("events-editor",{actionOptions:[].concat(n),targetOptions:ht(o),items:this.items,me:this,props:this.props})}},{key:"initNewTrigger",value:function(e){var t=this.props.data;t&&(t[e]||(t[e]={}),de((t=t[e]).triggers)&&(t.triggers=[]),t.triggers.push({actions:[],targets:[],parameters:[{name:"",value:""}]}),this.handleChange(e,{},{name:"triggers",checked:t.active||!1,value:t.triggers}))}},{key:"handleChange",value:function(e,t,r){var n=r.name,o=r.value,a=r.checked;de(r=this.props.data[e])&&(this.props.data[e]=r={triggers:[]}),de(o)&&he(a)?r[n]=a:r[n]=o,he(this.props.onChange)&&this.props.onChange(t,{name:this.props.name,value:this.props.data})}},{key:"actionsOnAddItem",value:function(e,t){t=t.value,he(this.props.onAdditionActions)&&this.props.onAdditionActions(e,{value:t})}}]),o}();function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _t=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=jt(r),t=n?(t=jt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Ct(t)&&"function"!=typeof t?Pt(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return xt(Pt(n=o.call.apply(o,[this].concat(t))),"onDropzoneUploadSuccess",function(e,t,r){n.onFileUploaded(r)}),xt(Pt(n),"onDropzoneUploadFail",function(e,t,r){n.onFail(r)}),xt(Pt(n),"onCollectionEditorChange",function(e){var t=e.eventName,r=e.parameters,e=e.value;"onDelete"===t&&n.props.additionalParams.handleEvent({key:n.props.name,propertyName:n.props.propertyName,eventName:t,parameters:r}),"onChange"===t&&n.props.additionalParams.handleEvent({syntheticEvent:null,key:n.props.name,eventName:t,name:n.props.name,value:e,propertyName:n.props.propertyName})}),xt(Pt(n),"onUploadChange",function(e,t){t=t.parameters,n.onFileUploaded(t)}),xt(Pt(n),"onUploadFail",function(e,t){n.onFail(t)}),xt(Pt(n),"nameGetter",function(e){return e[n.props.columns.find(function(e){return"Name"===e.property}).field]}),xt(Pt(n),"contentTypeGetter",function(e){return e[n.props.columns.find(function(e){return"ContentType"===e.property}).field]}),n}return kt(a.prototype,[{key:"onFileUploaded",value:function(e){var t,r=this.props.value?function(e){if(Array.isArray(e))return St(e)}(t=this.props.value)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(e){if(e){if("string"==typeof e)return St(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?St(e,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():[],n=e.properties,o={__id:"CLIENT_"+ge.a.v1()};this.props.columns.filter(function(e){return e.field}).forEach(function(e){o[e.field]=n[e.property]}),r.push(o),this.props.additionalParams.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onChange",name:this.props.name,value:r,propertyName:this.props.propertyName}),this.props.additionalParams.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onUploadSuccess",name:this.props.name,parameters:e,propertyName:this.props.propertyName})}},{key:"onFail",value:function(e){this.props.additionalParams.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onUploadFail",name:this.props.name,parameters:e,propertyName:this.props.propertyName})}},{key:"render",value:function(){var r=this,n=[];this.props.columns.filter(function(e){return e.showcolumn}).forEach(function(e){var t={key:e.field,name:e.title,control:e.control};"Token"===e.property&&(t.additionalData={customNameGetter:r.nameGetter,customContentTypeGetter:r.contentTypeGetter}),n.push(t)});var e={readOnly:this.props.readOnly,value:this.props.value,idField:this.props.idField,downloadUrl:this.props.downloadUrl,columns:n,handleEvent:this.onCollectionEditorChange};return K("files",{editorProps:e,onDropzoneUploadSuccess:this.onDropzoneUploadSuccess,onDropzoneUploadFail:this.onDropzoneUploadFail,onUploadChange:this.onUploadChange,onUploadFail:this.onUploadFail,props:this.props})}}]),a}();function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ft(e,t,r){return t&&Tt(e.prototype,t),r&&Tt(e,r),e}var At=(Ft(Nt,null,[{key:"Greater",get:function(){return">"}},{key:"Less",get:function(){return">"}},{key:"Equal",get:function(){return"="}},{key:"GreaterOrEqual",get:function(){return">="}},{key:"LessOrEqual",get:function(){return"<="}},{key:"NotEqual",get:function(){return"!="}},{key:"Like",get:function(){return"like"}},{key:"StartsWith",get:function(){return"like*"}},{key:"EndsWith",get:function(){return"*like"}},{key:"IsGreater",value:function(e){return e===Nt.Greater}},{key:"IsLess",value:function(e){return e===Nt.Less}},{key:"IsEqual",value:function(e){return e===Nt.Equal}},{key:"IsGreaterOrEqual",value:function(e){return e===Nt.GreaterOrEqual}},{key:"IsLessOrEqual",value:function(e){return e===Nt.LessOrEqual}},{key:"IsNotEqual",value:function(e){return e===Nt.NotEqual}},{key:"IsLike",value:function(e){return e.toLowerCase()===Nt.Like||"*like*"===e.toLowerCase()}},{key:"IsStartsWith",value:function(e){return e.toLowerCase()===Nt.StartsWith}},{key:"IsEndsWith",value:function(e){return e.toLowerCase()===Nt.EndsWith}},{key:"Evaluate",value:function(e,t,r){if(Nt.IsGreater(r))return Nt.compareWithTypeCheck(e,t,function(e,t){return t<e});if(Nt.IsLess(r))return Nt.compareWithTypeCheck(e,t,function(e,t){return e<t});if(Nt.IsEqual(r))return Nt.compareWithTypeCheck(e,t,function(e,t){return e===t});if(Nt.IsGreaterOrEqual(r))return Nt.compareWithTypeCheck(e,t,function(e,t){return t<=e});if(Nt.IsLessOrEqual(r))return Nt.compareWithTypeCheck(e,t,function(e,t){return e<=t});if(Nt.IsNotEqual(r))return Nt.compareWithTypeCheck(e,t,function(e,t){return e!==t});if(Nt.IsLike(r))return Nt.likeCompare(e,t,function(e,t){return 0<=e.indexOf(t)});if(Nt.IsStartsWith(r))return Nt.likeCompare(e,t,function(e,t){return e.startsWith(t)});if(Nt.IsEndsWith(r))return Nt.likeCompare(e,t,function(e,t){return e.endsWith(t)});throw"Unknown term "+r}},{key:"likeCompare",value:function(e,t,r){return null===e&&null===t||void 0===e&&void 0===t||null!=e&&null!=t&&r(e.toString().toLowerCase(),t.toString().toLowerCase())}},{key:"compareWithTypeCheck",value:function(e,t,r){return null===e&&null===t||void 0===e&&void 0===t||null!=e&&null!=t&&(e instanceof Date&&"string"==typeof t?r(e.getTime(),new Date(t).getTime()):"string"==typeof e&&t instanceof Date?r(new Date(e).getTime(),t.getTime()):e instanceof Date&&t instanceof Date?r(e.getTime(),t.getTime()):Rt(e)===Rt(t)?r(e,t):r(e,"number"==typeof e&&"string"==typeof t?parseFloat(t):"string"==typeof e&&"number"==typeof t?t.toString():t))}}]),Nt),It=(Ft(Lt,[{key:"AddFilter",value:function(e){var r,t,n,o=this,a=e.names,i=e.expected,l=e.term,s=e.id;a.length<1||(r=1===a.length?a[0]:a.sort().join(","),this._innerFilter.hasOwnProperty(r)?t=this._innerFilter[r]:((t=this._innerFilter[r]={}).funcs=[],t.items=[],t.test=function(t){return o._innerFilter[r].funcs.every(function(e){return e(t)})}),n=function(e,t){var r=Object.keys(e).find(function(e){return e.toString().toLowerCase()===t.toLowerCase()});return void 0!==r&&At.Evaluate(e[r],i,l)},e=1===a.length?function(e){return n(e,a[0])}:function(t){return a.some(function(e){return n(t,e)})},t.funcs.push(e),t.items.push({expected:i,term:l,id:s}))}},{key:"RemoveFilter",value:function(e){var t,r,n,o=this,a=e.name,i=e.id;void 0!==a&&(r=Array.isArray(a)?(t=1===a.length?a[0]:a.sort().join(","),a):[t=a]),void 0!==a&&void 0===i?delete this._innerFilter[t]:void 0===a&&void 0===i?this._innerFilter={}:(n=function(e,t,r){var n;!o._innerFilter.hasOwnProperty(e)||(n=o._innerFilter[e].items.filter(function(e){return e.id!==r})).length<o._innerFilter[e].items.length&&(delete o._innerFilter[e],n.forEach(function(e){o.AddFilter({names:t,expected:e.expected,term:e.term,id:e.id})}))},void 0!==a&&void 0!==i?n(t,r,i):Object.keys(this._innerFilter).forEach(function(e){n(e,e.split(","),i)}))}},{key:"IsRowMatched",value:function(e){var t=Object.keys(this._innerFilter);if(t.length<=0)return!0;for(var r=0;r<t.length;r++)if(!this._innerFilter[t[r]].test(e))return!1;return!0}},{key:"GetFilterAsObjects",value:function(){var e=this;if(void 0===this._innerFilter)return[];var r=[];return Object.keys(this._innerFilter).forEach(function(t){e._innerFilter[t].items.forEach(function(e){r.push({column:t,value:e.expected,term:e.term})})}),r}}]),Lt);function Lt(e,r){var n=this;if(Dt(this,Lt),this._innerFilter={},void 0!==e&&Array.isArray(e)){if(void 0===r||!Array.isArray(r))throw"columns must be array";e.forEach(function(e){var t;void 0!==e&&(t="*"===e.column?r:e.column.split(",").map(function(e){return e.trim()}),n.AddFilter({names:t,expected:e.value,term:e.term}))})}}function Nt(){Dt(this,Nt)}function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Vt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e,t,r){return t&&Ut(e.prototype,t),r&&Ut(e,r),e}function Kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e=qt(r),t=n?(t=qt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Bt(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t}}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gt=function(){Kt(t,c.Component);var e=Ht(t);function t(){return Mt(this,t),e.apply(this,arguments)}return zt(t,[{key:"render",value:function(){return K("checkbox-formatter",{props:this.props})}}]),t}(),Jt=function(){Kt(t,c.Component);var e=Ht(t);function t(){return Mt(this,t),e.apply(this,arguments)}return zt(t,[{key:"render",value:function(){return K("number-formatter",{props:this.props})}}]),t}(),$t=function(){Kt(t,c.Component);var e=Ht(t);function t(){return Mt(this,t),e.apply(this,arguments)}return zt(t,[{key:"render",value:function(){var e,t=Le()(this.props.value),r="";return t.isValid()&&(e=Ne("L"),r=t.format(e)),K("date-formatter",{props:this.props,strValue:r})}}]),t}(),Yt=function(){Kt(t,c.Component);var e=Ht(t);function t(){return Mt(this,t),e.apply(this,arguments)}return zt(t,[{key:"render",value:function(){var e,t,r,n=Le()(this.props.value),o="";return n.isValid()&&(r="DD.MM.YYYY HH:mm",(e=Ne())&&(t=Be("HH:mm"),r="".concat(e," ").concat(t)),o=n.format(r)),K("datetime-formatter",{props:this.props,strValue:o})}}]),t}(),Qt=function(){Kt(t,c.Component);var e=Ht(t);function t(){return Mt(this,t),e.apply(this,arguments)}return zt(t,[{key:"render",value:function(){var e,t=Le()(this.props.value),r="";return t.isValid()&&(e=he(window.DWKitLang)&&he(window.DWKitLang.common)&&he(window.DWKitLang.common.timeFormat)?window.DWKitLang.common.timeFormat:"HH:mm",r=t.format(e)),K("time-formatter",{props:this.props,strValue:r})}}]),t}(),Zt=function(){Kt(i,c.Component);var r=Ht(i);function i(e){var t;Mt(this,i),(t=r.call(this,e)).state={items:[],sort:"",defaultSort:e.defaultSort,filter:e.filter,pageSize:20,selectedIndexes:[],rowsCount:i.staticIsServerMode(e)?void 0:0};try{t.state.isrtl="rtl"==getComputedStyle(document.getElementsByTagName("html")[0]).direction}catch(e){}return t}return zt(i,[{key:"isEditFormModal",value:function(){return"modal"===this.props.editFormShowType}},{key:"isEditFormSidebar",value:function(){return"sidebar"===this.props.editFormShowType}},{key:"isServerMode",value:function(){return i.staticIsServerMode(this.props)}},{key:"refresh",value:function(){var e;this.isServerMode()?this.setState({items:[],selectedIndexes:[],rowsCount:void 0}):(e=Array.isArray(this.props.value)?i.staticGetSortedAndFilteredItems(this.props.value,this.state.filter,this.state.sort,this.props.defaultSort):[],this.setState({items:e,rowsCount:e.length,selectedIndexes:[],originalItems:this.props.value}))}},{key:"resetSelection",value:function(){this.setState({selectedIndexes:[]})}},{key:"render",value:function(){return K("grid-view",{gridColumns:this.getColumns(),gridProps:this.getGridPropsByPagerType(this.props.pagerType),me:this,onRowsSelected:this.onRowsSelected.bind(this),onRowsDeselected:this.onRowsDeselected.bind(this),selectBy:{indexes:this.state.selectedIndexes},gridRowGetter:this.gridRowGetter.bind(this),gridOnRowClick:this.gridOnRowClick.bind(this),handleGridSort:this.handleGridSort.bind(this),state:this.state,props:this.props})}},{key:"getColumns",value:function(){var n=this,e=void 0===this.props.columns?[]:Array.isArray(this.props.columns)?this.props.columns:JSON.parse(this.props.columns);return e.forEach(function(r){null!==r.width&&""!==r.width&&void 0!==r.width&&(r.width=Number(r.width)),!1!==r.sortable&&(r.sortable=!n.props.disableSort),r.filterable=Boolean(n.props.filterRow),r.resizable=Boolean(r.resizable),"number"===r.type?r.formatter=Jt:"checkbox"===r.type?r.formatter=Gt:"date"===r.type?r.formatter=$t:"time"===r.type?r.formatter=Qt:"datetime"===r.type?r.formatter=Yt:"custom"===r.type&&(r.getRowMetaData=function(e){return e},r.formatter=function(e){if(de(r.customFormatter)||"function"!=typeof r.customFormatter){if(n.props.placeholders&&Array.isArray(n.props.placeholders[r.key])&&0<n.props.placeholders[r.key].length){var t=n.props.placeholders[r.key][0];return void 0!==t.propertyName&&""!==t.propertyName||(t.propertyName=r.key),z.a.createElement(P,{key:r.key+"_"+e.dependentValues.__id,model:t,parent:n,row:e.dependentValues,errorOnRow:{},name:n.props.name,buildermode:n.props.buildermode,handleChange:function(){},handleEvent:n.props.handleEvent,getAdditionalDataForControl:n.props.getAdditionalDataForControl,readOnly:n.props.readOnly,uploadUrl:n.props.uploadUrl,downloadUrl:n.props.downloadUrl,data:n.props.data,adaptiveViewType:n.props.adaptiveViewType,controlBarParams:n.props.controlBarParams,createControl:n.props.createControl})}return n.props.buildermode?n.props.createBuilderDropzone(n.props.name,n.props.name,void 0,r.key,r.key):""}return r.customFormatter({row:e.dependentValues,value:e.value,column:r})})}),this.state.isrtl?e.reverse():e}},{key:"getGridPropsByPagerType",value:function(){var e,t={};return"server"===this.props.pagerType&&((e=parseInt(this.props.pageSize))&&(this.state.pageSize=e),t.rowRenderer=z.a.createElement(Xt,{error:this.props.error}),de(this.state.rowsCount)&&(this.state.rowsCount=1)),t}},{key:"getSeletedRowKeys",value:function(){var r=this,n=[];return this.state.selectedIndexes.forEach(function(e){var t;void 0!==(e=r.gridRowGetter(e))&&null!=(t=null==(t=null!==r.props.rowKey&&void 0!==r.props.rowKey&&e.hasOwnProperty(r.props.rowKey)?e[r.props.rowKey]:t)||de(t)?e.__id:t)&&n.push(t)}),n}},{key:"gridRowGetter",value:function(e){if(!(e<0)){var t,r=this.props.pagerType;return"server"===r&&void 0===this.state.items[e]&&(t=this.state.pageSize,this.loadPage(e,t)),"server"===r?this.state.items[e]:function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Vt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},this.state.items[e])}}},{key:"getSort",value:function(){var e=this.state.sort;return""===e&&void 0!==this.props.defaultSort?this.props.defaultSort:e}},{key:"getFilters",value:function(){return void 0!==this.state.filter?this.state.filter.GetFilterAsObjects():[]}},{key:"loadPage",value:function(e,t){for(var r,i=this,n=0;n<t;n++)this.state.items[n+e]={__loading:!0};void 0===this.props.getAdditionalDataForControl?void 0!==console&&console.log("GridView: For paging on server need to set getAdditionalDataForControl func!"):(r=this.getSort(),this.props.getAdditionalDataForControl(this,{startIndex:e,pageSize:t,filters:this.getFilters(),sort:r},function(e){var t=e.sIndex,r=e.pSize,n=e.rowsCount,o=e.items;if(void 0===n||void 0===o)i.state.rowsCount=0,i.setState({rowsCount:0,items:[]});else{i.state.rowsCount=n;for(var a=0;a<r;a++)a<o.length?i.state.items[t+a]=o[a]:i.state.items[t+a]=void 0;i.forceUpdate()}}))}},{key:"gridOnRowClick",value:function(e,t){var r;void 0!==t&&(r=Date.now(),void 0!==this.rowClickTime&&this.rowClickTime.rowIdx===e&&r-this.rowClickTime.time<=1e3?(this.rowClickTime=void 0,this.onRowDblClick(e,t)):(this.rowClickTime={rowIdx:e,time:r},void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onRowClick",parameters:{rowIdx:e,row:t}})))}},{key:"onRowDblClick",value:function(e,t){void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onRowDblClick",parameters:{rowIdx:e,row:t}})}},{key:"onRowsSelected",value:function(e){this.state.selectedIndexes=this.state.selectedIndexes.concat(e.map(function(e){return e.rowIdx})),void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,eventName:"onSelectionChanged",propertyName:this.props.propertyName,parameters:{selectedIndexes:this.state.selectedIndexes}}),this.forceUpdate()}},{key:"onRowsDeselected",value:function(e){var t=e.map(function(e){return e.rowIdx});this.state.selectedIndexes=this.state.selectedIndexes.filter(function(e){return-1===t.indexOf(e)}),void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,eventName:"onSelectionChanged",propertyName:this.props.propertyName,parameters:{selectedIndexes:this.state.selectedIndexes}}),this.forceUpdate()}},{key:"handleGridSort",value:function(e,t){var r={};r.sort="NONE"===t?"":e+" "+t,t=this.props.pagerType,r.items="server"===t?[]:i.staticGetSortedAndFilteredItems(this.props.value,this.state.filter,r.sort,this.props.defaultSort),r.selectedIndexes=[],this.setState(r)}},{key:"handleFilterChange",value:function(e){var t={},r=e.column.key,n="columnfilter_"+r;t.filter=void 0!==this.state.filter?this.state.filter:new It([],this.props.columns.map(function(e){return e.key})),t.filter.RemoveFilter({name:r,id:n}),""!==e.filterTerm&&t.filter.AddFilter({names:[r],expected:e.filterTerm,term:At.Like,id:n}),i.staticIsServerMode(this.props)?(t.items=[],t.selectedIndexes=[],t.rowsCount=void 0):(t.items=i.staticGetSortedAndFilteredItems(this.props.value,t.filter,this.state.sort,this.props.defaultSort),t.selectedIndexes=[],t.rowsCount=t.items.length),this.setState(t)}},{key:"onClearFilters",value:function(){this.setState({filter:this.props.filter})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.recalcSizeParams()}},{key:"recalcSizeParams",value:function(){var e;this._isMounted&&this.props.autoHeight&&(e=window.innerHeight,this.setState({gridHeight:e-this.props.deltaHeight}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r,n=null,o=t.filter,a=e.filter;return JSON.stringify(o)!==JSON.stringify(a)?(n={filter:e.filter},i.staticIsServerMode(e)?(n.items=[],n.selectedIndexes=t.selectedIndexes,n.rowsCount=void 0):(r=Array.isArray(e.value)?i.staticGetSortedAndFilteredItems(e.value,e.filter,t.sort,e.defaultSort):[],n.items=r,n.selectedIndexes=t.selectedIndexes,n.rowsCount=r.length)):i.staticIsServerMode(e)||t.originalItems===e.value||(n={},r=Array.isArray(e.value)?i.staticGetSortedAndFilteredItems(e.value,t.filter,t.sort,e.defaultSort):[],n.items=r,n.rowsCount=r.length,n.selectedIndexes=t.selectedIndexes,n.originalItems=e.value),n}},{key:"staticIsServerMode",value:function(e){return"server"===e.pagerType}},{key:"staticGetSortedAndFilteredItems",value:function(e,t,r,n){var o=[];if(void 0===e)return o;if(o=void 0!==t?e.filter(function(e){return t.IsRowMatched(e)}):e,"NONE"===(e=r)||""===r){if(void 0===n)return o;e=n}var n=e.indexOf(" "),a=e.substring(0,n),i=e.substring(n+1,e.length);return o.slice(0).sort(function(e,t){return(e=void 0!==e[a]&&null!==e[a]&&void 0!==e[a].toLowerCase?e[a].toLowerCase():e[a])===(t=void 0!==t[a]&&null!==t[a]&&void 0!==t[a].toLowerCase?t[a].toLowerCase():t[a])?0:null==e?1:null==t?-1:"ASC"===i?t<e?1:-1:"DESC"===i?e<t?1:-1:void 0})}}]),i}(),Xt=function(){Kt(t,c.Component);var e=Ht(t);function t(){return Mt(this,t),e.apply(this,arguments)}return zt(t,[{key:"setScrollLeft",value:function(e){this.row.setScrollLeft(e)}},{key:"getClassName",value:function(){var t=this;return this.props.row.__loading?"dwkit-gridview-rowloading":void 0!==this.props.row.__id&&null!==this.props.row.__id&&void 0!==this.props.error&&null!==this.props.error&&Array.isArray(this.props.error)&&void 0!==this.props.error.find(function(e){return e.__id===t.props.row.__id})?"dwkit-gridview-rowerror":""}},{key:"render",value:function(){return K("row-loading-renderer",{className:this.getClassName(),me:this,props:this.props,row:this.row})}}]),t}();function er(e){return(er="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ar=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}(i,c.Component);var e,t,r,n,a=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=or(r),t=n?(t=or(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==er(t)&&"function"!=typeof t?nr(e):t});function i(e){var r,t,n,o;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),o=function(e,t){t=t.name,he(r.props.handleEvent)&&0!=r.props.handleEvent({e:e,key:r.props.name,eventName:"onItemClick",parameters:{target:t}})&&r.setState({activeitem:t})},(n="handleItemClick")in(t=nr(r=a.call(this,e)))?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,r.state={},he(e.value)?r.state.activeitem=e.value:null!=e.activeitem&&(r.state.activeitem=e.activeitem),r}return t=[{key:"getDerivedStateFromProps",value:function(e,t){return t.activeitem!==e.value?{activeitem:e.value}:null}}],tr((e=i).prototype,[{key:"handleItemClick2",value:function(e,t){this.handleItemClick(t,e),t.preventDefault()}},{key:"render",value:function(){var e=this.props["data-items"];return de(e)||""==e?e=[]:Array.isArray(e)||(e=be.a.parse(e)),K("menu-group",{handleItemClick:this.handleItemClick,handleItemClick2:this.handleItemClick2,items:e,me:this,props:this.props,state:this.state})}}]),tr(e,t),i}();function ir(e){return(ir="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ur=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,c.Component);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=cr(r),t=n?(t=cr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ir(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return lr(t.prototype,[{key:"render",value:function(){var e,t={};for(e in this.props)"additionalParams"!==e&&"items"!==e&&"propertyName"!==e&&(t[e]=this.props[e]);var r=this.props.additionalParams.model,n=this.props.additionalParams.parentItem,o=this.props.additionalParams.handleEvent;return t.defaultValue=r.defaultvalue,t.size=r.size,me(r.label)&&(t.label=r.label),t.labelPosition=r.labelPosition,t.type=r.type,t.disabled=r.disabled,t.transparent=r.transparent,t.fluid=r.fluid,t.readOnly=r.readOnly||this.props.readOnly,t.placeholder=r.placeholder,null==t.value&&(t.value=""),t.error=Boolean(this.props.error),t.format=r.format||void 0,t.mask=r.mask||void 0,t.onValueChange=function(e){o({key:t.name,propertyName:t.propertyName,eventName:"onChange",name:t.name,value:Number(e.value)})},K("number-format",{isForm:this.isForm(n),props:this.props,propsControl:t})}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}}]),t}();function pr(e){return(pr="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yr=r(7),br=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(s,c.Component);var r,n,l=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=mr(r),t=n?(t=mr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==pr(t)&&"function"!=typeof t?hr(e):t});function s(){var n;!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);for(var e,t,r,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=function(e,t){var r=t.name,t=t.value;n.props.onChange?n.props.onChange(e,{name:n.props.name,propertyName:n.props.propertyName,value:t}):n.props.handleEvent?n.props.handleEvent({syntheticEvent:e,key:n.props.name,eventName:"onChange",name:r,value:t,propertyName:n.props.propertyName}):console.error("Set onChange property for RadioGroup!")},(t="onChange")in(e=hr(n=l.call.apply(l,[this].concat(a))))?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,n}return fr(s.prototype,[{key:"shouldComponentUpdate",value:function(e){return!yr(this.props,e)}},{key:"render",value:function(){return K("radio-group",{props:this.props,onChange:this.onChange.bind(this)})}}]),s}();function vr(e){return(vr="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function gr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Or(e,t){return(Or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Er=r(7),Pr=r(10),jr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Or(e,t)}(s,c.Component);var e,t,r,n,o=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Sr(r),t=n?(t=Sr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==vr(t)&&"function"!=typeof t?Cr(e):t});function s(e){var l;return function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),kr(Cr(l=o.call(this,e)),"handleChange",function(e,t,r){var n=r.name,o=r.propertyName,a=r.value,i=r.checked,r=r.parameters;(l.props.controlProps.handleEvent||l.props.controlProps.buildermode)&&(void 0===o&&(o=n),r&&void 0!==r.index&&((n=l.state.items)[r.index]=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gr(Object(r),!0).forEach(function(e){kr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},e),e=n[r.index]),de(a)&&he(i)?e[o]=i:e[o]=a,l.isServerMode()?l.forceUpdate():(l.sendChangesToParent(),t&&t.preventDefault?t.preventDefault():l.forceUpdate()))}),kr(Cr(l),"loadNextPage",function(){var e=l.state.pageSize,t=0;he(l.state.items)&&(t=l.state.items.length),l.loadPage(t,e)}),l.psTemplate="template",l.state={items:[],sort:"",filter:e.filter,firstLoad:!e.controlProps.buildermode&&s.staticIsServerMode(e),pageSize:e.pageSize||20},l}return t=[{key:"getDerivedStateFromProps",value:function(e,t){var r,n={needUpdate:!1};return Er(t.filter,e.filter)?s.staticIsServerMode(e)||Er(t.originalItems,e.value)||(r=s.staticGetSortedAndFilteredItems(e.value,t.filter,t.sort,e.defaultSort),n.items=r,n.rowsCount=r.length,n.selectedIndexes=[],n.originalItems=s.copyObj(e.value),n.needUpdate=!0):(n.filter=e.filter,n.needUpdate=!0,s.staticIsServerMode(e)?(n.items=[],n.firstLoad=!0,n.rowsCount=void 0):(e=s.staticGetSortedAndFilteredItems(e.value,e.filter,t.sort,e.defaultSort),n.items=e,n.selectedIndexes=[],n.rowsCount=e.length)),n}},{key:"staticIsServerMode",value:function(e){return e.pagerType&&"server"===e.pagerType.toLowerCase()}},{key:"staticCheckData",value:function(e){if(e=e||[],Array.isArray(e))e=Pr(e);else try{e=be.a.parse(e)}catch(e){}return e}},{key:"staticGetSortedAndFilteredItems",value:function(e,t,r,n){var o=s.staticCheckData(e);if(void 0===o)return o;if(Array.isArray(o)&&0<o.length)for(var a in o)o[a].__originalIndex=a,a++;if(void 0!==t&&(o=o.filter(function(e){return t.IsRowMatched(e)})),"NONE"===(e=r)||""===r){if(void 0===n)return o;e=n}var n=e.indexOf(" "),i=e.substring(0,n),l=e.substring(n+1,e.length);return o.sort(function(e,t){return(e=void 0!==e[i]&&null!==e[i]&&void 0!==e[i].toLowerCase?e[i].toLowerCase():e[i])===(t=void 0!==t[i]&&null!==t[i]&&void 0!==t[i].toLowerCase?t[i].toLowerCase():t[i])?0:null==e?1:null==t?-1:"ASC"===l?t<e?1:-1:"DESC"===l?e<t?1:-1:void 0})}},{key:"copyObj",value:function(e){if(null==e||"object"!=vr(e))return e;var t,r=e.constructor();for(t in e)e.hasOwnProperty(t)&&(r[t]=this.copyObj(e[t]));return r}}],wr((e=s).prototype,[{key:"shouldComponentUpdate",value:function(e,t){return!!t.needUpdate||!Er(this.props,e)}},{key:"render",value:function(){return K("repeater",{isServerMode:this.isServerMode(),loadNextPage:this.loadNextPage,me:this,props:this.props,psTemplate:this.psTemplate,state:this.state,handleChange:this.handleChange})}},{key:"sendChangesToParent",value:function(){var e=s.copyObj(this.state.items);if(Array.isArray(e)&&0<e.length)for(var t in e)delete e[t].__originalIndex;var r="string"==typeof this.props.value?be.a.stringify(e):e;this.props.controlProps.buildermode?this.props.value=r:this.props.controlProps.handleEvent({syntheticEvent:null,key:this.props.name,propertyName:this.props.propertyName,eventName:"onChange",name:this.name,value:r})}},{key:"loadPage",value:function(o,e){var t,a=this;this.props.controlProps&&void 0!==this.props.controlProps.getAdditionalDataForControl?(""===(t=this.state.sort)&&void 0!==this.props.defaultSort&&(t=this.props.defaultSort),this.state.loading=!0,this.forceUpdate(),this.props.controlProps.getAdditionalDataForControl(this,{startIndex:o,pageSize:e,filters:void 0!==this.state.filter?this.state.filter.GetFilterAsObjects():[],sort:t},function(e){e.sIndex,e.pageSize;var t=e.rowsCount,r=e.items;if(void 0!==t&&void 0!==r&&(a.state.rowsCount=t,a.state.items.length==o))for(var n=0;n<r.length;n++)a.state.items.push(r[n]);a.state.loading=!1,a.forceUpdate()})):void 0!==console&&console.log("Repeater: For paging on server need to set getAdditionalDataForControl func!")}},{key:"isServerMode",value:function(){return s.staticIsServerMode(this.props)}}]),wr(e,t),s}();function xr(e){return(xr="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function _r(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Rr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_r(Object(r),!0).forEach(function(e){Ir(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tr(e,t){return(Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ar(e){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lr=r(7),Nr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tr(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Ar(r),t=n?(t=Ar(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==xr(t)&&"function"!=typeof t?Fr(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ir(Fr(n=o.call.apply(o,[this].concat(t))),"handleEvent",function(e){e.parameters||(e.parameters={}),e.parameters.row||(e.parameters.row=n.props.item),"onChange"===e.eventName?(e.parameters.index||(e.parameters.index=n.props.index),n.props.handleChange(n.props.item,e.syntheticEvent,e)):(e.parameters.index||(n.props.item&&n.props.item.__originalIndex?e.parameters.index=n.props.item.__originalIndex:e.parameters.index=n.props.index),n.props.controlProps.handleEvent(e))}),Ir(Fr(n),"getAdditionalDataForControl",function(e,t,r){return(t=t||{}).row||(t.row=n.props.item),n.props.controlProps.getAdditionalDataForControl(e,t,r)}),n}return Dr(a.prototype,[{key:"shouldComponentUpdate",value:function(e){return!Lr(this.props,e)}},{key:"render",value:function(){var e=this.props.controlProps.createBuilderDropzone,t=this.props.model,r=this.props.index+"_",n=this.props.psTemplate,o=this.props.controlProps.createControls(this.props.parent,Rr(Rr({},this.props.controlProps),{},{model:t,parentPlaceholder:n,data:this.props.item,errors:this.props.errors,needCheckReplace:!this.props.controlProps.buildermode,formData:this.props.data,parentItem:this.props.parentItem,handleEvent:this.handleEvent,getAdditionalDataForControl:this.getAdditionalDataForControl}));return this.props.includeDropzone&&e&&(0<o.length&&0<t.length&&o.unshift(e(r+"repeter_dropzone_header",this.props.parentItem.key,void 0,void 0,n)),o.push(e(r+"repeter_dropzone_footer",this.props.parentItem.key,t[t.length-1].key,void 0,n))),o}}]),a}(),Br=r(12),Vr=r.n(Br);function Mr(e){return(Mr="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Kr(r),t=n?(t=Kr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Mr(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={value:""},e}return Ur(o.prototype,[{key:"render",value:function(){var e,t={};for(e in this.props)"value"!==e&&"handleEvent"!==e&&(t[e]=this.props[e]);return K("search",{controlProps:t,handleResultSelect:this.handleResultSelect.bind(this),handleSearchChange:this.handleSearchChange.bind(this),state:this.state})}},{key:"resetSearch",value:function(){this.setState({isLoading:!1,results:[]})}},{key:"handleResultSelect",value:function(e,t){t=t.result,he(this.props.handleEvent)&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onSelect",parameters:t})}},{key:"handleSearchChange",value:function(e,t){var t=t.value,r=this;r.setState({isLoading:!0,value:t}),setTimeout(function(){return null===r.state.value||void 0===r.state.value||r.state.value.length<2?r.resetSearch():void r.search(r.state.value)},200)}},{key:"search",value:function(e){var t=this,r=this.props.url;r+=this.props.url.includes("?")?"&":"?",r+="term="+e,Vr()(r,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){t.setState({isLoading:!1,results:e})}).catch(function(e){de(console)?alert(e):console.error(e)})}}]),o}();function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function qr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Gr(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?qr(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):qr(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $r(e,t){return($r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yr(e){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qr=r(10),Zr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$r(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Yr(r),t=n?(t=Yr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Hr(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return Jr(o.prototype,[{key:"render",value:function(){var e,n=this,a=this,i={};for(e in this.props)"additionalParams"!==e&&"items"!==e&&"propertyName"!==e&&(i[e]=this.props[e]);var t,r,o=this.props.additionalParams.model,l=this.props.additionalParams.data,s=this.props.additionalParams.errors,c=this.props.additionalParams.children,u=this.props.additionalParams.parentItem,p=this.props.additionalParams.handleEvent,f=o["data-buildertype"];if("header"===f)t=K(f,{props:this.props,propsControl:i,model:o});else if("button"===f)i.floated=o.floated,i.size=""!==o.size?o.size:null,i.content=this.props.content,i.basic=o.basic,i.circular=o.circular,i.compact=o.compact,i.disabled=o.disabled,i.fluid=o.fluid,i.primary=o.primary,i.secondary=o.secondary,i.link=o.link,o.icon&&(i.icon=o.icon),void 0!==p&&(r=i.onClick,i.onClick=function(e){r&&r(e),e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.add("loading");var t=p({syntheticEvent:e,key:i.name,eventName:"onClick"});return e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.remove("loading"),t}),t=K(f,{propsControl:i,isForm:this.isForm(u)});else if("label"===f)t=K(f,{props:this.props,propsControl:i,model:o});else if("message"===f)t=K(f,{props:this.props,propsControl:i,model:o});else if("input"===f)i.defaultValue=o.defaultvalue,i.size=o.size,me(o.label)&&(i.label=o.label),i.keyboardType=o.keyboardType,i.labelPosition=o.labelPosition,i.placeholder=o.placeholder,i.type=o.type,i.disabled=o.disabled,i.transparent=o.transparent,i.fluid=o.fluid,i.readOnly=o.readOnly||this.props.readOnly,null!=p&&(i.onChange=function(e,t){var r=t.name,n=t.value,o=n;"number"===i.type&&(""==o?o=void 0:"string"!=typeof o||"."!=(t=o[o.length-1])&&","!=t&&(o=Number(o),Number.isNaN(o)&&(o=n))),p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:o})}),null==i.value&&(i.value=""),i.error=Boolean(this.props.error),t=K(f,{isForm:this.isForm(u),props:this.props,propsControl:i});else if("textarea"===f)delete i.autoHeight,i.placeholder=o.placeholder,i.keyboardType=o.keyboardType,i.rows=null!==o.rows&&void 0!==o.rows?Number(o.rows):void 0,void 0!==o.label&&""!==o.label&&(i.label=o.label),i.readOnly=o.readOnly||this.props.readOnly,null!==p&&(i.onChange=function(e,t){var r=t.name,t=t.value;p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:t})}),null==i.value&&(i.value=""),t=K(f,{isForm:this.isForm(u),props:this.props,propsControl:i});else if("checkbox"===f)void 0!==o.label&&""!==o.label&&(i.label=o.label),i.placeholder=o.placeholder,i.type=o.type,i.disabled=o.disabled,i.fitted=o.fitted,i.indeterminate=o.indeterminate,i.readOnly=o.readOnly||this.props.readOnly,i.slider=o.slider,i.toggle=o.toggle,null!==p&&(i.onChange=function(e,t){var r=t.name,t=t.checked;p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:t})}),void 0!==l&&("boolean"==typeof variable?i.checked=l[i.name]:"true"===l[i.name]||"1"===l[i.name]?i.checked=!0:"false"===l[i.name]||"0"===l[i.name]?i.checked=!1:i.checked=Boolean(l[i.name])),s&&he(s[o.key])&&1==Boolean(s[o.key])&&(me(i.className)?i.className+=" error":i.className="error"),t=K(f,{isForm:this.isForm(u),propsControl:i});else if("dropdown"===f){var d,l=[];if(void 0!==o["data-elements"]&&(l=Array.isArray(o["data-elements"])?o["data-elements"]:be.a.parse(o["data-elements"])),void 0!==o.label&&""!==o.label&&(i.label=o.label),o.clearable&&!o.multiple&&(l=Qr(l)).unshift({key:"__reset",value:"",text:"   "}),i.defaultValue=o.defaultvalue,i.placeholder=o.placeholder,i.options=l,i.fluid=o.fluid,i.selection=o.selection,i.multiple=o.multiple,i.search=o.search,i.disabled=o.disabled||o.readOnly||this.props.readOnly,s&&void 0!==s[o.key]&&(i.error=Boolean(i.error)),null!==p&&(i.onChange=function(e,t){var r=t.name,t=t.value;p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:t})}),i.allowAdditions=o.allowAddItems,i.allowAdditions&&(i.onAddItem=function(e,t){var r=t.value,t=Qr(i.value);Array.isArray(t)?t.includes(r)||t.push(r):t=[r],i.onChange(e,{name:i.name,value:t})}),i.multiple){if(void 0!==i.value&&null!==i.value||(i.value=[]),!Array.isArray(i.value)){try{d=be.a.parse(i.value)}catch(e){}Array.isArray(d)||(d=[i.value]),i.value=d}i.allowAdditions&&this.dropdownCheckAdditional(i.value,i.options)}t=K(f,{isForm:this.isForm(u),props:this.props,propsControl:i})}else if("statistic"===f)u=[],void 0!==o["data-elements"]&&(u=Array.isArray(o["data-elements"])?o["data-elements"]:be.a.parse(o["data-elements"])),t=K(f,{items:u,model:o,propsControl:i});else if("image"===f)t=K(f,{me:a,model:o,props:this.props,propsControl:i});else if("form"===f)t=K(f,{propsControl:i,children:c,model:o});else if("formgroup"===f)t=K(f,{propsControl:i,widths:o.widths,widthsCustom:o.widthsCustom,children:c,orientation:o.orientation});else if("breadcrumb"===f){var h=[];if(Array.isArray(this.props.items))for(var m=0;m<this.props.items.length;m++)!function(e){var t=n.props.items[e],r={key:e};r.active=t.active,r.href=t.url,null!==p&&(r.onClick=function(e){p({syntheticEvent:e,key:i.name,eventName:"onItemClick",parameters:{target:t.url}}),e.preventDefault()}),h.push({childProps:Gr({},r),text:he(t.text)?t.text:"<not set>"}),e<n.props.items.length-1&&(e={key:e+"_d"},""!==t.divider&&(e.icon=t.divider),h.push({dividerProps:Gr({},e),isDivider:!0}))}(m);t=K(f,{children:h,propsControl:i})}else t=K("unknown",{props:this.props,type:f});return t}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"dropdownCheckAdditional",value:function(e,n){Array.isArray(e)&&e.forEach(function(e){for(var t=!1,r=0;r<n.length;r++)if(e===n[r].value){t=!0;break}0==t&&n.push({value:e,text:e})})}}]),o}();function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var an=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=nn(r),t=n?(t=nn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Xr(t)&&"function"!=typeof t?rn(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return on(rn(n=o.call.apply(o,[this].concat(t))),"onUpload",function(e,t){var r=rn(n),e={name:e.name,token:t.result.properties.Token,success:t.success,properties:t.result.properties};t.success?r.props.onChange&&r.props.onChange(null,{name:r.props.name,propertyName:r.props.propertyName,value:t.result.properties.Token,parameters:e}):r.props.onUploadFail&&r.props.onUploadFail(null,{name:r.props.name,propertyName:r.props.propertyName,message:t.result.message,details:t.result.details,success:!1})}),on(rn(n),"onClear",function(e){var t=rn(n);t.props.onChange&&t.props.onChange(null,{name:t.props.name,propertyName:t.props.propertyName,value:null})}),n}return en(a.prototype,[{key:"render",value:function(){var e=this.onClear,t=this.onUpload;return K("signature",{handleChange:this.handleChange,me:this,onClear:e,onUpload:t,props:this.props,state:this.state})}}]),a}();function ln(e){return(ln="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function sn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=un(r),t=n?(t=un(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ln(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return sn(o.prototype,[{key:"render",value:function(){var e={name:this.props.name,className:this.props["style-customcss"],style:this.props.style,"data-buildertype":this.props["data-buildertype"]};return K("static-content",{props:this.props,spanProps:e})}}]),o}();function fn(e){return(fn="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(i,c.Component);var e,t,r,n,a=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=yn(r),t=n?(t=yn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==fn(t)&&"function"!=typeof t?mn(e):t});function i(e){var r,t,n,o;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),o=function(e,t){t=t.activeIndex,r.props.buildermode&&r.forceUpdate(),window&&window.document&&setTimeout(function(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)},50),he(r.props.handleEvent)&&r.props.handleEvent({e:e,key:r.props.name,eventName:"onTabChange",parameters:{targetIndex:t,pane:r.props["data-panes"][t]}})},(n="onTabChange")in(t=mn(r=a.call(this,e)))?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,r.state={},he(e.value)?r.state.activeitem=e.value:null!=e.activeitem&&(r.state.activeitem=e.activeitem),r}return t=[{key:"getDerivedStateFromProps",value:function(e,t){return t.activeitem!==e.value?{activeitem:e.value}:null}}],dn((e=i).prototype,[{key:"render",value:function(){var e=this.getPanes(this.props["data-panes"]);return K("tab-group",{onTabChange:this.onTabChange,panes:e,props:this.props})}},{key:"getPanes",value:function(e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var n=e[r];if(void 0!==n.visibleCondition&&null!==n.visibleCondition&&""!==n.visibleCondition){var o="return "+n.visibleCondition;try{if(!new Function("data",o)(this.props.data))continue}catch(e){}}t.push({menuItem:n.title,pane:{key:n.psid,className:"top",content:this.renderPanel(n)}})}return t}},{key:"renderPanel",value:function(e){var t,r,n=void 0;return he(this.props.placeholders)&&Array.isArray(this.props.placeholders[e.psid])&&0<this.props.placeholders[e.psid].length?(t=this.props.placeholders[e.psid])&&(n=this.props.createControls(this,{model:t,parentPlaceholder:e.psid,data:this.props.data,formData:this.props.data,errors:this.props.errors,buildermode:this.props.buildermode,parentItem:this.props.model,children:this.props.children,handleEvent:this.props.handleEvent,readOnlyControls:this.props.readOnlyControls,hideControls:this.props.hideControls,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,readOnly:this.props.readOnly,disableRefs:this.props.disableRefs,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:this.props.controlsToReplace,needCheckReplace:this.props.needCheckReplace,eventOnEdit:this.props.eventOnEdit,eventOnDelete:this.props.eventOnDelete,eventOnCopy:this.props.eventOnCopy,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType}),r=e.psid,this.props.buildermode&&this.props.createBuilderDropzone&&(0<n.length&&0<t.length&&n.unshift(this.props.createBuilderDropzone(r+"tab_dropzone_header",this.props.name,void 0,e.title,e.psid)),n.push(this.props.createBuilderDropzone(r+"tab_dropzone_footer",this.props.name,t[t.length-1].key,e.title,e.psid)))):this.props.buildermode&&this.props.createBuilderDropzone&&(n=this.props.createBuilderDropzone("tab_dropzone_footer",this.props.name,void 0,e.title,e.psid)),n}}]),dn(e,t),i}();function vn(e){return(vn="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Cn(r),t=n?(t=Cn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==vn(t)&&"function"!=typeof t?On(e):t});function a(e){var t,r,n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),t=o.call(this,e),n=function(e){null!=t.props.handleEvent&&t.props.handleEvent({syntheticEvent:e,key:t.props.name,propertyName:t.props.propertyName,eventName:"onClick"})},(e="onClick")in(r=On(t))?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,t.state={},t}return t=[{key:"copyObj",value:function(e){if(null==e||"object"!=vn(e))return e;var t,r=e.constructor();for(t in e)e.hasOwnProperty(t)&&(r[t]=this.copyObj(e[t]));return r}}],gn((e=a).prototype,[{key:"render",value:function(){var e={className:this.props.className,style:this.props.style};return this.props.activeEvent&&(e.onClick=this.onClick.bind(this)),K("card",{props:this.props,propsControls:e,me:this})}},{key:"renderPanel",value:function(e){var t,r,n=void 0;return null!=this.props.placeholders&&Array.isArray(this.props.placeholders[e])&&0<this.props.placeholders[e].length?(t=this.props.placeholders[e])&&(n=this.props.createControls(this,{model:t,parentPlaceholder:e,data:this.props.data,formData:this.props.data,errors:this.props.errors,buildermode:this.props.buildermode,parentItem:this.props.model,children:this.props.children,handleEvent:this.props.handleEvent,hideControls:this.props.hideControls,readOnlyControls:this.props.readOnlyControls,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,readOnly:this.props.readOnly,disableRefs:this.props.disableRefs,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:this.props.controlsToReplace,needCheckReplace:this.props.needCheckReplace,eventOnEdit:this.props.eventOnEdit,eventOnDelete:this.props.eventOnDelete,eventOnCopy:this.props.eventOnCopy,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType}),r=e,this.props.buildermode&&this.props.createBuilderDropzone&&(0<n.length&&0<t.length&&n.unshift(this.props.createBuilderDropzone(r+"tab_dropzone_header",this.props.name,void 0,e,e)),n.push(this.props.createBuilderDropzone(r+"tab_dropzone_footer",this.props.name,t[t.length-1].key,e,e)))):this.props.buildermode&&this.props.createBuilderDropzone&&(n=this.props.createBuilderDropzone("tab_dropzone_footer",this.props.name,void 0,e,e)),n}}]),gn(e,t),a}();function kn(e){return(kn="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=_n(r),t=n?(t=_n(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==kn(t)&&"function"!=typeof t?xn(e):t});function a(){var i;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Rn(xn(i=o.call.apply(o,[this].concat(t))),"onChange",function(t){var e,r=xn(i),n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return En(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?En(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(t.target.files);try{for(n.s();!(e=n.n()).done;){var o=e.value,a=new FormData;a.append(r.props.name,o),window.$.ajax({url:r.props.uploadUrl,type:"POST",processData:!1,contentType:!1,dataType:"json",data:a,success:function(e){e.success?r.props.onChange&&r.props.onChange(t,{name:r.props.name,propertyName:r.props.propertyName,value:e.result.properties.Token,parameters:{success:!0,properties:e.result.properties}}):r.props.onUploadFail&&r.props.onUploadFail(t,{name:r.props.name,propertyName:r.props.propertyName,message:e.message,details:e.details,success:!1})}})}}catch(e){n.e(e)}finally{n.f()}}),Rn(xn(i),"onClear",function(){i.props.onChange&&i.props.onChange(void 0,{name:i.props.name,propertyName:i.props.propertyName,value:null})}),i}return Pn(a.prototype,[{key:"getCustomFileName",value:function(){return this.props.additionalData&&this.props.additionalDataContext&&this.props.additionalData.customNameGetter?this.props.additionalData.customNameGetter(this.props.additionalDataContext):null}},{key:"getCustomContentType",value:function(){return this.props.additionalData&&this.props.additionalDataContext&&this.props.additionalData.customContentTypeGetter?this.props.additionalData.customContentTypeGetter(this.props.additionalDataContext):null}},{key:"render",value:function(){return K("upload",{getCustomContentType:this.getCustomContentType,getCustomFileName:this.getCustomFileName,me:this,onChange:this.onChange,onClear:this.onClear,props:this.props})}}]),a}();function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Ln(r),t=n?(t=Ln(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Tn(t)&&"function"!=typeof t?In(e):t});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),Nn(In(n=t.call(this,e)),"selectWorkflowScheme",function(e,t){t=t.value,n.props.handleEvent({key:n.props.name,eventName:"onSchemeSelected",parameters:{scheme:t}})}),Nn(In(n),"handleChanged",function(e,t){var r=t.name,t=t.value;n.setState(Nn({},r,t))}),n.state={commands:e.commands,states:e.states,processExists:e.processExists},n.checkGetAdditionalDataForControl(),n}return Fn(o.prototype,[{key:"componentDidMount",value:function(){this.isMount=!0}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"checkGetAdditionalDataForControl",value:function(){var o=this;this.props.getAdditionalDataForControl||this.props.commands||this.props.states?this.props.getAdditionalDataForControl(this,{loadParameters:!this.props.blockLoadParameters},function(e){var t=e.commands,r=e.states,n=e.processExists,e=e.processParameters;o.setState({commands:t,states:r,processExists:n}),o.props.handleEvent&&o.props.handleEvent({key:o.props.name,eventName:"onReceivedCommands",parameters:{commands:t,states:r,processParameters:e}}),o.isMount&&o.forceUpdate()}):console&&console.log("WorkflowBar: This control requires getAdditionalDataForControl or commands and states not undefined parameters!")}},{key:"onCommand",value:function(e,t){he(this.props.handleEvent)&&(t.currentTarget&&t.currentTarget.classList&&t.currentTarget.classList.add("loading"),this.props.handleEvent({key:this.props.name,eventName:"onCommandClick",parameters:{command:e}}),t.currentTarget&&t.currentTarget.classList&&t.currentTarget.classList.remove("loading"))}},{key:"onSetState",value:function(e){if(he(this.props.handleEvent)){e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.add("loading");for(var t=(he(this.state.states)?this.state:this.props).states,r=void 0,n=0;n<t.length;n++)if(t[n].value==this.state.setstate){r=t[n];break}this.props.handleEvent({key:this.props.name,eventName:"onSetStateClick",parameters:{state:r}}),e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.remove("loading")}}},{key:"render",value:function(){return K("workflow-bar",{handleChanged:this.handleChanged.bind(this),me:this,props:this.props,selectWorkflowScheme:this.selectWorkflowScheme.bind(this),state:this.state,onCommand:this.onCommand.bind(this),onSetState:this.onSetState.bind(this)})}}]),o}(),Vn=r(13),Mn=r.n(Vn).a.createActions(["add","showEditForm","remove","saveData","save","move","insert"]),Un=r(14),zn=r.n(Un);function Kn(e){return(Kn="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Wn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=qn(r),t=n?(t=qn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Kn(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e.controlRef=z.a.createRef(),e.barRef=z.a.createRef(),e}return Wn(o.prototype,[{key:"render",value:function(){return K("control-bar",{props:this.props,onCopyControl:this.onCopyControl.bind(this,this.props.model),me:this})}},{key:"onCopyControl",value:function(e,t){var r=be.a.stringify(e);(e=document.createElement("textarea")).value=r,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),r=0<document.getSelection().rangeCount&&document.getSelection().getRangeAt(0),e.select(),document.execCommand("copy"),document.body.removeChild(e),r&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(r))}},{key:"componentDidMount",value:function(){this.updateBarPosition&&(window.addEventListener("resize",this.updateBarPosition),this.updateBarPosition())}},{key:"componentDidUpdate",value:function(){this.updateBarPosition&&this.updateBarPosition()}},{key:"componentWillUnmount",value:function(){this.updateBarPosition&&window.removeEventListener("resize",this.updateBarPosition)}}]),o}();function Jn(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function $n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jn(Object(r),!0).forEach(function(e){Xn(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Yn(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return Qn(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Qn(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eo,to=(ea=[{key:"isAdaptiveRender",value:function(e,t){return!e["style-adaptive"]||null==t||""===t||!e["style-renderwhen"]||t===e["style-renderwhen"]}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"getFormattedDate",value:function(e,t){if(null==t)return"";var r,n=void 0,o=e.indexOf(":");return 0<o?(r=e.substring(0,o),n=e.substring(o+1,e.length)):r=e,null==(e=t[r])&&(e=""),he(n)&&("number"==typeof e?e=zn()(e).format(n):(t=Le()(e)).isValid()&&(e="local"===n?(r=Ne("L"),t.format(r)):t.format(n))),e}},{key:"getStyle",value:function(e,t,r){var n={};return e["style-marginTop"]&&(n.marginTop=e["style-marginTop"]),e["style-marginBottom"]&&(n.marginBottom=e["style-marginBottom"]),e["style-marginLeft"]&&(n.marginLeft=e["style-marginLeft"]),e["style-marginRight"]&&(n.marginRight=e["style-marginRight"]),e["style-width"]&&(n.width=e["style-width"]),e["style-height"]&&(n.height=e["style-height"]),void 0!==e["style-float"]&&(n.float=e["style-float"]),void 0!==e["style-display"]&&(n.display=e["style-display"]),e["style-hidden"]&&(t?n.opacity=.2:n.display="none"),void 0!==e["style-source"]&&ro.getCustomStyle(e["style-source"],n),void 0!==e["style-font-size"]&&(n.fontSize=e["style-font-size"]),e["style-adaptive"]&&void 0!==e["style-mobilesource"]&&"mobile"===r&&ro.getCustomStyle(e["style-mobilesource"],n),n}},{key:"getCustomStyle",value:function(e,r){e.split(";").forEach(function(e){var t=e.split(":");2===t.length&&(e=t[0].replace(/^\s+|\s+$/g,""),r[e]=t[1].replace(/^\s+|\s+$/g,""))})}},{key:"getClassName",value:function(e,t){var r=e["style-customcss"];return t&&he(ro.containers["data-buildertype"])&&(r=(null==r?"":r+" ")+"dwkit-formbuilder-item-container"),1==e["other-required"]&&(t="dwkit-required-field",r=null==r||""==r?t:r+t),1==e["style-hiddeninprint"]?(null==r?"":r+" ")+"dwkit-notprint":r}},{key:"fillDefaultValues",value:function(e,t){for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}},{key:"createBuilderDropzone",value:function(t,r,n,e,o){var a="";return K("builder-dropzone",{key:t,elementToInsert:r,elementAfter:n,onChangeDZ:function(e,t){t.name,t=t.value,a=t},onClosePopup:function(){try{var e=be.a.parse(a);Mn.insert(e,t,r,n,o)}catch(e){}},placeholderKey:o,text:"DROP ZONE"})}}],Zn((Xo=ro).prototype,[{key:"isContainer",value:function(e){return he(ro.containers[e])}},{key:"getItems",value:function(){return this.items}},{key:"setItems",value:function(e){this.items=e||[]}},{key:"getControlInfoByType",value:function(e,t){var r,n=Yn(this.items);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.key===e)return o}}catch(e){n.e(e)}finally{n.f()}if(t=t||function(){if(window.DWKitFormSettings)return window.DWKitFormSettings.externalControlList}()){var a,i=Yn(t);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(l.key===e)return l}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getControlByType",value:function(e,t){return(t=this.getControlInfoByType(e,t))?t.control:null}},{key:"getEditControlByType",value:function(e,t){return(t=this.getControlInfoByType(e,t))?t.editControl:null}},{key:"createControls",value:function(e,t){var r=t.model,n=t.data,o=t.errors,a=t.eventOnEdit,i=t.eventOnDelete,l=t.eventOnCopy,s=t.handleEvent,c=t.parentItem,u=t.getFormFunc,p=t.getAdditionalDataForControl,f=t.buildermode,d=t.hideControls,h=t.readOnlyControls,m=t.readOnly,y=t.disableRefs,b=t.uploadUrl,v=t.downloadUrl,g=t.extendedData,w=t.controlsToReplace,O=t.needCheckReplace,C=t.parentPlaceholder,S=t.formItem,k=t.externalControlRender,E=t.externalControlList,P=t.adaptiveViewType,j=t.formData,x=[];if(null==r)return x;for(var _=0;_<r.length;_++)if(!(Array.isArray(d)&&d.includes(r[_].key)||!f&&!ro.isAdaptiveRender(r[_],P))){var R=void 0,D=r[_]["data-buildertype"];if("customcontrol"===D)if(void 0===r[_].type||""===r[_].type)R=K("empty",{key:r[_].key,text:"Fill Type property for rendering the control."});else{var T=$n($n({},void 0===r[_].props?{}:be.a.parse(r[_].props)),{},(Xn(B={key:r[_].key,name:r[_].key,className:r[_]["style-customcss"]},"className",ro.getClassName(r[_],f)),Xn(B,"style",ro.getStyle(r[_],f,P)),Xn(B,"data-buildertype",r[_]["data-buildertype"]),Xn(B,"getAdditionalDataForControl",p),Xn(B,"uploadUrl",b),Xn(B,"downloadUrl",v),B));(m||Array.isArray(h)&&h.includes(T.key))&&(T.readOnly=!0);var F=r[_].children;if(void 0!==r[_].children)try{F=be.a.parse(r[_].children)}catch(e){}R=void 0===F||Array.isArray(F)&&0===F.length?z.a.createElement(r[_].type,T):z.a.createElement(r[_].type,T,F)}else if("customblock"===D){var A=[],I=!1,L=!1,N=!1,B=r[_],T=C,F=S;if("form"===r[_].sourceType||void 0===r[_].sourceType)if(void 0!==r[_].children&&""!==r[_].children)A=r[_].children;else{if(void 0===u){console.error('Error: "getFormFunc" parameter is undefined!. Please, set "getFormFunc" parameter for DWKitBuilder or DWKitForm!');continue}void 0!==r[_].formname&&""!==r[_].formname?A=u(r[_].formname):I=!0}else if("placeholder"===r[_].sourceType)N=L=void 0!==a,B=c,void 0===T&&(T=r[_].key),void 0!==(F=void 0===F?c:F)&&void 0!==F.placeholders&&void 0!==F.placeholders[r[_].key]&&(A=F.placeholders[r[_].key]);else if(void 0!==r[_].source&&""!==r[_].source)try{A=be.a.parse(r[_].source)}catch(e){I=!0}else I=!0;R=I?K("empty",{key:r[_].key,text:"Set a form name or source in properties."}):(V=this.createControls(e,{model:A,data:n,errors:o,buildermode:L,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,parentItem:B,handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:d,readOnlyControls:h,readOnly:m,disableRefs:y,uploadUrl:b,downloadUrl:v,controlsToReplace:w,needCheckReplace:O,parentPlaceholder:T,formItem:F,extendedData:g,externalControlRender:k,externalControlList:E,adaptiveViewType:P,formData:j}),M={key:r[_].key,name:r[_].key,className:ro.getClassName(r[_],f),style:ro.getStyle(r[_],f,P),"data-buildertype":r[_]["data-buildertype"]},N&&(0<(V=void 0===V?[]:V).length&&(N=ro.createBuilderDropzone(r[_].key+"_dropzone_footer",void 0===F?void 0:F.key,V[V.length-1].key,r[_].key,r[_].key),V.push(N)),F=ro.createBuilderDropzone(r[_].key+"_dropzone_header",void 0===F?void 0:F.key,void 0,r[_].key,r[_].key),V.unshift(F)),z.a.createElement(this.getPlatformContainerControl(),M,V))}else var V,M,U=this.getControlByType(D,E),R=null===U?K("null-control",{key:r[_].key,text:"".concat(D," is unsupported")}):this.isContainer(D)?(de(M=S)&&he(c)&&"form"===c.sourceType&&(M=c),(V=void 0)!==r[_].readOnly&&(V=r[_].readOnly),(m||Array.isArray(h)&&h.includes(r[_].key))&&(V=!0),D=f&&("formgroup"===r[_]["data-buildertype"]&&"grouped"!==r[_].orientation||"container"===r[_]["data-buildertype"]&&"flex"===r[_]["style-display"]),V=this.createControls(e,{model:r[_].children,data:n,errors:o,buildermode:f,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,parentItem:r[_],handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:d,readOnlyControls:h,readOnly:V,disableRefs:y,uploadUrl:b,downloadUrl:v,controlsToReplace:w,needCheckReplace:O,parentPlaceholder:void 0,formItem:M,extendedData:g,externalControlRender:k,externalControlList:E,adaptiveViewType:P,formData:j}),f&&(0<V.length&&(M=D?"...":"... "+r[_].key+" down ...",M=ro.createBuilderDropzone(r[_].key+"-dropzone_footer",r[_].key,void 0,M),V.push(M)),D=D?"...":"... "+r[_].key+" up ...",D=ro.createBuilderDropzone(r[_].key+"-dropzone_header",r[_].key,void 0,D),V.unshift(D)),this.createControl(e,U,{model:r[_],data:n,errors:o,parentItem:c,buildermode:f,children:V,handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:d,readOnlyControls:h,readOnly:m,disableRefs:y,uploadUrl:b,downloadUrl:v,extendedData:g,parentPlaceholder:C,controlsToReplace:w,needCheckReplace:O,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,externalControlRender:k,externalControlList:E,adaptiveViewType:P,formData:j})):this.createControl(e,U,{model:r[_],data:n,errors:o,parentItem:c,buildermode:f,handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:d,readOnlyControls:h,readOnly:m,disableRefs:y,uploadUrl:b,downloadUrl:v,extendedData:g,parentPlaceholder:C,controlsToReplace:w,needCheckReplace:O,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,externalControlRender:k,externalControlList:E,adaptiveViewType:P,formData:j});f?(0<_&&_<r.length&&(U=ro.createBuilderDropzone(r[_].key+"-dropzone_bw",void 0===c?void 0:c.key,r[_].key,"...",C),x.push(U)),x.push(z.a.createElement(Gn,{key:R.key+"_controlbar",control:R,text:r[_]["data-buildertype"],model:r[_],parent:e,onDelete:i,onEdit:a,onCopy:l,isGroup:"formgroup"===r[_]["data-buildertype"]}))):x.push(R)}return x}},{key:"createControl",value:function(e,t,r){throw r.model,r.data,r.errors,r.parentItem,r.buildermode,r.children,r.handleEvent,r.getAdditionalDataForControl,r.getFormFunc,r.hideControls,r.readOnlyControls,r.readOnly,r.disableRefs,r.uploadUrl,r.downloadUrl,r.extendedData,r.controlsToReplace,r.needCheckReplace,r.eventOnEdit,r.eventOnDelete,r.eventOnCopy,r.externalControlRender,r.externalControlList,r.adaptiveViewType,r.formData,new Error("You must implement this method in subclass")}},{key:"setCreateControlsProps",value:function(e,t){Object.assign(e,t),e.buildermode&&(e.createBuilderDropzone=ro.createBuilderDropzone),e.createControls=this.createControls.bind(this)}},{key:"getPlatformContainerControl",value:function(){}}]),Zn(Xo,ea),ro);function ro(){!function(e){if(!(e instanceof ro))throw new TypeError("Cannot call a class as a function")}(this),Xn(this,"items",[])}function no(e){return(no="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function oo(r,n,e,t,o){var a=2<arguments.length&&void 0!==e?e:null;return((3<arguments.length&&void 0!==t?t:null)||Vr.a)(r,4<arguments.length&&void 0!==o?o:null).then(function(e){var t=e.json();return e.ok?t.then(n):a?t.then(a):void console.log(error+" url: "+r)}).catch(function(e){return a?a(e):void console.log(e+" url: "+r)})}function ao(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Xn(to,"containers",{form:"",formgroup:"",grid:"",gridcolumn:"",container:"",div:"",repeater:""}),r(13).createStore({init:function(){this.listenTo(Mn.add,this.add),this.listenTo(Mn.move,this.move),this.listenTo(Mn.remove,this.remove),this.listenTo(Mn.save,this.save),this.listenTo(Mn.saveData,this._updateOrder),this.listenTo(Mn.insert,this.insert),eo=[]},move:function(e,t){var r,n,o,a,i,l,s;null!=t&&(r=this.findItemByKey(e,eo),n=this._excludeItemByKey(e,eo),t.attributes.name&&"dropzone_footer"===t.attributes.name.value?n.push(r):t.attributes.name&&"dropzone_header"===t.attributes.name.value?n.unshift(r):null!=t.attributes.elementtoinsert?null!=(o=null!=(a=t.attributes.elementtoinsert)?this.findItemByKey(a.value,n):o)?(i=(i=void 0)===(e=t.attributes.placeholderkey)?(null==o.children&&(o.children=[]),o.children):(void 0===o.placeholders&&(o.placeholders={}),null==o.placeholders[e.value]&&(o.placeholders[e.value]=[]),o.placeholders[e.value]),null!=t.attributes.name&&t.attributes.name.value.includes("dropzone_footer")?i.push(r):null!=t.attributes.name&&t.attributes.name.value.includes("dropzone_header")?i.unshift(r):null!=(s=t.attributes.elementafter)&&(e=this.findItemByKey(s.value,i),i.splice(i.indexOf(e),0,r))):console.error("ERROR: element is not found",a,r,t):null!=t.attributes.elementafter&&(null!=(l=null!=(s=t.attributes.elementafter)?this.findItemByKey(s.value,n):l)?n.splice(n.indexOf(l),0,r):console.error("ERROR: element is not found",s,r,t)),this.setData(n))},insert:function(e,t,r,n,o){var a,i,l;e&&(this.makeUniqueKeys(e,this.getAllKeys(a=eo)),"dropzone_footer"===t?a.push(e):"dropzone_header"===t?a.unshift(e):r?null!=(l=this.findItemByKey(r,a))?(i=(i=void 0)===o?(null==l.children&&(l.children=[]),l.children):(void 0===l.placeholders&&(l.placeholders={}),null==l.placeholders[o.value]&&(l.placeholders[o.value]=[]),l.placeholders[o.value]),t&&t.includes("dropzone_footer")?i.push(e):t&&t.includes("dropzone_header")?i.unshift(e):null!=n&&(t=this.findItemByKey(n,i),i.splice(i.indexOf(t),0,e))):console.error("ERROR: element is not found",l,e,r):null!=n&&(null!=(r=this.findItemByKey(n,a))?a.splice(a.indexOf(r),0,e):console.error("ERROR: element is not found",n,e)),this.setData(a))},_excludeItemByKey:function(e,t){for(var r=[],n=0;n<t.length;n++)if(t[n].key!=e&&(r.push(t[n]),t[n].children&&(r[r.length-1].children=this._excludeItemByKey(e,t[n].children)),null!=t[n].placeholders))for(var o in t[n].placeholders)Array.isArray(t[n].placeholders[o])&&(r[r.length-1].placeholders[o]=this._excludeItemByKey(e,t[n].placeholders[o]));return r},add:function(e,t){var r,n,o,a,i,l,s,c=to.fillDefaultValues({key:this.getDefaultKey(e.key),"data-buildertype":void 0!==e.builderType?e.builderType:e.key},e.defaultValues);null==t?0<eo.length&&"form"===eo[eo.length-1]["data-buildertype"]?(null==(o=eo[eo.length-1]).children&&(o.children=[]),o.children.push(c)):eo.push(c):t.attributes.name&&"dropzone_footer"===t.attributes.name.value?eo.push(c):t.attributes.name&&"dropzone_header"===t.attributes.name.value?eo.unshift(c):null!=t.attributes.elementtoinsert?null!=(r=null!=(n=t.attributes.elementtoinsert)?this.findItemByKey(n.value,eo):r)?(i=(i=void 0)===(o=t.attributes.placeholderkey)?(null==r.children&&(r.children=[]),r.children):(void 0===r.placeholders&&(r.placeholders={}),null==r.placeholders[o.value]&&(r.placeholders[o.value]=[]),r.placeholders[o.value]),null!=t.attributes.name&&t.attributes.name.value.includes("dropzone_footer")?i.push(c):null!=t.attributes.name&&t.attributes.name.value.includes("dropzone_header")?i.unshift(c):(null!=(s=t.attributes.elementafter)&&(a=this.findItemByKey(s.value,i)),i.splice(i.indexOf(a),0,c))):console.error("ERROR: element is not found",n,e,t):null!=t.attributes.elementafter&&(null!=(l=null!=(s=t.attributes.elementafter)?this.findItemByKey(s.value,eo):l)?eo.splice(eo.indexOf(l),0,c):console.error("ERROR: element is not found",s,t)),this.trigger(eo)},remove:function(e){this.removeItemByKey(e.key,eo),this.trigger(eo)},copy:function(e){var t=this.copyObj(e);this.insertAfterKey(t,e.key,eo),this.makeUniqueKeys(t),this.trigger(eo)},getData:function(){return eo},setData:function(e){eo=e,this.trigger(eo)},_updateOrder:function(e){eo=e,this.trigger(eo)},getDefaultKey:function(e){for(var t=1,r=e+"_"+t,n=this.getAllKeys(eo),o=0;o<n.length;o++)n[o]==(r=e+"_"+t)&&(t++,o=-1);return r},getAllKeys:function(e){var t=[];if(null!=e)for(var r=0;r<e.length;r++){var n=e[r];if(t.push(n.key),null!=n.children)var o=this.getAllKeys(n.children),t=t.concat(o);else if(null!=n.placeholders)for(var a in n.placeholders)Array.isArray(n.placeholders[a])&&(a=this.getAllKeys(n.placeholders[a]),t=t.concat(a))}return t},getByKey:function(e){return this.findItemByKey(e,eo)},findItemByKey:function(e,t){for(var r=0;r<t.length;r++){var n,o=t[r];if(o.key==e)return o;if(null!=o.children){if(null!=(n=this.findItemByKey(e,o.children)))return n}else if(null!=o.placeholders)for(var a in o.placeholders)if(Array.isArray(o.placeholders[a])&&null!=(n=this.findItemByKey(e,o.placeholders[a])))return n}},insertAfterKey:function(e,t,r){for(var n=0;n<r.length;n++){var o=r[n];if(o.key==t)return r.splice(n+1,0,e),!0;if(void 0!==o.children&&this.insertAfterKey(e,t,o.children))return!0;if(void 0!==o.placeholders)for(var a in o.placeholders)if(Array.isArray(o.placeholders[a])&&this.insertAfterKey(e,t,o.placeholders[a]))return!0}},updateItemByKey:function(e,t){var r,n=this.getByKey(e);for(r in t)n[r]=t[r];e!=t.key&&this.replaceDepensKeys(e,t.key),this.trigger(eo)},replaceDepensKeys:function(e,t,r){null==r&&(r=eo);for(var n=0;n<r.length;n++){var o=r[n];if(Array.isArray(o["events-onclick-targets"]))for(var a=o["events-onclick-targets"],i=0;i<a.length;i++)a[i]==e&&(a[i]=t);if(null!=o.children&&this.replaceDepensKeys(e,t,o.children),void 0!==o.placeholders)for(var l in o.placeholders)Array.isArray(o.placeholders[l])&&this.replaceDepensKeys(e,t,o.placeholders[l])}},removeItemByKey:function(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.key==e){t.splice(r,1);break}if(null!=n.children&&this.removeItemByKey(e,n.children),void 0!==n.placeholders)for(var o in n.placeholders)Array.isArray(n.placeholders[o])&&this.removeItemByKey(e,n.placeholders[o])}},copyObj:function(e){if(null==e||"object"!==no(e))return e;var t,r=e.constructor();for(t in e)e.hasOwnProperty(t)&&(r[t]=this.copyObj(e[t]));return r},makeUniqueKeys:function(e,t){var r=this,n=e["data-buildertype"];if(n&&e.key&&(!t||t&&t.includes(e.key))&&(e.key=this.getDefaultKey(n)),Array.isArray(e.children)&&e.children.forEach(function(e){r.makeUniqueKeys(e,t)}),void 0!==e.placeholders)for(var o in e.placeholders)Array.isArray(e.placeholders[o])&&e.placeholders[o].forEach(function(e){r.makeUniqueKeys(e,t)})}});var io=(ao(uo.prototype,[{key:"registerItems",value:function(e){io.items=e}},{key:"getItems",value:function(){return io.items}}]),new uo),lo=io.registerItems,so=io.getItems,co=z.a.createContext({visible:!1});function uo(){var e;!function(e){if(!(e instanceof uo))throw new TypeError("Cannot call a class as a function")}(this),e=[],"items"in this?Object.defineProperty(this,"items",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.items=e}var po=function t(){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this)};function fo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}fa=/{\S[A-z,0-9,_,-,.,:, ,/]+?}/gm,(pa="regexForReplace")in(ua=po)?Object.defineProperty(ua,pa,{value:fa,enumerable:!0,configurable:!0,writable:!0}):ua[pa]=fa;var ho={},mo=(ha=bo,ma=[{key:"Set",value:function(e,t,r){ho.hasOwnProperty(e)&&clearTimeout(ho[e]),ho[e]=setTimeout(t,r)}},{key:"Clear",value:function(e){ho.hasOwnProperty(e)&&(clearTimeout(ho[e]),delete ho[e])}}],(da=null)&&fo(ha.prototype,da),fo(ha,ma),bo),yo=r(6);function bo(){!function(e){if(!(e instanceof bo))throw new TypeError("Cannot call a class as a function")}(this)}function vo(e){return(vo="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function go(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function wo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?go(Object(r),!0).forEach(function(e){Eo(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):go(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Co(e,t){return(Co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function So(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ko(e){return(ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(21);var Po=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Co(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=ko(r),t=n?(t=ko(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==vo(t)&&"function"!=typeof t?So(e):t});function a(e){var f;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),Eo(So(f=o.call(this,e)),"_asyncGetData",null),Eo(So(f),"_asyncGetModel",null),Eo(So(f),"handleEvent",function(e){e.e;var o,a,i=e.key,t=e.propertyName,l=e.eventName,s=e.parameters,r=e.name,c=e.value,n=e.additionalValues,u=So(f),p="onChange"===l;p&&(f.props.onlyExternalDataChanged||(void 0===f.state.data&&(f.state.data={}),(e=f.state.data)[t||i]=c,f.setState({data:e})),void 0!==f.props.dataChanged&&f.props.dataChanged(So(f),{key:i,propertyName:t,value:c,additionalValues:n}),f.onConditions(i,l,s,r,c)),void 0===f.props.eventFunc||void 0!==(o=f.findModelItembyKey(i))&&void 0!==o.events&&void 0!==o.events[l]&&o.events[l].active&&(o.events=Object(yo.updateEventsFormat)(o.events),r=o.events[l],a=wo({},s),Array.isArray(r.triggers)&&0<r.triggers.length&&r.triggers.forEach(function(t){Array.isArray(t.parameters)&&0<t.parameters.length&&t.parameters.forEach(function(e){"string"==typeof e.value?a[e.name]=e.value.replace(po.regexForReplace,function(e){return u.applySubstitution(e,s?s.row:void 0,u.state.data)}):a[e.name]=e.value});var r=u.findRefs(i),n=c,e=Array.isArray(t.targets)&&0<t.targets.length?function(){return t.targets.forEach(function(e){u.props.eventFunc({key:e,sourceControlRef:r,sourceControlValue:n,controlRef:u.findRefs(e),formName:u.props.formName,component:u,eventName:l,actions:t.actions,parameters:a})})}:function(){return u.props.eventFunc({key:i,sourceControlRef:r,sourceControlValue:n,controlRef:r,formName:u.props.formName,component:u,eventName:l,actions:t.actions,parameters:a})};!p||void 0===o.onChangeTimeout||""===o.onChangeTimeout||Number(o.onChangeTimeout)<1?e():mo.Set(i,e,Number(o.onChangeTimeout))}))}),f.state={data:e.data,model:e.model,extendedData:e.extendedData,controlsToReplace:null,adaptiveViewType:f.getAdaptiveViewType()},f.checkLoadedState(f.state.data,f.state.model,!0),f.abortController=new AbortController,f.abortSignal=f.abortController.signal,f}return t=[{key:"getDerivedStateFromProps",value:function(e,t){var r,n={};if(e.adaptiveViewType&&t.adaptiveViewType!==e.adaptiveViewType&&(n.adaptiveViewType=e.adaptiveViewType),void 0!==e.modelurl&&""!==e.modelurl&&e.modelurl!==t.modelurl&&(n.modelurl=e.modelurl,n.needFetchModel=!0),void 0!==e.model&&e.model!==t.model&&(n.controlsToReplace=null,n.model=e.model),void 0!==e.dataurl&&""!==e.dataurl&&e.dataurl!==t.dataurl&&(n.dataurl=e.dataurl,n.needFetchData=!0),void 0!==e.data&&(n.data=e.data,e.autoCheckConditions&&t.enableCheckConditions&&(r=Object(yo.checkConditions)({data:n.data,model:n.model||t.model}),n.hideControls=r.hideControls,n.readOnlyControls=r.readOnlyControls),e.autoValidate))if((r=Object(yo.validate)({data:n.data,model:n.model||t.model})).valid)n.errors=void 0;else if(n.errors=r.errors,e.errors)for(var o in e.errors)n.errors[o]=e.errors[o];return e.objectId!==t.objectId&&(n.objectId=e.objectId,n.isLoaded=!1),n}}],Oo((e=a).prototype,[{key:"createControls",value:function(){throw new Error("Function createControls must be implemented in ancestor!")}},{key:"componentDidMount",value:function(){this.PrepareState()}},{key:"componentDidUpdate",value:function(e,t){this.PrepareState()}},{key:"componentWillUnmount",value:function(){(this._asyncGetData||this._asyncGetModel)&&this.abortController.abort()}},{key:"PrepareState",value:function(){var t=this;this.state.needFetchModel&&(t.setState({needFetchModel:!1}),this._asyncGetModel=oo(this.state.modelurl,function(e){t._asyncGetModel=null,t.modelChanged(e)},function(e){t._asyncGetModel=null,t.handleErrEvent(e)},this.props.fetchFunc,{signal:this.abortSignal})),this.state.needFetchData&&(t.setState({needFetchData:!1}),this._asyncGetData=oo(this.state.modelurl,function(e){t._asyncGetData=null,t.dataChanged(e)},function(e){t._asyncGetData=null,t.handleErrEvent(e)},this.props.fetchFunc,{signal:this.abortSignal})),this.checkConditions(this.state.model),this.checkLoadedState(this.state.data,this.state.model)}},{key:"modelChanged",value:function(e){this.setState({model:e,controlsToReplace:null}),this.checkConditions(e)}},{key:"dataChanged",value:function(e){this.setState({data:e}),this.checkLoadedState(e,this.state.model)}},{key:"checkLoadedState",value:function(e,t,r){this.state.isLoaded||null==e||null==t||(r?this.state.isLoaded=!0:this.setState({isLoaded:!0}),e=wo({},e),Object(yo.initDefaultState)({model:t,data:e}),this.props.eventFunc({key:void 0,controlRef:this,formName:this.props.formName,component:this,eventName:"init",actions:["initSystem","init"],parameters:{initialData:e}}))}},{key:"findRefs",value:function(e,t){if(t=t||this.refs){var r=t[e];if(!r)for(var n in t)if(r=t[n].refs?this.findRefs(e,t[n].refs):r)break;return r}}},{key:"checkConditions",value:function(e,t){var r=!1;if(Array.isArray(e))for(var n=0;n<e.length;n++){if(void 0!==e[n]["other-visibleConition"]&&""!==e[n]["other-visibleConition"]||void 0!==e[n]["other-readOnlyConition"]&&""!==e[n]["other-readOnlyConition"])r=!0;else if(Array.isArray(e[n].children))r=this.checkConditions(e[n].children,!0);else if("object"==vo(e[n].placeholders))for(var o in e[n].placeholders)r=this.checkConditions(e[n].placeholders[o],!0);if(r)break}if(t)return r;this.state.enableCheckConditions=r}},{key:"onConditions",value:function(e,t,r,n,o){var a;this.state.enableCheckConditions&&(this.props.autoCheckConditions&&this.state.enableCheckConditions?(a=Object(yo.checkConditions)({data:this.state.data,model:this.state.model}),this.setState({hideControls:a.hideControls,readOnlyControls:a.readOnlyControls})):this.props.eventFunc({key:e,controlRef:this.findRefs(e),formName:this.props.formName,component:this,eventName:t,actions:["checkConditions"],parameters:r}))}},{key:"handleErrEvent",value:function(e){this.props.eventErrFunc&&this.props.eventErrFunc(this,e)}},{key:"findModelItembyKey",value:function(e,t){void 0===t&&(t=this.state.model);for(var r=0;r<t.length;r++){if(t[r].key===e)return t[r];if(void 0!==t[r].children){var n=this.findModelItembyKey(e,t[r].children);if(void 0!==n)return n}if(void 0!==t[r].placeholders)for(var o in t[r].placeholders)if(void 0!==(o=this.findModelItembyKey(e,t[r].placeholders[o])))return o;if("customblock"===t[r]["data-buildertype"]&&"source"===t[r].sourceType&&null!=t[r].source){var a=be.a.parse(t[r].source);if(void 0!==(a=this.findModelItembyKey(e,a)))return a}if("customblock"===t[r]["data-buildertype"]&&"form"===t[r].sourceType&&void 0!==t[r].formname&&""!==t[r].formname&&(a=t[r].children||this.props.getFormFunc(t[r].formname),void 0!==(a=this.findModelItembyKey(e,a))))return a}}},{key:"getAdaptiveViewType",value:function(){return"mobile"}},{key:"handleResize",value:function(){var e=this.getAdaptiveViewType();this.state.adaptiveViewType!==e&&this.setState({adaptiveViewType:e})}},{key:"applySubstitution",value:function(e,t,r){var n=e;return null!=t&&"row."==e.slice(1,5)?null==(n=t[e.slice(5,e.length-1)])?"":n:null!=r&&null==(n=r[e.slice(1,e.length-1)])?"":n}}]),Oo(e,t),a}();function jo(e){return(jo="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _o(e,t,r){return(_o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){if(e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Do(e)););return e}(e,t))return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(r):t.value})(e,t,r||e)}function Ro(e,t){return(Ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var To=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ro(e,t)}(t,Po);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Do(r),t=n?(t=Do(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==jo(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return xo(t.prototype,[{key:"componentDidMount",value:function(){_o(Do(t.prototype),"componentDidMount",this).call(this),window.addEventListener&&window.addEventListener("resize",this.handleResize.bind(this))}},{key:"componentWillUnmount",value:function(){_o(Do(t.prototype),"componentWillUnmount",this).call(this),window.removeEventListener&&window.removeEventListener("resize",this.handleResize.bind(this))}},{key:"getItemsForRender",value:function(){var e=[],t=!1;null!==this.state.model&&void 0!==this.state.model&&(e=null===this.state.controlsToReplace?[]:this.state.controlsToReplace,t=null===this.state.controlsToReplace);var r=this.createControls(this,{model:this.state.model,data:this.state.data,errors:this.state.errors||this.props.errors,handleEvent:this.handleEvent,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,hideControls:(this.props.autoCheckConditions?this.state:this.props).hideControls,readOnlyControls:(this.props.autoCheckConditions?this.state:this.props).readOnlyControls,readOnly:this.props.readOnly,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:e,needCheckReplace:t,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType||this.state.adaptiveViewType});return t&&(this.state.controlsToReplace=e),r}},{key:"getAdaptiveViewType",value:function(){return window.matchMedia&&window.matchMedia("(max-width: 997px)").matches?"mobile":"desktop"}}]),t}();function Fo(){!function(e){if(!(e instanceof Fo))throw new TypeError("Cannot call a class as a function")}(this)}var Ao=r(1);function Io(e){return(Io="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function No(e){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mo(e,t,r){return t&&Vo(e.prototype,t),r&&Vo(e,r),e}function Uo(e,t,r,n){return{key:e,defaultValue:t,formName:r,value:n}}var zo=(Mo(ra,[{key:"build",value:function(){return new this.subType(this.name,this.description,this.values)}},{key:"locKey",value:function(e){return this.name+e}},{key:"description",value:function(e){var t=this.locKey("typedescription");return this.description=Uo(t,e,this.locFormName),this}},{key:"withValue",value:function(e,t,r){return de(this.values)&&(this.values=[]),r=Uo(this.locKey(e),t,this.locFormName,r),this.values.push(r),this}}],[{key:"from",value:function(e){return new ra(e)}},{key:"enum",value:function(e){return new ra(e,Wo)}}]),ra),Ko=(Mo(ta,[{key:"getDescription",value:function(){return this.description}},{key:"getValues",value:function(){return this.values}}]),ta),Wo=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(t,Ko);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=No(r),t=n?(t=No(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Io(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return Bo(this,t),e.apply(this,arguments)}return t}(),Ho=zo.from("any").description("any").build(),qo=zo.from("array").description("array of values").build(),Go=zo.enum("bool").description("true or false").withValue("default","Default").withValue("true","True",!0).withValue("false","False",!0).build(),Jo=zo.from("color").description("red|green|rgba(10,20,30,0.5)").build(),$o=zo.from("component").description("react component").build(),Yo=zo.from("function").build(),Qo=zo.from("number").description("any number").build(),Zo=zo.from("object").description("any object").build(),Xo=zo.from("string").description("any string").build(),ea=zo.from("style").description("/*** Example Code ***/\ncolor:red;\npaddingTop:5;").build();function ta(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];Bo(this,ta),this.name=e,this.description=t,this.values=r}function ra(e,t){Bo(this,ra),this.name=e,this.locFormName="_"+this.name+"Type",this.subType=he(t)?t:Ko}function na(e){return function(e){if(Array.isArray(e))return ia(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||aa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oa(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=aa(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function aa(e,t){if(e){if("string"==typeof e)return ia(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ia(e,t):void 0}}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function la(e){var t,r="",n=oa(e.split(""));try{for(n.s();!(t=n.n()).done;){var o=t.value;o.toUpperCase()===o&&(r+=" "),r+=o}}catch(e){n.e(e)}finally{n.f()}return r.charAt(0).toUpperCase()+r.substr(1)}function sa(e,t){if(null===t||!(t instanceof Ko))throw new Error("name "+e+" "+t);return{name:e,type:t,defaultLabel:la(e)}}function ca(e,t,r){if(null===t||!(t instanceof Ko))throw new Error("name "+e+" "+t);return{name:e,type:t,defaultValue:r,defaultLabel:la(e)}}var ua={renderer:Ao.View,propertyTypes:[sa("onStartShouldSetResponder",Yo),sa("accessible",Go),sa("accessibilityLabel",Xo),sa("accessibilityHint",Xo),sa("accessibilityRole",Xo),sa("accessibilityState",Zo),sa("accessibilityValue",Zo),sa("accessibilityActions",qo),sa("onAccessibilityAction",Yo),sa("onAccessibilityTap",Yo),sa("onMagicTap",Yo),sa("onAccessibilityEscape",Yo),sa("accessibilityViewIsModal",Go),sa("accessibilityElementsHidden",Go),sa("accessibilityIgnoresInvertColors",Go),sa("accessibilityLiveRegion",Xo),sa("importantForAccessibility",Xo),sa("hitSlop",Zo),sa("nativeID",Xo),sa("onLayout",Yo),sa("onMoveShouldSetResponder",Yo),sa("onMoveShouldSetResponderCapture",Yo),sa("onResponderGrant",Yo),sa("onResponderMove",Yo),sa("onResponderReject",Yo),sa("onResponderRelease",Yo),sa("onResponderTerminate",Yo),sa("onResponderTerminationRequest",Yo),sa("onStartShouldSetResponderCapture",Yo),sa("pointerEvents",Xo),sa("removeClippedSubviews",Go),sa("style",ea),sa("testID",Xo),sa("collapsable",Go),sa("needsOffscreenAlphaCompositing",Go),sa("renderToHardwareTextureAndroid",Go),sa("shouldRasterizeIOS",Go),sa("nextFocusDown",Qo),sa("nextFocusForward",Qo),sa("nextFocusLeft",Qo),sa("nextFocusRight",Qo),sa("nextFocusUp",Qo),sa("focusable",Go)]},pa={renderer:Ao.ActivityIndicator,propertyTypes:[].concat(na(ua.propertyTypes),[sa("animating",Go),sa("color",Jo),sa("hidesWhenStopped",Go),sa("size",Qo)])},fa={renderer:Ao.Button,propertyTypes:[ca("onPress",Yo,function(){return console.log("Set me a handler!")}),ca("title",Xo,"Button"),sa("accessibilityLabel",Xo),sa("color",Jo),sa("disabled",Go),sa("testID",Xo),sa("hasTVPreferredFocus",Go),sa("nextFocusDown",Qo),sa("nextFocusForward",Qo),sa("nextFocusLeft",Qo),sa("nextFocusRight",Qo),sa("nextFocusUp",Qo),sa("touchSoundDisabled",Go)]},da={renderer:Ao.FlatList,propertyTypes:[sa("renderItem",Yo),sa("data",qo),sa("ItemSeparatorComponent",$o),sa("ListEmptyComponent",$o),sa("ListFooterComponent",$o),sa("ListFooterComponentStyle",ea),sa("ListHeaderComponent",$o),sa("ListHeaderComponentStyle",ea),sa("columnWrapperStyle",ea),sa("extraData",Ho),sa("getItemLayout",Yo),sa("horizontal",Go),sa("initialNumToRender",Qo),sa("initialScrollIndex",Qo),sa("inverted",Go),sa("keyExtractor",Yo),sa("numColumns",Qo),sa("onEndReached",Yo),sa("onEndReachedThreshold",Yo),sa("onRefresh",Yo),sa("onViewableItemsChanged",Yo),sa("progressViewOffset",Qo),sa("legacyImplementation",Go),sa("refreshing",Go),sa("removeClippedSubviews",Go),sa("viewabilityConfig",Zo),sa("viewabilityConfigCallbackPairs",qo)],methods:["scrollToEnd","scrollToIndex","scrollToItem","scrollToOffset","recordInteraction","flashScrollIndicators","getNativeScrollRef","getScrollResponder","getScrollableNode"]},ha={renderer:Ao.Image,propertyTypes:[ca("style",ea,{width:128,height:128}),sa("accessible",Go),sa("accessibilityLabel",Xo),sa("blurRadius",Qo),sa("capInsets",Zo),sa("defaultSource",Zo),sa("fadeDuration",Qo),sa("loadingIndicatorSource",qo),sa("onError",Yo),sa("onLayout",Yo),sa("onLoad",Yo),sa("onLoadEnd",Yo),sa("onLoadStart",Yo),sa("onPartialLoad",Yo),sa("onProgress",Yo),sa("progressiveRenderingEnabled",Go),sa("resizeMethod",zo.enum("imageResizeMethod").description("Resize mechanism").withValue("default","Default").withValue("auto","Auto","auto").withValue("resize","Resize","resize").withValue("Scale","Scale","scale").build()),sa("resizeMode",zo.enum("imageResizeMode").description("Resize mode").withValue("default","Default").withValue("cover","Cover","cover").withValue("contain","Contain","contain").withValue("stretch","Stretch","stretch").withValue("repeat","Repeat","repeat").withValue("center","Center","center").build()),ca("source",Ho,{uri:"/images/unknown.png"}),sa("testID",Xo)]},ma={renderer:Ao.ImageBackground,propertyTypes:[].concat(na(ha.propertyTypes),[sa("imageStyle",ea),sa("imageRef",Ho)])},t={renderer:Ao.KeyboardAvoidingView,propertyTypes:[].concat(na(ua.propertyTypes),[sa("behavior",Xo),sa("contentContainerStyle",ea),sa("enabled",Go),sa("keyboardVerticalOffset",Qo)])},ye={renderer:Ao.RefreshControl,propertyTypes:[].concat(na(ua.propertyTypes),[ca("refreshing",Go,!0),sa("onRefresh",Yo),sa("colors",qo),sa("enabled",Go),sa("progressBackgroundColor",Jo),sa("progressViewOffset",Qo),sa("size",Qo),sa("tintColor",Jo),sa("title",Xo),sa("titleColor",Jo)])},ve={renderer:Ao.SafeAreaView,propertyTypes:[].concat(na(ua.propertyTypes),[sa("emulateUnlessSupported",Go)])},Ie={renderer:Ao.ScrollView,propertyTypes:[].concat(na(ua.propertyTypes),[sa("alwaysBounceHorizontal",Go),sa("alwaysBounceVertical",Go),sa("automaticallyAdjustContentInsets",Go),sa("bounces",Go),sa("bouncesZoom",Go),sa("canCancelContentTouches",Go),sa("centerContent",Go),sa("contentContainerStyle",ea),sa("contentInset",Zo),sa("contentInsetAdjustmentBehavior",Xo),sa("contentOffset",Zo),sa("decelerationRate",Xo),sa("directionalLockEnabled",Go),sa("disableIntervalMomentum",Go),sa("disableScrollViewPanResponder",Go),sa("endFillColor",Jo),sa("fadingEdgeLength",Qo),sa("horizontal",Go),sa("indicatorStyle",Xo),sa("invertStickyHeaders",Go),sa("keyboardDismissMode",Xo),sa("keyboardShouldPersistTaps",Xo),sa("maintainVisibleContentPosition",Zo),sa("maximumZoomScale",Qo),sa("minimumZoomScale",Qo),sa("nestedScrollEnabled",Go),sa("onContentSizeChange",Yo),sa("onMomentumScrollBegin",Yo),sa("onMomentumScrollEnd",Yo),sa("onScroll",Yo),sa("onScrollBeginDrag",Yo),sa("onScrollEndDrag",Yo),sa("onScrollToTop",Yo),sa("overScrollMode",Xo),sa("pagingEnabled",Go),sa("persistentScrollbar",Go),sa("pinchGestureEnabled",Go),sa("refreshControl",Zo),sa("removeClippedSubviews",Go),sa("scrollBarThumbImage",Qo),sa("scrollEnabled",Go),sa("scrollEventThrottle",Qo),sa("scrollIndicatorInsets",Zo),sa("scrollPerfTag",Xo),sa("scrollToOverflowEnabled",Go),sa("scrollsToTop",Go),sa("showsHorizontalScrollIndicator",Go),sa("showsVerticalScrollIndicator",Go),sa("snapToAlignment",Xo),sa("snapToEnd",Go),sa("snapToInterval",Qo),sa("snapToOffsets",qo),sa("snapToStart",Go),sa("stickyHeaderIndices",qo),sa("zoomScale",Qo)])},Br={propertyTypes:[].concat(na(Ie.propertyTypes),[ca("renderItem",Yo,function(){return null}),ca("data",Ho,function(){return[]}),ca("getItem",Yo,function(){return null}),ca("getItemCount",Yo,function(){return 0}),sa("debug",Go),sa("extraData",Ho),sa("getItemLayout",Yo),sa("initialScrollIndex",Qo),sa("inverted",Go),sa("CellRendererComponent",Ho),sa("ItemSeparatorComponent",Ho),sa("listKey",Xo),sa("ListEmptyComponent",Ho),sa("ListItemComponent",Ho),sa("ListFooterComponent",Ho),sa("ListFooterComponentStyle",ea),sa("ListHeaderComponent",Ho),sa("ListHeaderComponentStyle",ea),sa("onRefresh",Yo),sa("onScrollToIndexFailed",Yo),sa("onViewableItemsChanged",Yo),sa("refreshing",Go),sa("refreshControl",Ho),sa("removeClippedSubviews",Go),sa("renderScrollComponent",Yo),sa("viewabilityConfig",Zo),sa("viewabilityConfigCallbackPairs",qo),sa("horizontal",Go),ca("initialNumToRender",Qo,0),sa("keyExtractor",Yo),sa("maxToRenderPerBatch",Qo),sa("onEndReached",Yo),sa("onEndReachedThreshold",Qo),sa("updateCellsBatchingPeriod",Qo),sa("windowSize",Qo),sa("persistentScrollbar",Go),sa("progressViewOffset",Qo)]),renderer:Ao.VirtualizedList},Vn={renderer:Ao.SectionList,propertyTypes:[].concat(na(Ie.propertyTypes),na(Br.propertyTypes),[sa("renderItem",Yo),ca("sections",qo,[]),sa("extraData",Ho),sa("initialNumToRender",Qo),sa("inverted",Go),sa("ItemSeparatorComponent",Ho),sa("keyExtractor",Yo),sa("ListEmptyComponent",Ho),sa("ListFooterComponent",Ho),sa("ListHeaderComponent",Ho),sa("onEndReached",Yo),sa("onEndReachedThreshold",Qo),sa("onRefresh",Yo),sa("onViewableItemsChanged",Yo),sa("refreshing",Go),sa("removeClippedSubviews",Go),sa("renderSectionFooter",Yo),sa("renderSectionHeader",Yo),sa("SectionSeparatorComponent",Ho),sa("stickySectionHeadersEnabled",Go)])},Un={renderer:Ao.StatusBar,propertyTypes:[sa("animated",Go),sa("backgroundColor",Jo),sa("barStyle",Xo),sa("hidden",Go),sa("networkActivityIndicatorVisible",Go),sa("showHideTransition",Xo),sa("translucent",Go)]},$o={renderer:Ao.Switch,propertyTypes:[].concat(na(ua.propertyTypes),[sa("disabled",Go),sa("ios_backgroundColor",Jo),sa("onChange",Yo),sa("onValueChange",Yo),sa("thumbColor",Jo),sa("trackColor",Zo),sa("value",Go)])},zo={renderer:Ao.Text,getDataProps:function(e){return{children:e.content}},propertyTypes:[sa("accessibilityHint",Xo),sa("accessibilityLabel",Xo),sa("accessibilityRole",Xo),sa("accessibilityState",Zo),sa("accessible",Go),sa("adjustsFontSizeToFit",Go),sa("allowFontScaling",Go),sa("dataDetectorType",Xo),sa("disabled",Go),sa("ellipsizeMode",Xo),sa("maxFontSizeMultiplier",Qo),sa("minimumFontScale",Qo),sa("nativeID",Xo),sa("numberOfLines",Qo),sa("onLayout",Yo),sa("onLongPress",Yo),sa("onMoveShouldSetResponder",Yo),sa("onPress",Yo),sa("onResponderGrant",Yo),sa("onResponderMove",Yo),sa("onResponderRelease",Yo),sa("onResponderTerminate",Yo),sa("onResponderTerminationRequest",Yo),sa("onStartShouldSetResponderCapture",Yo),sa("onTextLayout",Yo),sa("pressRetentionOffset",Zo),sa("selectable",Go),sa("selectionColor",Jo),sa("style",ea),sa("suppressHighlighting",Go),sa("testID",Xo),sa("textBreakStrategy",Xo)]},Ho={renderer:Ao.TextInput,propertyTypes:[].concat(na(ua.propertyTypes),[sa("allowFontScaling",Go),sa("autoCapitalize",Xo),sa("autoCompleteType",Xo),sa("autoCorrect",Go),sa("autoFocus",Go),sa("blurOnSubmit",Go),sa("caretHidden",Go),sa("clearButtonMode",Xo),sa("clearTextOnFocus",Go),sa("contextMenuHidden",Go),sa("dataDetectorTypes",Xo),sa("defaultValue",Xo),sa("disableFullscreenUI",Go),sa("editable",Go),sa("enablesReturnKeyAutomatically",Go),sa("importantForAutofill",Xo),sa("inlineImageLeft",Xo),sa("inlineImagePadding",Qo),sa("inputAccessoryViewID",Xo),sa("keyboardAppearance",Xo),sa("keyboardType",Xo),sa("maxFontSizeMultiplier",Qo),sa("maxLength",Qo),sa("multiline",Go),sa("numberOfLines",Qo),sa("onBlur",Yo),sa("onChange",Yo),sa("onChangeText",Yo),sa("onContentSizeChange",Yo),sa("onEndEditing",Yo),sa("onFocus",Yo),sa("onKeyPress",Yo),sa("onLayout",Yo),sa("onScroll",Yo),sa("onSelectionChange",Yo),sa("onSubmitEditing",Yo),sa("onTextInput",Yo),sa("placeholder",Xo),sa("placeholderTextColor",Jo),sa("returnKeyLabel",Xo),sa("returnKeyType",Xo),sa("rejectResponderTermination",Go),sa("scrollEnabled",Go),sa("secureTextEntry",Go),sa("selection",Zo),sa("selectionColor",Jo),sa("selectTextOnFocus",Go),sa("showSoftInputOnFocus",Go),sa("spellCheck",Go),sa("textAlign",Xo),sa("textContentType",Xo),sa("passwordRules",Xo),sa("style",ea),sa("textBreakStrategy",Xo),sa("underlineColorAndroid",Jo),sa("value",Xo)]),methods:["focus","blur","clear","isFocused"]},Xo={renderer:Ao.TouchableWithoutFeedback,propertyTypes:[sa("accessibilityIgnoresInvertColors",Go),sa("accessible",Go),sa("accessibilityLabel",Xo),sa("accessibilityHint",Xo),sa("accessibilityRole",Xo),sa("accessibilityState",Zo),sa("accessibilityActions",qo),sa("onAccessibilityAction",Yo),sa("accessibilityValue",Zo),sa("delayLongPress",Qo),sa("delayPressIn",Qo),sa("delayPressOut",Qo),sa("disabled",Go),sa("hitSlop",Zo),sa("onBlur",Yo),sa("onFocus",Yo),sa("onLayout",Yo),sa("onLongPress",Yo),sa("onPress",Yo),sa("onPressIn",Yo),sa("onPressOut",Yo),sa("pressRetentionOffset",Zo),sa("nativeID",Xo),sa("testID",Xo),sa("touchSoundDisabled",Go),ca("children",qo,z.a.createElement(Ao.View))]},qo={renderer:Ao.TouchableHighlight,propertyTypes:[].concat(na(Xo.propertyTypes),[sa("activeOpacity",Qo),sa("onHideUnderlay",Yo),sa("onShowUnderlay",Yo),sa("style",ea),sa("underlayColor",Jo),sa("hasTVPreferredFocus",Go),sa("nextFocusDown",Go),sa("nextFocusForward",Go),sa("nextFocusLeft",Go),sa("nextFocusRight",Go),sa("nextFocusUp",Go),sa("testOnly_pressed",Go),ca("children",qo,z.a.createElement(Ao.View))])},Go={renderer:Ao.TouchableOpacity,propertyTypes:[].concat(na(Xo.propertyTypes),[sa("style",ea),sa("activeOpacity",Qo),sa("tvParallaxProperties",Zo),sa("hasTVPreferredFocus",Go),sa("nextFocusDown",Go),sa("nextFocusForward",Go),sa("nextFocusLeft",Go),sa("nextFocusRight",Go),sa("nextFocusUp",Go)]),methods:["setOpacityTo"]};function ya(e){var t,r={},n={},o=oa(e.propertyTypes);try{for(o.s();!(t=o.n()).done;){var a=t.value;he((r[a.name]=a).defaultValue)&&(n[a.name]=a.defaultValue)}}catch(e){o.e(e)}finally{o.f()}return e.propertyByName=r,e.defaultProps=n,e}var ba={rnactivityindicator:ya(pa),rnbutton:ya(fa),rnflatlist:ya(da),rnimage:ya(ha),rnimagebackground:ya(ma),rnkeyboardavoidingview:ya(t),rnrefreshcontrol:ya(ye),rnsafeareaview:ya(ve),rnscrollview:ya(Ie),rnsectionlist:ya(Vn),rnstatusbar:ya(Un),rnswitch:ya($o),rntext:ya(zo),rntextinput:ya(Ho),rntouchablehighlight:ya(qo),rntouchableopacity:ya(Go),rntouchablewithoutfeedback:ya(Xo),rnview:ya(ua),rnvirtualizedlist:ya(Br)};function va(e){return(va="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wa(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Oa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wa(Object(r),!0).forEach(function(e){Pa(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wa(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ca(){return(Ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ka(e,t){return(ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ja=r(23),xa=r(10);Pa(qo=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ka(e,t)}(t,to);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Ea(r),t=n?(t=Ea(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==va(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return Sa(t.prototype,[{key:"getStyle",value:function(e,t,r){var n=to.getStyle(e,t,r);return["marginTop","marginBottom","marginLeft","marginRight","width","height"].forEach(function(e){return n[e]&&(n[e]=parseFloat(n[e]))}),n}},{key:"getCustomStyle",value:function(e,r){if(to.getCustomStyle(e,r),r){var t,n=["margin","padding","width","height","bottom","top","left","right","flex","zIndex","radius"];for(t in r)!function(t){n.forEach(function(e){!t.toLowerCase().includes(e)||(e=parseFloat(r[t]))&&(r[t]=e)})}(t)}}},{key:"createControl",value:function(e,t,r){var l=r.model,s=r.data,n=r.errors,o=r.parentItem,c=r.buildermode,a=r.children,i=r.handleEvent,u=r.getAdditionalDataForControl,p=r.getFormFunc,f=r.hideControls,d=r.readOnlyControls,h=r.readOnly,m=r.disableRefs,y=r.uploadUrl,b=r.downloadUrl,v=r.extendedData,g=r.controlsToReplace,w=r.needCheckReplace,O=r.eventOnEdit,C=r.eventOnDelete,S=r.eventOnCopy,k=r.externalControlRender,E=r.externalControlList,P=r.adaptiveViewType,j=r.formData,x=void 0,_={key:l.key,name:l.key,style:this.getStyle(l,c,P),"data-buildertype":l["data-buildertype"],propertyName:l.propertyName||l.key};_.key||console.log(l);var R=_["data-buildertype"],D=w||g.includes(l.key);c&&this.isContainer(_["data-buildertype"])&&(_.isContainer=!0),m||(_.ref=l.key),void 0!==l.readOnly&&(_.readOnly=l.readOnly),(h||Array.isArray(d)&&d.includes(l.key))&&(_.readOnly=!0);var T=po.regexForReplace,r=function n(e){if(!D||null==e||c)return e;function o(e){return null!=j?"row."===e.slice(1,5)?to.getFormattedDate(e.slice(5,e.length-1),s):to.getFormattedDate(e.slice(1,e.length-1),j):to.getFormattedDate(e.slice(1,e.length-1),s)}if(Array.isArray(e)){var a=[],i=!1;return e.forEach(function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(void 0!==e[t]&&null!==e[t]&&"string"==typeof e[t]?(r[t]=e[t].replace(T,o),!i&&w&&r[t]!==e[t]&&(i=!0)):Array.isArray(e[t])?r[t]=n(e[t]):r[t]=e[t]);a.push(r)}),i&&g.push(l.key),a}if("string"!=typeof e)return e;var t=e.replace(T,o);return w&&e!==t&&g.push(l.key),t};if(void 0!==s&&(l.propertyName?_.value=s[l.propertyName]:_.value=s[_.key]),null!=n&&(l.propertyName?_.error=n[l.propertyName]:_.error=n[_.key]),t===Zr)"header"===R?(_.content=r(l.content),_.subheader=r(l.subheader)):"label"===R?_.content=r(l.content):"message"===R?(_.content=r(l.content),_.header=r(l.header),_.fluid=r(l.fluid)):"image"===R?(_.src=r(l.src),_.href=r(l.href)):"breadcrumb"===R?_.items=r(l.items):"button"===R&&(_.content=r(l.content)),x=z.a.createElement(Zr,Ca({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o,uploadUrl:y,downloadUrl:b}}));else if(t===ur)_.format=l.format,_.mask=l.mask,_.thousandSeparator=l.thousandSeparator,_.prefix=l.prefix,_.suffix=l.suffix,_.keyboardType=l.keyboardType,x=z.a.createElement(ur,Ca({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o,uploadUrl:y,downloadUrl:b}}));else if(t===Fo)x=this.getControlJsx(t,_,{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o,uploadUrl:y,downloadUrl:b});else if(t===Xe)_.label=l.label,_.defaultValue=l.defaultValue,_.placeholder=l.placeholder,_.disabled=l.disabled,_.fluid=l.fluid,_.selection=l.selection,_.multiple=l.multiple,_.search=l.search,_.dataModel=l.dataModel,_.clearable=l.clearable,_.columns=l.columns,_.paging=l.paging,_.pageSize=l.pageSize,_.getAdditionalDataForControl=u,_.filters=r(l.filters),_.textAsValue=l.textAsValue,l.text&&(_.textFunc=new Function("data","return ".concat(l.text,";"))),n&&void 0!==n[l.key]&&(_.error=n[l.key]),_.handleEvent=i,_.parentIsForm=to.isForm(o),x=z.a.createElement(Xe,_);else if(t===it)_.defaultValue=l.defaultValue,_.items=l.items,_.imageUrl=l.imageUrl,_.handleEvent=i,x=z.a.createElement(it,_);else if(t===Wr)_.url=l.url,_.category=l.category,_.placeholder=l.placeholder,_.handleEvent=i,x=z.a.createElement(Wr,_);else if(t===br){var F=[];void 0!==l["data-elements"]&&(F=Array.isArray(l["data-elements"])?l["data-elements"]:be.a.parse(l["data-elements"])),_.handleEvent=i,n&&void 0!==n[l.key]&&(_.error=n[l.key]),x=z.a.createElement(br,Ca({},_,{label:l.label,direction:l.direction,placeholder:l.placeholder,items:F}))}else if(t===_e){if(_.columns=l.columns,_.draggable=l.draggable,_.hierarchical=l.hierarchical,_.parentIdField=l.parentIdField,_.idField=l.idField,_.childrenField=l.childrenField,_.collapseAll=l.collapseAll,_.disableAdd=l.disableAdd,_.disableCopy=l.disableCopy,_.disableDelete=l.disableDelete,_.placeholders=xa(l.placeholders),_.getAdditionalDataForControl=u,_.placeholders&&(_.data=s,_.adaptiveViewType=P,_.controlBarParams={adaptiveViewType:P,eventOnDelete:C,eventOnEdit:O,eventOnCopy:S,parentComponent:e},_.createControl=this.createCollectionEditorControl.bind(this)),_.handleEvent=i,_.downloadUrl=b,_.uploadUrl=y,c&&void 0===_.value&&void 0!==_.columns){_.buildermode=c,_.createBuilderDropzone=to.createBuilderDropzone,_.value=[];for(var A=0;A<5;A++)_.value.push({});if(Boolean(l.hierarchical)&&void 0!==l.parentIdField&&""!==l.parentIdField&&void 0!==l.idField&&""!==l.idField)for(var I=1;I<5;I++){var L=_.value[I];void 0===L[l.idField]&&(L[l.idField]=I);for(var N=0;N<2;N++){var B={};B[l.parentIdField]=L[l.idField],_.value.push(B)}}}void 0!==v&&void 0!==v.filters&&void 0!==v.filters[_.key]&&(_.filter=new It(v.filters[_.key],_.columns.map(function(e){return e.key}))),x=z.a.createElement(_e,_)}else if(t===ar)_["data-items"]=r(l.items),_.pointing=l.pointing,_.secondary=l.secondary,_.tabular=l.tabular,_.fluid=l.fluid,_.vertical=l.vertical,_.activeitem=l.activeitem,_.link=l.link,_.handleEvent=i,x=z.a.createElement(ar,_);else if(t===bn)_["data-panes"]=l.panes,_.pointing=l.pointing,_.secondary=l.secondary,_.tabular=l.tabular,_.fluid=l.fluid,_.vertical=l.vertical,_.activeitem=l.activeitem,_.placeholders=l.placeholders,this.setCreateControlsProps(_,{data:s,buildermode:c,model:l,children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:m,uploadUrl:y,downloadUrl:b,extendedData:v,controlsToReplace:g,eventOnEdit:O,eventOnDelete:C,eventOnCopy:S,adaptiveViewType:P,handleEvent:i,externalControlList:E,externalControlRender:k,needCheckReplace:w,readOnly:h,hideControls:f,readOnlyControls:d,errors:n}),x=z.a.createElement(bn,_);else if(t===Bn)_.blockSetState=l.blockSetState,_.blockCommands=l.blockCommands,_.setStateButton=l.setStateButton,_.handleEvent=i,_.getAdditionalDataForControl=u,_.blockLoadParameters=void 0===l.blockLoadParameters||l.blockLoadParameters,_.blockSelectScheme=l.blockSelectScheme,_.selectSchemeDropdown=l.selectSchemeDropdown,s&&(_.selectedScheme=s.__wf_selectedscheme),_.schemes=v&&v.schemes||[],n&&void 0!==n[l.key]&&(_.error=n[l.key]),c&&(_.commands=[{value:"approve",text:"Approve",type:1},{value:"back",text:"Back",type:2}],_.states=[{value:"draft",text:"Draft"},{value:"state1",text:"State 1"},{value:"state2",text:"State 2"},{value:"state3",text:"State 3"},{value:"finish",text:"Finish"}],_.schemes=[]),x=z.a.createElement(Bn,_);else if(t===Ae){if(_.style&&"flex"===l["style-display"]&&(l["style-display-horizontalalign"]&&(_.style.justifyContent=l["style-display-horizontalalign"]),l["style-display-verticalalign"]?_.style.alignItems=l["style-display-verticalalign"]:_.style.alignItems="baseline"),_.childrenView=l.childrenView,o&&o["children-style-source"]){var V,M={};for(V in this.getCustomStyle(o["children-style-source"],M),M)_.style[V]||(_.style[V]=M[V])}delete _.propertyName,x=z.a.createElement(Ae,Ca({},_,{children:a}))}else t===jr?(_.slider=l.slider,_["item-visibleCondition"]=l["item-visibleCondition"],_.pageSize=l.pageSize,_.pagerType=l.pagerType,_.loadButtonLabel=l.loadButtonLabel,_.noRecordsLabel=l.noRecordsLabel,_.defaultSort=l.defaultSort,void 0!==v&&void 0!==v.filters&&void 0!==v.filters[_.key]&&(_.filter=new It(v.filters[_.key],["*"])),_.placeholders=xa(l.placeholders),_.controlProps={readOnly:"server"===l.pagerType||h},_.model=l,_.data=s,F=_.controlProps,this.setCreateControlsProps(F,{children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:m,uploadUrl:y,downloadUrl:b,extendedData:v,controlsToReplace:g,eventOnEdit:O,eventOnDelete:C,eventOnCopy:S,adaptiveViewType:P,handleEvent:i,externalControlList:E,externalControlRender:k,hideControls:f,readOnlyControls:d,buildermode:c}),_.childrenView=l.childrenView,x=z.a.createElement(jr,_)):t===pn?(_.content=r(l.content),_.isHtml=l.isHtml,x=z.a.createElement(pn,_)):t===ft?(_.iconFiletypes=l.iconFiletypes,_.postUrl=y,_.showFiletypeIcon=l.showFiletypeIcon,_.autoProcessQueue=l.autoProcessQueue,_.addRemoveLinks=l.addRemoveLinks,x=z.a.createElement(ft,Ca({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===_t?(_.iconFiletypes=l.iconFiletypes,_.postUrl=y,_.showFiletypeIcon=l.showFiletypeIcon,_.autoProcessQueue=l.autoProcessQueue,_.useDropzone=l.useDropzone,_.columns=l.columns,_.idField=l.idField,_.downloadUrl=b,x=z.a.createElement(_t,Ca({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===fe?(_.downloadUrl=b,_.uploadUrl=y,_.showPreview=l.showPreview,_.compact=l.compact,_.compression=l.compression,_.label=l.label,_.shotLabel=l.shotLabel,_.galleryLabel=l.galleryLabel,_.openLabel=l.openLabel,_.clearLabel=l.clearLabel,_.getAdditionalDataForControl=u,null!=i&&(_.onChange=function(e,t){var r=t.name,n=t.value,t=t.parameters;i({syntheticEvent:e,key:_.name,propertyName:_.propertyName,eventName:"onChange",name:r,value:n,parameters:t})}),x=z.a.createElement(fe,Ca({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===an?(_.downloadUrl=b,_.uploadUrl=y,_.showPreview=l.showPreview,_.compact=l.compact,_.label=l.label,_.drawLabel=l.drawLabel,_.clearCanvasLabel=l.clearCanvasLabel,_.uploadLabel=l.uploadLabel,_.openLabel=l.openLabel,_.clearLabel=l.clearLabel,_.getAdditionalDataForControl=u,null!=i&&(_.onChange=function(e,t){var r=t.name,n=t.value,t=t.parameters;i({syntheticEvent:e,key:_.name,propertyName:_.propertyName,eventName:"onChange",name:r,value:n,parameters:t})}),x=z.a.createElement(an,Ca({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===Sn?(_.header=r(l.header),_.subheader=r(l.subheader),_.imgurl=r(l.imgurl),_.placeholders=l.placeholders,_.activeEvent=l.events&&l.events.onClick&&l.events.onClick.active,this.setCreateControlsProps(_,{data:s,buildermode:c,model:l,children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:m,uploadUrl:y,downloadUrl:b,extendedData:v,controlsToReplace:g,eventOnEdit:O,eventOnDelete:C,eventOnCopy:S,adaptiveViewType:P,handleEvent:i,externalControlList:E,externalControlRender:k,needCheckReplace:w,readOnly:h,hideControls:f,readOnlyControls:d,errors:n}),x=z.a.createElement(Sn,_)):((k=k||function(){if(window.DWKitFormSettings)return window.DWKitFormSettings.externalControlRender}())&&(_.parentIsForm=to.isForm(o),x=k(e,t,{model:l,data:s,errors:n,parentItem:o,buildermode:c,children:a,handleEvent:i,getAdditionalDataForControl:u,hideControls:f,readOnlyControls:d,readOnly:h,disableRefs:m,uploadUrl:y,downloadUrl:b,extendedData:v,controlsToReplace:g,needCheckReplace:w,eventOnEdit:O,eventOnDelete:C,eventOnCopy:S,controlProps:_,replaceControlValue:r})),x||console.error("Control is unsupported!",t,l));return x}},{key:"isContainer",value:function(e){return he(t.containers[e])}},{key:"getPlatformContainerControl",value:function(){return Ao.View}},{key:"getControlJsx",value:function(e,t,r){var n=r.model,o=(r.data,r.errors,r.children),a=(r.handleEvent,r.parentItem,r.uploadUrl,r.downloadUrl,n["data-buildertype"]),i=ba[a];return i?(r=Object.assign({},i.defaultProps),he(o)&&(r.children=o),a=i.renderer,o=i.getDataProps?i.getDataProps(n):{},(o=Oa(Oa(Oa({},ja(r,t)),this.getControlProps(n,i.propertyTypes)),o)).className&&delete o.className,z.a.createElement(a,o)):K("null-control",{key:n.key,text:"".concat(a," is unsupported")})}},{key:"getControlProps",value:function(e,t){var r,n=e&&e["control-model"]||{},o={},a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return ga(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ga(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;he(n[i.name])&&(o[i.name]=n[i.name])}}catch(e){a.e(e)}finally{a.f()}return o}},{key:"createCollectionEditorControl",value:function(e,t,r,n){if(a=this.getControlByType(t)){var o=this.createControl(e,a,Oa(Oa({},r),{},{needCheckReplace:!0})),a=[];return r.buildermode?(n=z.a.createElement(Gn,{key:r.model.key+"_controlbar",model:r.model,parent:n.parentComponent,onDelete:n.eventOnDelete,onEdit:n.eventOnEdit,onCopy:n.eventOnCopy,control:o}),a.push(n),a):o}console.error("Control is unsupported!",t,e,r)}}]),t}(),"containers",{form:"",formgroup:"",grid:"",gridcolumn:"",container:"",rnview:"",View:"",repeater:""}),Go=new qo,d("collection-camera",function(e){return z.a.createElement(fe,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,downloadUrl:e.props.downloadUrl,uploadUrl:e.props.uploadUrl,additionalData:e.props.additionalData,additionalDataContext:e.props.row,getAdditionalDataForControl:e.props.getAdditionalDataForControl,showPreview:!0,compact:!0,fluid:!0,isForm:!0})}),d("collection-signature",function(e){return z.a.createElement(an,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,downloadUrl:e.props.downloadUrl,uploadUrl:e.props.uploadUrl,additionalData:e.props.additionalData,additionalDataContext:e.props.row,getAdditionalDataForControl:e.props.getAdditionalDataForControl,showPreview:!0,compact:!0,fluid:!0,isForm:!0})});var _a=r(2);function Ra(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Da(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ra(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ra(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var Xo=Ao.Dimensions.get("window").width,Ta=Ao.StyleSheet.create({buttonTitle:{fontSize:14},primary:{backgroundColor:"#1262E2"},dwkitFormBuilderHeader:{flex:1,flexDirection:"row",paddingLeft:20,paddingRight:20,height:80},dwkitFormBuilderHeaderLeft:{marginTop:12,width:200,justifyContent:"center"},dwkitFormBuilderHeaderCenter:{marginTop:18,marginRight:3.5,flexDirection:"row",paddingLeft:21,paddingRight:21,justifyContent:"space-between",minWidth:425},dwkitFormBuilderHeaderRight:{paddingRight:4,flex:1,flexDirection:"row-reverse",alignItems:"flex-end",justifyContent:"flex-start",alignSelf:"center",maxWidth:200,marginLeft:"auto"},dwkitFormBuilderHeaderButton:{height:38,minWidth:78},dwkitFormBuilder:{flexDirection:"row"},dwkitFormBuilderContent:{zIndex:1,flexGrow:1,margin:15,width:"calc(100% - 230px)"},dwkitFormBuilderToolbar:{width:200},dwkitFormBuilderZone:{alignItems:"center",padding:8,paddingTop:7,borderStyle:"dashed",borderWidth:1,borderColor:"rgba(0, 0, 0, 0.1)",marginTop:8,marginBottom:8,backgroundColor:"#F4F4F4",height:28},dwkitFormBuilderZoneActive:{backgroundColor:"lightblue"},dwkitFormBuilderZoneHover:{backgroundColor:"blue"},dwkitFormBuilderZoneText:{fontSize:10,fontWeight:"bold",color:"rgba(46, 46, 46, 0.4)"},dwKitModalBody:{padding:20,minWidth:860,backgroundColor:"white",margin:"auto"},dwKitModalHeader:{flexDirection:"row-reverse"},dwKitModalContent:{flexWrap:"wrap",flex:1},dwKitModalActions:{flexDirection:"row",alignSelf:"flex-end",marginTop:20},dwKitModalComponentName:{fontSize:12,backgroundColor:"#e8e8e8",color:"rgba(0, 0, 0, .6)",fontWeight:"700",borderRadius:4,padding:4,margin:4},formGroupEqual:{flexGrow:1,marginBottom:10,marginTop:10,flexDirection:"row"},formGroup:{flexGrow:1,flexWrap:"wrap",alignItems:"stretch"},dragView:Da({left:0,top:0,width:"100%",height:"100%",zIndex:-1e3},Ao.Platform.select({web:{overflow:"auto",position:"fixed"}})),dwKitMessage:{flexDirection:"row",marginBottom:14,alignItems:"center",paddingTop:14,paddingBottom:14,paddingLeft:21,paddingRight:21,borderStyle:"solid",borderWidth:1,borderRadius:4,borderColor:"#cecfcf"},dwKitMessageContent:{marginLeft:15},dwKitMessageIcon:{width:32,height:32},formGroupWidthEqual:{flexGrow:1},emptyView:{backgroundColor:"#EEF4FD",padding:5,marginTop:5,marginBottom:5},emptyText:{color:"#9B9B9B",textAlign:"center"},fullSize:{width:"100%"},halfSize:{flexDirection:"row",width:"50%"},itemContainer:{backgroundColor:"rgba(0,0,0,0.02)",borderStyle:"solid",borderWidth:1,borderColor:"rgba(18, 98, 226,0.5)",padding:"16px",marginLeft:"0",marginRight:"0",overflow:"hidden"},controlWrapper:{flexGrow:1},controlWrapperHovered:Da({},Ao.Platform.select({web:{outlineStyle:"solid",outlineWidth:2,outlineColor:"rgba(242, 77, 0, 0.5)"}}))});Ta.controlWrapper={flexGrow:1,hovered:{borderStyle:"solid",borderWidth:1,borderColor:"rgba(242, 77, 0, 0.5)"}},Ta.baseMargin={marginBottom:5},Ta.controlParams=function(e){return{style:{flexGrow:e.fluid?1:0,alignSelf:e.fluid?"stretch":e.floated||"flex-start"},props:{appearance:e.secondary?"outline":"filled",status:e.primary||e.secondary?"primary":"basic"}}},Ta.eventsEditor={actions:{flexGrow:1,width:240,maxWidth:240},parameters:{flexGrow:1,width:450,maxWidth:450,marginRight:12},targets:{flexGrow:1,width:240,maxWidth:240},addButton:{appearance:"outline",status:"basic",size:"tiny",style:{padding:5,marginLeft:15,marginRight:40,marginTop:5,backgroundColor:"rgb(247, 249, 252)",borderColor:"rgb(228, 233, 242)"}}},ua={flexGrow:1},Ta.layout={elementInRow:{marginRight:10},elementInColumn:{marginBottom:10}},Ta.controls={button:Da({},ua),tabBarChild:{marginTop:20},dropzonePopover:{container:{boxShadow:"rgba(18, 83, 204, 0.12) 0px 6px 10px"}},dropdown:Da({select:Da(Da({},ua),{},{marginLeft:0,marginRight:0,flexShrink:1}),labels:{container:{display:"flex",flexWrap:"wrap",flexDirection:"row"},backdrop:{borderRadius:4,margin:1,padding:4,paddingTop:0,paddingBottom:4,backgroundColor:"color-primary-default"},text:{color:"white"}}},ua),tooltip:{container:{maxWidth:400<Xo?Xo/2:Xo-20},title:{textAlign:"center"}},dropzoneModalIcons:{width:20,height:20},dwKitInput:Da({marginBottom:5},ua),dwKitCheckBox:{marginRight:5,marginTop:5,marginBottom:5}},Ta.repeater=Ao.StyleSheet.create({container:{}}),Ta.controlBar={container:{marginTop:4,padding:4,paddingRight:8,paddingLeft:8,flexDirection:"row",justifyContent:"flex-end",opacity:.2,zIndex:100,right:0,position:"absolute",backgroundColor:"white",borderRadius:20},iconTouchable:{marginLeft:8},icon:{top:2,width:15,height:15}},Ta.controlBar.containerHovered=Ao.StyleSheet.compose(Ta.controlBar.container,{opacity:1,boxShadow:"0px 6px 10px rgba(18, 83, 204, 0.12), 0px 1px 18px rgba(18, 83, 204, 0.12), 0px 3px 5px rgba(18, 83, 204, 0.15)"}),Ta.formGroupWidthCustom=[];for(var Fa=1;Fa<=16;Fa++)Ta.formGroupWidthCustom[Fa]=Ao.StyleSheet.create({style:{width:"".concat(6.25*Fa,"%")}});Ta.toolbarCssStyles={sectionItem:Da({cursor:"grab",listStyle:"none",margin:"4px",marginTop:"7.5px",marginBottom:"7.5px",padding:"6px",paddingLeft:"16px",border:"1px solid #FFFFFF",borderRadius:"2px",fontFamily:"'Lato', 'sans-serif'",fontSize:"14px",color:"rgba(255, 255, 255, 0.8)"},Ao.StyleSheet.flatten(Ta.primary))},Ta.toolbarStyles=Ao.StyleSheet.create({container:Ao.StyleSheet.flatten(Ta.primary),sectionList:{padding:10,paddingTop:0},sectionText:{color:"rgba(255, 255, 255, 0.8)"},sectionIcon:{width:22,height:22},toolbarTextView:{flexDirection:"row",flexShrink:1,alignItems:"center"},toolbarIconView:{flexDirection:"row-reverse",flexGrow:1,marginLeft:6},sectionHeader:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},sectionHeaderText:{fontSize:16,fontWeight:"bold",padding:6,marginTop:5,marginBottom:5,color:"rgba(255, 255, 255, 1)"},searchContainer:{padding:10,paddingBottom:0},searchResults:{margin:6,opacity:.8}}),Ta.toolbarIconProps={size:14,color:"rgba(255, 255, 255, 0.8)"},Ta.dwKitModalOverlayProps={overlayStyle:{left:0,top:0,width:"100%",height:"100%",overflow:"auto",position:"fixed",backgroundColor:"rgba(255, 255, 255, .35)"},containerStyle:{left:0,top:0,width:"100%",height:"100%",overflow:"auto",position:"fixed"},borderColor:"rgba(0, 0, 0, 1)"},Ta.dwKitButtonProps={containerStyle:{marginRight:4,marginLeft:12},type:"outline"},Ta.grouped={inColumn:{control:{marginLeft:16,marginRight:16},dropzone:{container:{marginTop:0,flexDirection:"row",alignItems:"center"}}}},Ta.dwKitInputProps={containerStyle:{marginBottom:14,flex:1},labelStyle:{fontSize:13,fontWeight:"700",color:"black",marginBottom:4},inputContainerStyle:{borderWidth:1,borderStyle:"solid",borderColor:"rgba(34, 36, 38, .15)",borderRadius:4},inputStyle:{paddingLeft:14,paddingRight:14,paddingTop:9.5,paddingBottom:9.5,fontSize:14,fontWeight:"400",minHeight:38}},Ta.dwKitDisabledInputProps={labelStyle:Da(Da({},Ta.dwKitInputProps.labelStyle),{},{color:"#d2d2d2"})},Ta.dwKitCheckDisabledProps={titleProps:{style:{color:"#d2d2d2"}},checkedColor:"#d2d2d2",uncheckedColor:"#d2d2d2"},Ta.dwKitFocusedInputProps={inputContainerStyle:{borderWidth:1,borderStyle:"solid",borderColor:"#85b7d9",borderRadius:4}},Ta.dwKitCheckBoxProps={checkedColor:"black",size:20,containerStyle:{backgroundColor:"white",borderWidth:0,paddingTop:0,paddingBottom:0,paddingLeft:7,paddingRight:7,marginBottom:14},titleProps:{style:{fontSize:14,fontWeight:"500"}}},Ta.dwKitTextareaProps={multiline:!0,numberOfLines:4},Ta.dwKitDropdown={labelStyle:Ta.dwKitInputProps.labelStyle,containerStyle:{paddingLeft:10,paddingRight:10,marginBottom:14,flex:1},dropdown:{style:{borderWidth:1,borderStyle:"solid",borderColor:"rgba(34, 36, 38, .15)",borderRadius:4}}},Ta.dwKitRadioGroup={labelStyle:Ta.dwKitInputProps.labelStyle,containerStyle:Ta.dwKitDropdown.containerStyle},Ta.collectionEditor={container:{flexGrow:1},column:{notLast:{paddingRight:10}},editButtonsColumn:{flexDirection:"row",margin:"auto",marginLeft:0,marginRight:0},editButton:{height:30},icon:{width:20,height:20,marginTop:10},dragIcon:{backgroundImage:"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iYmxhY2siIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMFYweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0xMSAxOGMwIDEuMS0uOSAyLTIgMnMtMi0uOS0yLTIgLjktMiAyLTIgMiAuOSAyIDJ6bS0yLThjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wLTZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem02IDRjMS4xIDAgMi0uOSAyLTJzLS45LTItMi0yLTIgLjktMiAyIC45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wIDZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yeiIvPjwvc3ZnPg==)",backgroundRepeat:"no-repeat",backgroundSize:"contain",opacity:.6,backgroundPosition:"right",width:15,height:15,cssFloat:"inherit"},input:Da({minWidth:50,width:"100%"},ua),addLinkProps:{style:{color:"rgb(242, 77, 0)",fontWeight:"700"}},image:{style:{width:15,height:15}},droppable:{defaultStyle:{backgroundColor:"transparent"},activeStyle:{backgroundColor:"#ffff0059"},hoverStyle:{backgroundColor:"lightgreen"}}},Ta.dictionaryEditor={iconProps:{size:14,containerStyle:{marginLeft:4}}},Ta.containerView={base:{alignSelf:"stretch",flexGrow:1},rows:{flexDirection:"column"},columns:{display:"flex",flexDirection:"row"},columnswrap:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"flex-start"}};var Aa=Ta;function Ia(){return(Ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function La(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Na(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?La(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):La(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ba(e){var t=!0===e.disabled?Aa.dwKitCheckDisabledProps:{},t=Na(Na(Na({},e),Aa.dwKitCheckBoxProps),t);return e.error&&(t.status="danger"),t.style=[Aa.controls.dwKitCheckBox,t.style],z.a.createElement(_a.CheckBox,Ia({},t,{checked:!!t.checked,children:e.label}))}function Va(e){var t=Object.assign({},e);return t.style=Object(_a.useStyleSheet)(_a.StyleService.create({st:t.style})).st,z.a.createElement(Ao.View,t,e.children)}function Ma(e){return(Ma="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Ua(){return(Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function za(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}d("collection-checkbox",function(e){return z.a.createElement(Ba,{name:e.props.colName,checked:e.props.checked,error:e.props.errorFlag,disabled:e.props.disabled,onChange:function(){e.me.handleChange(null,{name:e.props.colName,checked:!e.props.checked})}})}),d("collection-custom-control",function(e){var t=e.props.model;return e.props.createControl(e.props.parent,t["data-buildertype"],{model:t,data:e.props.row,errors:e.props.errorOnRow,parentItem:e.props.name,buildermode:e.props.buildermode,handleEvent:e.handleEvent,getAdditionalDataForControl:e.getAdditionalDataForControl,readOnly:e.props.readOnly,uploadUrl:e.props.uploadUrl,downloadUrl:e.props.downloadUrl,controlsToReplace:[],formData:e.props.data,adaptiveViewType:e.props.adaptiveViewType},e.props.controlBarParams)}),d("collection-date-time",function(e){return z.a.createElement(qe,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,disabled:e.props.disabled,onChange:e.me.handleChange,type:e.props.type})});var Ha=r(7),qa=function(t,r,e){var n=void 0;return e?(n=[],Array.isArray(t)&&t.forEach(function(t){var e=r.findIndex(function(e){return e.value===t});void 0===e&&(r.push({text:t,value:t}),e=r.length-1),n.push(new _a.IndexPath(e))})):0<=(e=r.findIndex(function(e){return e.value===t}))&&(n=new _a.IndexPath(e)),n},Ga=function(e,t,r){if(void 0!==e){if(r&&Array.isArray(e)){var n=[];return Array.isArray(e)&&e.forEach(function(e){0<=e.row&&n.push(t[e.row].value)}),n}return void 0!==e.row&&t[e.row]?t[e.row].value:t[e]?t[e].value||t[e].text||t[e]:void 0}},Ja=function(t,r,e,n){var o,a;return void 0===t||Array.isArray(t)&&!t.length?a=function(e){return z.a.createElement(_a.Text,{appearance:"hint"},n||"")}:"string"==typeof t||"number"==typeof t?a=(o=r.find(function(e){return e.value===t}))?o.text:t:e&&(a=z.a.createElement(Ao.View,{style:Aa.controls.dropdown.labels.container},t.map(function(t){var e=r.find(function(e){return e.value===t});return e&&z.a.createElement(Va,{style:Aa.controls.dropdown.labels.backdrop},z.a.createElement(_a.Text,{children:e.text,style:Aa.controls.dropdown.labels.text}))}))),{value:a}},$a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(i,z.a.Component);var r,n,a=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Wa(r),t=n?(t=Wa(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Ma(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function i(e){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this);var t=a.call(this,e),r=Array.isArray(e.options)?e.options:[];e.clearable&&r.unshift({text:"",value:void 0});var n=qa(e.value,r,e.multiple),o=Ga(n,r,e.multiple);return t.state={ids:n,value:o,preview:Ja(o,r,e.multiple,e.placeholder)},t.onValueChange=e.onValueChange,e.onChange&&(t.onValueChange=e.onChange),t}return za(i.prototype,[{key:"onSelect",value:function(e){var t=(r=[this.state,this.props])[1],r=Ga(e,t.options,t.multiple);this.props.onSelect&&this.props.onSelect(e),this.onValueChange(r),this.setState({value:r}),this.setState({ids:qa(r,t.options,t.multiple)}),this.setState({preview:Ja(r,t.options,t.multiple,t.placeholder)})}},{key:"onChangeText",value:function(t){var e=this.props.options;this.setState({preview:{value:t}}),this.setState({options:t?e.filter(function(e){return e.text&&e.text.toLowerCase().includes(t.toLowerCase())}):e})}},{key:"componentDidUpdate",value:function(){var e=[this.props,this.state],t=e[0],r=e[1];Ha(r.value,t.value)&&Ha(r.options,t.options)||(e=qa(t.value,t.options,t.multiple),r=Ga(e,t.options,t.multiple),this.setState({options:t.options,value:t.value,ids:e,preview:Ja(r,t.options,t.multiple,t.placeholder)}))}},{key:"render",value:function(){var e=this.props,t=Ao.StyleSheet.flatten([Aa.controls.dropdown.select,e.style]),r=e.search?_a.Autocomplete:_a.Select,n=e.search?_a.AutocompleteItem:_a.SelectItem;return z.a.createElement(r,Ua({status:this.props.error?"danger":void 0,label:e.label,style:t},this.props,{multiSelect:e.multiple,placeholder:e.placeholder||"",selectedIndex:this.state.ids},this.state.preview,{prompt:e.placeholder,onSelect:this.onSelect.bind(this),onChangeText:this.onChangeText.bind(this)}),this.props.options.map(function(e){var t=e.text||e.title;return z.a.createElement(n,Ua({key:t=t||("string"==typeof e?e:""),title:t},void 0))}))}},{key:"getMaterialCommunityIconsIcon",value:function(e){return"lightning"==e?"language-javascript":"browser"==e?"file-document-outline":e}}]),i}();function Ya(){return(Ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qa(e,t){if(!e)return t;switch(e){case"mini":return 8;case"tiny":return 12;case"small":return 16;case"medium":return 24;case"large":return 32;case"huge":return 48;default:return t}}function Za(e){e.className&&delete e.className}function Xa(){return(Xa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ei(e){return z.a.createElement(_a.Text,Xa({style:Ao.StyleSheet.compose(e.style,{paddingBottom:4}),category:"label",appearance:"hint"},e))}function ti(e){return(ti="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function ri(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ni(){return(ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ai(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ii(e,t,r){return t&&ai(e.prototype,t),r&&ai(e,r),e}function li(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&si(e,t)}function si(e,t){return(si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ci(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e=ui(r),t=n?(t=ui(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ti(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t}}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}d("collection-dropdown",function(t){var e=Aa.controlParams(t.props),r=Object.assign({},t.props);return r.style=[e.style,t.props.style],t.props.onChange&&(r.onValueChange=function(e){return t.props.onChange(null,{name:r.name,value:e})}),delete r.onChange,z.a.createElement($a,Ya({name:t.props.colName,multiple:t.props.multiple,placeholder:t.props.placeholder,options:t.props.options,error:t.props.errorFlag,value:t.props.value,disabled:t.props.readOnly},r))}),d("label",function(e){var t={backgroundColor:"#e8e8e8",fontSize:Qa(e.model.size,14),paddingLeft:10,paddingRight:10,paddingTop:7,paddingBottom:7,marginLeft:2,marginRight:2};return!0===e.model.basic&&(t.backgroundColor="#fff",t.borderColor="rgba(34,36,38,.15)",t.borderWidth=1,t.borderStyle="solid"),e.model.circular&&(t.borderRadius="500rem"),z.a.createElement(Ao.View,{style:{flexDirection:"row"}},z.a.createElement(ei,Xa({},e.propsControl,{style:Ao.StyleSheet.compose(t,e.propsControl.style)}),e.props.content))});var pi=Ao.StyleSheet.create({tr:{flexDirection:"row",alignContent:"stretch",flexGrow:1},td:{flexDirection:"row",flexGrow:1},tHeader:{flexDirection:"row",alignContent:"stretch",flexGrow:1},tBody:{maxWidth:"100%"},table:{alignContent:"stretch"}}),fi=z.a.createContext({style:{}}),Br=function(){li(t,c.Component);var e=ci(t);function t(){return oi(this,t),e.apply(this,arguments)}return ii(t,[{key:"render",value:function(){var e=100/this.props.children.length+"%",e={style:Ao.StyleSheet.compose({maxWidth:e},this.props.style)};return z.a.createElement(fi.Provider,{value:e},z.a.createElement(Ao.View,ni({},this.props,{style:pi.tr})))}}]),t}(),qo=function(){li(t,c.Component);var e=ci(t);function t(){return oi(this,t),e.apply(this,arguments)}return ii(t,[{key:"render",value:function(){var t=this;return z.a.createElement(fi.Consumer,null,function(e){return e=e.style,z.a.createElement(Ao.View,ni({},t.props,{style:Ao.StyleSheet.compose([pi.td,e],t.props.style)}))})}}]),t}(),Xo=function(){li(t,c.Component);var e=ci(t);function t(){return oi(this,t),e.apply(this,arguments)}return ii(t,[{key:"render",value:function(){return z.a.createElement(Ao.View,ni({},this.props,{style:pi.tbody}))}}]),t}(),ua=function(){li(t,c.Component);var e=ci(t);function t(){return oi(this,t),e.apply(this,arguments)}return ii(t,[{key:"render",value:function(){return z.a.createElement(Ao.View,ni({},this.props,{style:pi.tHeader}))}}]),t}(),di=function(){li(t,c.Component);var e=ci(t);function t(){return oi(this,t),e.apply(this,arguments)}return ii(t,[{key:"render",value:function(){return z.a.createElement(Ao.View,ni({},this.props,{style:pi.table}))}}]),t}();function hi(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return mi(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mi(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ri(di,"Tr",Br),ri(di,"Td",qo),ri(di,"THeader",ua),ri(di,"TBody",Xo);var vi=(yi(wi.prototype,[{key:"registerDroppable",value:function(e,t){var r=this.droppables.indexOf(e);if(0<=r)return this.droppables[r]=e,void(this.layouts[r]=t);this.droppables.push(e),this.layouts.push(t)}},{key:"unregisterDroppable",value:function(e){0<=(e=this.droppables.indexOf(e))&&(this.droppables.splice(e,1),this.layouts.splice(e,1))}},{key:"getZoneIndex",value:function(e){for(var t in this.layouts)if(this.layouts.hasOwnProperty(t)){var r=this.layouts[t];if(e.moveY>r.y&&e.moveY<r.y+r.height&&e.moveX>r.x&&e.moveX<r.x+r.width)return t}return null}},{key:"onBeginDrag",value:function(){var e,t=hi(this.droppables);try{for(t.s();!(e=t.n()).done;)e.value.onBeginDrag()}catch(e){t.e(e)}finally{t.f()}}},{key:"onEndDrag",value:function(e,t){var r,n=hi(this.droppables);try{for(n.s();!(r=n.n()).done;)r.value.onEndDrag()}catch(e){n.e(e)}finally{n.f()}null!==(e=this.getZoneIndex(e))&&this.droppables[e].onDrop(t),this.activeIndex=null}},{key:"onMove",value:function(e){(e=this.getZoneIndex(e))!==this.activeIndex&&(null!==this.activeIndex&&this.droppables[this.activeIndex].onLeave(),null!==e&&this.droppables[e].onEnter(),this.activeIndex=e)}},{key:"hideZones",value:function(){var e,t=hi(this.droppables);try{for(t.s();!(e=t.n()).done;)e.value.hide()}catch(e){t.e(e)}finally{t.f()}}},{key:"showZones",value:function(){var e,t=hi(this.droppables);try{for(t.s();!(e=t.n()).done;)e.value.show()}catch(e){t.e(e)}finally{t.f()}}}]),wi),gi=z.a.createContext({setComponent:function(e){}});function wi(){!function(e){if(!(e instanceof wi))throw new TypeError("Cannot call a class as a function")}(this),bi(this,"droppables",[]),bi(this,"layouts",[]),bi(this,"activeIndex",null)}function Oi(e){return(Oi="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Si(e,t){return(Si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ei=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Si(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=ki(r),t=n?(t=ki(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Oi(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).deltaX=0,e.deltaY=0,e}return Ci(o.prototype,[{key:"onLayout",value:function(e){this.deltaX=this.props.pageX-e.nativeEvent.layout.x,this.deltaY=this.props.pageY-e.nativeEvent.layout.y,this.forceUpdate()}},{key:"render",value:function(){var e={transform:this.props.pan.getTranslateTransform(),zIndex:1e3,position:"absolute",left:this.props.pageX+this.deltaX,top:this.props.pageY+this.deltaY};return z.a.createElement(Ao.Animated.View,{style:e,onLayout:this.onLayout.bind(this)},this.props.children)}}]),o}();function Pi(e){return(Pi="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function ji(){return(ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _i(e,t){return(_i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Di(e){return(Di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ti=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_i(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Di(r),t=n?(t=Di(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Pi(t)&&"function"!=typeof t?Ri(e):t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={pan:new Ao.Animated.ValueXY},e.dragging=!1,e.panResponder=Ao.PanResponder.create({onStartShouldSetPanResponder:function(){return!0},onPanResponderGrant:e.onBeginDrag.bind(Ri(e)),onPanResponderMove:e.onMove.bind(Ri(e)),onPanResponderRelease:e.onEndDrag.bind(Ri(e))}),e}return xi(o.prototype,[{key:"onMove",value:function(e,t){return this.props.context.onMove(t),Ao.Animated.event([null,{dx:this.state.pan.x,dy:this.state.pan.y}])(e,t)}},{key:"onBeginDrag",value:function(){var i=this;return!(!this.setDraggableComponent||!this.instance||(this.instance.measure(function(e,t,r,n,o,a){i.dragging=!0,i.props.context.onBeginDrag(),a=z.a.createElement(Ei,ji({},i.props,{pageX:o,pageY:a,pan:i.state.pan})),i.setDraggableComponent(a),i.forceUpdate()}),this.props.onBeginDrag&&this.props.onBeginDrag(),0))}},{key:"onEndDrag",value:function(e,t){this.dragging=!1,this.props.context.onEndDrag(t,this),this.props.onEndDrag&&this.props.onEndDrag(),this.setDraggableComponent(null),Ao.Animated.spring(this.state.pan,{toValue:{x:0,y:0},friction:5,useNativeDriver:!1}).start(),this.forceUpdate()}},{key:"getAnimatedView",value:function(){var e=[{transform:this.state.pan.getTranslateTransform()}];return this.dragging&&e.push({zIndex:1e3,position:"absolute"}),z.a.createElement(Ao.Animated.View,ji({},this.panResponder.panHandlers,{style:e}),this.getChildrenView())}},{key:"getChildrenView",value:function(){return this.props.children}},{key:"draw",value:function(e){return e&&(this.setDraggableComponent=e),this.dragging?this.getChildrenView():this.getAnimatedView()}},{key:"render",value:function(){var t=this;return z.a.createElement(Ao.TouchableOpacity,{ref:function(e){t.instance=e}},z.a.createElement(gi.Consumer,null,function(e){return e=e.setComponent,t.draw(e)}))}}]),o}();function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Ai(){return(Ai=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ii(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Li(e,t){return(Li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ni(e){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bi=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Li(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Ni(r),t=n?(t=Ni(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Fi(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={hovered:!1,waitForEntity:!1},e}return Ii(o.prototype,[{key:"componentWillUnmount",value:function(){this.props.context.unregisterDroppable(this)}},{key:"render",value:function(){var t=this;return z.a.createElement(Ao.View,Ai({},this.props,{onLayout:this.setDropZoneValues.bind(this),ref:function(e){return t.instance=e}}))}},{key:"setDropZoneValues",value:function(e){this.props.context.registerDroppable(this,e.nativeEvent.layout)}},{key:"measure",value:function(){var i=this;this.instance&&this.instance.measure(function(e,t,r,n,o,a){i.props.context.registerDroppable(i,{x:o,y:a,width:r,height:n})})}},{key:"onEnter",value:function(){this.setState({hovered:!0}),this.props.onEnter&&this.props.onEnter()}},{key:"onLeave",value:function(){this.setState({hovered:!1}),this.props.onLeave&&this.props.onLeave()}},{key:"onDrop",value:function(e){this.setState({hovered:!1}),this.props.onDrop&&this.props.onDrop(e)}},{key:"onBeginDrag",value:function(){this.measure(),this.props.onBeginDrag&&this.props.onBeginDrag()}},{key:"onEndDrag",value:function(){this.props.onEndDrag&&this.props.onEndDrag()}},{key:"hide",value:function(){this.props.onHide&&this.props.onHide()}},{key:"show",value:function(){this.props.onShow&&this.props.onShow()}}]),o}();function Vi(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Mi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vi(Object(r),!0).forEach(function(e){Yi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vi(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ui(){return(Ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zi(e){return(zi="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Ki(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wi(e,t)}function Wi(e,t){return(Wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hi(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e=qi(r),t=n?(t=qi(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==zi(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t}}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ji(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $i(e,t,r){return t&&Ji(e.prototype,t),r&&Ji(e,r),e}function Yi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qi=($i(el,[{key:"preventDefault",value:function(){}}]),el),Zi=function(){Ki(r,c.Component);var t=Hi(r);function r(e){return Gi(this,r),(e=t.call(this,e)).state={active:!1,hover:!1,visible:!0},e}return $i(r,[{key:"onBeginDrag",value:function(){this.setState({active:!0,hovered:!1})}},{key:"onEndDrag",value:function(){this.setState({active:!1,hovered:!1})}},{key:"onEnter",value:function(){this.setState({hovered:!0})}},{key:"onLeave",value:function(){this.setState({hovered:!1})}},{key:"render",value:function(){var e=this.state.active?Aa.collectionEditor.droppable.activeStyle:{},t=this.state.hovered?Aa.collectionEditor.droppable.hoverStyle:{};return z.a.createElement(Bi,{context:this.props.context,onDrop:this.props.onDrop,onBeginDrag:this.onBeginDrag.bind(this),onEndDrag:this.onEndDrag.bind(this),onEnter:this.onEnter.bind(this),onLeave:this.onLeave.bind(this),style:{marginBottom:5,justifyContent:"center"}},z.a.createElement(Ao.View,{style:[Aa.collectionEditor.droppable.defaultStyle,e,t]},this.props.children))}}]),r}(),Xi=function(){Ki(n,c.Component);var r=Hi(n);function n(e){var t;return Gi(this,n),(t=r.call(this,e)).state={context:new vi},e=e.options.props.columns,t.defaultHeaderStyle={maxWidth:void 0},t.hasNestedCollectionEditor=e.some(function(e){return e.customControl&&"CollectionEditor"==e.customControl.name}),t}return $i(n,[{key:"isDraggable",value:function(){var e=this.props.options;return!e.props.readOnly&&Boolean(e.props.draggable)}},{key:"getDragColumn",value:function(e,t){var r=this;if(this.isDraggable()){var n=this.props.options;return z.a.createElement(Zi,{context:this.state.context,onDrop:n.onDrop.bind(n.me,t,e,new Qi)},z.a.createElement(Ao.View,{key:"celldrag"},z.a.createElement(Ti,{context:this.state.context,onBeginDrag:n.onDragStart.bind(n.me,t,e,new Qi),onEndDrag:function(){n.onDragEnd(t,e),r.forceUpdate()}},z.a.createElement(Ao.View,{style:Aa.collectionEditor.dragIcon}))))}}},{key:"renderHeaderRow",value:function(e){var n=this,t=this.props.options,o=[],a=0,r=!0!==t.props.disableAdd,i=!0!==t.props.disableCopy,l=!0!==t.props.disableDelete;return e.forEach(function(e){var t;"object"===zi(e)?(t=e.name,e.width):t=e,he(t)&&2<=t.length&&(t=t.charAt(0).toUpperCase()+t.slice(1));var r=0==a&&n.isDraggable()?{paddingLeft:15}:{};o.push(z.a.createElement(di.Td,{key:a,style:[n.defaultHeaderStyle,e.style,r]},z.a.createElement(ei,{style:{fontWeight:"700"}},t))),a++}),!t.props.readOnly&&(r||i||l)&&(e=!!t.props.hierarchical*!t.props.disableAdd*20+20*!t.props.disableCopy+20*!t.props.disableDelete,i="Add",he(l=function(){if(window.DWKitAdminLang&&window.DWKitAdminLang.collectioneditor)return window.DWKitAdminLang.collectioneditor}())&&(i=l.add),o.push(z.a.createElement(di.Td,{style:{maxWidth:e}},r&&z.a.createElement(Ao.TouchableOpacity,{onPress:function(){t.btnAdd.apply(t,arguments),n.forceUpdate()}},z.a.createElement(ei,Aa.collectionEditor.addLinkProps,i))))),z.a.createElement(di.Tr,{key:"headertr"},o)}},{key:"renderRows",value:function(h,e,r,t,m,n){var y=this,b=this.props.options,v=b.me,o=[];if(null==e)return o;var g=e;de(m)&&(m=0),void 0===n&&(n=""),b.props.filter&&(g=b.getFilteredItems(g,b.props.filter));for(var a=!0!==b.props.disableAdd,i=!0!==b.props.disableCopy,l=!0!==b.props.disableDelete,w=0;w<g.length;w++)if(void 0!==b.props.childrenField||!b.props.hierarchical||g[w][b.props.parentIdField]==t){var s,O=this.getDragColumn(g,w),C=void 0,c=void 0;b.props.hierarchical&&(f=void 0,u=n+String(w+"_"),me(b.props.parentIdField)?me(s=g[w][b.props.idField]||g[w].__id)&&0<(c=this.renderRows(h,e,r,s,m+1,u)).length&&(de(s=b.state.expanded[n+w])||s?f=z.a.createElement(Ao.TouchableOpacity,{onPress:b.onExpand.bind(b.me,n+w,!1)},z.a.createElement(Ao.Image,{source:{uri:"/images/collapse.svg"},style:Aa.collectionEditor.image.style})):(f=z.a.createElement(Ao.TouchableOpacity,{onPress:b.onExpand.bind(b.me,n+w,!0)},z.a.createElement(Ao.Image,{source:{uri:"/images/expand.svg"},style:Aa.collectionEditor.image.style})),c=void 0)):Array.isArray(g[w][b.props.childrenField])&&0<g[w][b.props.childrenField].length?0<(c=this.renderRows(h,g[w][b.props.childrenField],r,void 0,m+1,u)).length&&(de(p=b.state.expanded[n+w])||p?f=z.a.createElement(Ao.TouchableOpacity,{onPress:b.onExpand.bind(b.me,n+w,!1)},z.a.createElement(Ao.Image,{source:{uri:"/images/collapse.svg"},style:Aa.collectionEditor.image.style})):(f=z.a.createElement(Ao.TouchableOpacity,{onPress:b.onExpand.bind(b.me,n+w,!0)},z.a.createElement(Ao.Image,{source:{uri:"/images/expand.svg"},style:Aa.collectionEditor.image.style})),c=void 0)):f=z.a.createElement(Ao.Image,{source:{uri:"/images/collapse.svg"},style:Aa.collectionEditor.image.style}),C=z.a.createElement(Ao.View,null,f));var S=[],k=void 0;Array.isArray(r)&&0<r.length&&(void 0!==r[0].__id&&null!==r[0].__id?function(){var t=g[w].__id;void 0!==t&&null!=t&&(k=r.find(function(e){return e.__id===t}))}():k=r[w]);for(var u,p,f,d=0;d<h.length;d++)!function(e){var r=void 0,t=b.props.readOnly?"":"input",n=void 0,o=void 0;"object"===zi(h[e])?(r=h[e].key,t=h[e].control,n=h[e].customControl,Array.isArray(h[e].options)&&(o=h[e].options)):r=h[e];var a=void 0;he(k)&&(a=Boolean(k[r]));var i,l,s,c,u,p=e<h.length-1||!b.props.readOnly?Mi({},Aa.collectionEditor.column.notLast):{},f=void 0;"checkbox"===t?f=z.a.createElement(E,{key:w+"_"+e,row:g[w],handleChange:b.handleChange,colName:r,checked:g[w][r],errorFlag:a,disabled:b.props.readOnly}):"span"===t?(p.verticalAlign="middle",f=z.a.createElement(Ao.Text,{key:w+"_"+e,name:r},g[w][r])):"number"===t?(i=null===g[w][r]||void 0===g[w][r]?"":g[w][r],i={name:r,keyboardType:"numeric",error:a,value:i,disabled:b.props.readOnly},f=z.a.createElement(U,{key:w+"_"+e,row:g[w],inputProps:i,handleChange:b.handleChange})):"date"===t?(i=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(D,{key:w+"_"+e,row:g[w],colName:r,value:i,errorFlag:a,disabled:b.props.readOnly,handleChange:b.handleChange,type:"date"})):"datetime"===t?(l=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(D,{key:w+"_"+e,row:g[w],colName:r,value:l,errorFlag:a,disabled:b.props.readOnly,handleChange:b.handleChange,type:"datetime"})):"dropdown"===t?(l=null==g[w][r]?h[e].multiple?[]:"":g[w][r],f=z.a.createElement(L,{key:w+"_"+e,row:g[w],colName:r,multiple:h[e].multiple,placeholder:h[e].placeholder,errorFlag:a,value:l,options:o,disabled:b.props.readOnly,handleChange:b.handleChange})):"file"===t||"file2"===t?(o=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(J,{key:w+"_"+e,row:g[w],colName:r,errorFlag:a,value:o,disabled:b.props.readOnly,handleChange:b.handleChange,downloadUrl:b.props.downloadUrl,uploadUrl:b.props.uploadUrl,control:t,additionalData:h[e].additionalData})):"camera"===t?(s=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(ee,{key:w+"_"+e,row:g[w],colName:r,errorFlag:a,value:s,disabled:b.props.readOnly,handleChange:b.handleChange,downloadUrl:b.props.downloadUrl,uploadUrl:b.props.uploadUrl,control:t,showPreview:!0,getAdditionalDataForControl:b.props.getAdditionalDataForControl,additionalData:h[e].additionalData})):"signature"===t?(s=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(ae,{key:w+"_"+e,row:g[w],colName:r,errorFlag:a,value:s,disabled:b.props.readOnly,handleChange:b.handleChange,downloadUrl:b.props.downloadUrl,uploadUrl:b.props.uploadUrl,control:t,showPreview:!0,getAdditionalDataForControl:b.props.getAdditionalDataForControl,additionalData:h[e].additionalData})):"custom"===t?n?(u=g[w][r]||"",t={},c=Mi(Mi({},t=h[e].customControlGetPropsFunc?h[e].customControlGetPropsFunc(g[w]):t),{},{key:w+"_"+e,name:r,error:a,value:u,colName:r,row:g[w],readOnly:b.props.readOnly,onChange:function(e,t){v.handleChange(c.row,e,t=t||{name:r,value:e})}}),f=z.a.createElement(n,c)):he(b.props.placeholders)&&Array.isArray(b.props.placeholders[r])&&0<b.props.placeholders[r].length?(u=b.props.placeholders[r][0])&&(n=g[w],void 0!==u.propertyName&&""!==u.propertyName||(u.propertyName=r),f=z.a.createElement(P,{model:u,parent:b.me,row:n,errorOnRow:k,name:b.props.name,buildermode:b.props.buildermode,handleChange:b.handleChange,handleEvent:b.props.handleEvent,getAdditionalDataForControl:b.props.getAdditionalDataForControl,readOnly:b.props.readOnly,uploadUrl:b.props.uploadUrl,downloadUrl:b.props.downloadUrl,data:b.props.data,adaptiveViewType:b.props.adaptiveViewType,controlBarParams:b.props.controlBarParams,createControl:b.props.createControl})):b.props.buildermode&&b.props.createBuilderDropzone&&(f=b.props.createBuilderDropzone(b.props.name,b.props.name,void 0,r,r)):(d=null===g[w][r]||void 0===g[w][r]?"":g[w][r],d={name:r,dataList:h[e].dataList,error:a,value:d,disabled:b.props.readOnly},f=z.a.createElement(U,{key:w+"_"+e,row:g[w],inputProps:d,handleChange:b.handleChange}));var d=h[e].style;p.maxWidth=y.defaultHeaderStyle.maxWidth,y.hasNestedCollectionEditor&&(p.paddingTop=40),0===e?(m&&(p.paddingLeft=String(15*m+5)+"px"),S.push(z.a.createElement(di.Td,{key:w+"_"+e+"td",style:[p,d]},C,O,f))):S.push(z.a.createElement(di.Td,{key:w+"_"+e+"td",style:[p,d]},f))}(d);!b.props.readOnly&&(a||i||l)&&(u=function(e){return z.a.createElement(Ao.TouchableOpacity,{onPress:function(){e.handler(),y.forceUpdate()}},z.a.createElement(_a.Icon,Ui({},e,{fill:"#000000",style:Aa.collectionEditor.icon})))},p=[Aa.collectionEditor.editButtonsColumn,this.hasNestedCollectionEditor?{paddingTop:30}:{}],f=15*i+15*l,b.props.hierarchical?(f+=15*a,S.push(z.a.createElement(di.Td,{key:"celldelete",style:{width:f}},z.a.createElement(Ao.View,{style:p},a&&z.a.createElement(u,{key:"addchild",name:"plus-outline",handler:b.btnAddChild.bind(b.me,w,g)}),i&&z.a.createElement(u,{key:"copy",name:"copy-outline",handler:b.btnCopy.bind(b.me,w,g)}),l&&z.a.createElement(u,{key:"delete",name:"close-outline",handler:b.btnDelete.bind(b.me,w,g)}))))):S.push(z.a.createElement(di.Td,{key:"celldelete",style:{width:f}},z.a.createElement(Ao.View,{style:p},i&&z.a.createElement(u,{key:"copy",name:"copy-outline",handler:b.btnCopy.bind(b.me,w,void 0)}),l&&z.a.createElement(u,{key:"delete",name:"close-outline",handler:b.btnDelete.bind(b.me,w,void 0)}))))),o.push(z.a.createElement(di.Tr,{key:n+w,"data-rowindex":w},S)),o=o.concat(c)}return o}},{key:"render",value:function(){var e=this.props.options,t=e.props.columns,r=e.props.value,n=e.props.error,o=t.length,a=!0!==this.props.disableAdd,i=!0!==this.props.disableCopy,l=!0!==this.props.disableDelete;return!e.props.readOnly&&(a||i||l)&&o++,this.defaultHeaderStyle={maxWidth:100/o+"%"},e.props.collapseAll&&Array.isArray(r)&&e.applyCollapseAll(r),t&&t.length?(r={style:[Aa.collectionEditor.container,e.props.style],onBlur:e.props.onBlur,onClick:e.props.onClick,onFocus:e.props.onFocus,onMouseEnter:e.props.onMouseEnter,onMouseLeave:e.props.onMouseLeave},z.a.createElement(Ao.View,r,z.a.createElement(ei,null,e.props.label),z.a.createElement(di,null,z.a.createElement(di.THeader,null,this.renderHeaderRow(t)),z.a.createElement(di.TBody,null,this.renderRows(t,e.state.data,n))))):z.a.createElement(Ao.View,null,z.a.createElement(Ao.Text,null,"Fill columns property!"))}}]),n}();function el(){Gi(this,el),Yi(this,"dataTransfer",{setData:function(){}})}d("collection-editor",function(e){return z.a.createElement(Xi,{options:e})});var tl=z.a.createContext({formWidthStyle:null}),rl=z.a.createContext({formSizeStyle:null});function nl(e){return(nl="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function ol(){return(ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function al(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function il(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?al(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):al(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function ll(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sl(e,t){return(sl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cl(e){return(cl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ul=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sl(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=cl(r),t=n?(t=cl(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==nl(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={hideResults:!0},e}return ll(o.prototype,[{key:"render",value:function(){var t=this,e=this.props.data,r=this.props.dataList;return z.a.createElement($a,{options:r,value:e,hideResults:this.state.hideResults,onFocus:function(){return t.setState({hideResults:!1})},onBlur:function(){return t.setState({hideResults:!0})},search:!0,onValueChange:this.props.onChangeText,onSelect:function(e){t.props.onItemPress(r[e])}})}}]),o}();d("collection-input",function(t){function r(e){t.me.handleChange(null,{name:t.props.inputProps.name,value:e})}return z.a.createElement(tl.Consumer,null,function(e){return e.formWidthStyle,z.a.createElement(rl.Consumer,null,function(e){return e.formSize,e=il(il({},t.props.inputProps),{},{style:Aa.collectionEditor.input}),Array.isArray(e.dataList)?z.a.createElement(ul,{data:e.value,dataList:e.dataList,onChangeText:r,onItemPress:r}):z.a.createElement(_a.Input,ol({},e,{onChangeText:r}))})})}),d("collection-upload",function(e){return z.a.createElement(Dn,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,downloadUrl:e.props.downloadUrl,uploadUrl:e.props.uploadUrl,additionalData:e.props.additionalData,additionalDataContext:e.props.row,isForm:!0,hideClearButton:"file2"===e.props.control})});var pl=r(3);function fl(e){return(fl="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function dl(){return(dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function hl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ml(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yl(e,t,r){return t&&ml(e.prototype,t),r&&ml(e,r),e}function bl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vl(e,t)}function vl(e,t){return(vl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gl(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e=wl(r),t=n?(t=wl(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==fl(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t}}function wl(e){return(wl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ol=function(){bl(t,c.Component);var e=gl(t);function t(){return hl(this,t),e.apply(this,arguments)}return yl(t,[{key:"render",value:function(){var e={paddingHorizontal:4};return this.props.icon?z.a.createElement(pl.Icon,dl({},this.props,{name:this.props.icon,type:"font-awesome",containerStyle:[this.props.style,e]},Aa.collectionEditor.iconProps)):z.a.createElement(pl.Text,dl({},this.props,{style:[this.props.style,e]}),"/")}}]),t}(),Cl=function(){bl(t,c.Component);var e=gl(t);function t(){return hl(this,t),e.apply(this,arguments)}return yl(t,[{key:"render",value:function(){var t=this,e=!0===this.props.active?{fontWeight:"600",color:"#1e70bf"}:{color:"#1e70bf"};return z.a.createElement(Ao.TouchableOpacity,{onPress:function(e){return t.props.onClick(e)}},z.a.createElement(pl.Text,dl({},this.props,{style:[this.props.style,e]})))}}]),t}();d("breadcrumb",function(e){for(var t=[],r=0;r<e.children.length;r++){var n=e.children[r];n.isDivider?t.push(z.a.createElement(Ol,n.dividerProps)):t.push(z.a.createElement(Cl,n.childProps,n.text))}return z.a.createElement(Ao.View,dl({},e.propsControl,{style:[e.propsControl.style,{flexDirection:"row",alignItems:"center"}]}),t)});var Sl=new vi;function kl(e){return(kl="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function El(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pl(e,t){return(Pl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jl(e){return(jl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xl=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pl(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=jl(r),t=n?(t=jl(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==kl(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function a(e){return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),(e=o.call(this,e)).state={active:!1,hover:!1,visible:!0,modalVisible:!1},e}return t=[{key:"attr",value:function(e){if(!de(e))return{value:e}}}],El((e=a).prototype,[{key:"onBeginDrag",value:function(){this.setState({active:!0,hovered:!1})}},{key:"onEndDrag",value:function(){this.setState({active:!1,hovered:!1})}},{key:"onEnter",value:function(){this.setState({hovered:!0})}},{key:"onLeave",value:function(){this.setState({hovered:!1})}},{key:"onDrop",value:function(e){var t={attributes:{name:a.attr(this.props.name),elementafter:a.attr(this.props.elementAfter),elementtoinsert:a.attr(this.props.elementToInsert),placeholderkey:a.attr(this.props.placeholderKey)}};e.props.onDrop&&e.props.onDrop(this,t)}},{key:"onHide",value:function(){this.setState({visible:!1})}},{key:"onShow",value:function(){this.setState({visible:!0})}},{key:"showModal",value:function(){this.props.options.onChangeDZ(null,{value:""}),this.setState({modalVisible:!0})}},{key:"save",value:function(){this.props.options.onClosePopup(),this.setState({modalVisible:!1})}},{key:"cancel",value:function(){this.setState({modalVisible:!1})}},{key:"drawModal",value:function(e){var t=this;return z.a.createElement(_a.Tooltip,{appearance:"white",visible:this.state.modalVisible,anchor:e,style:Aa.controls.dropzonePopover.container,onBackdropPress:this.save.bind(this)},z.a.createElement(Ao.View,null,z.a.createElement(pl.Input,{multiline:!0,numberOfLines:4,onChangeText:function(e){return t.props.options.onChangeDZ(null,{value:e})},placeholder:"Insert here a model control \n(for copy - double click by control title)"})))}},{key:"render",value:function(){var t=this,r=this.state.active?Aa.dwkitFormBuilderZoneActive:{},n=this.state.hovered?Aa.dwkitFormBuilderZoneHover:{},o=!0===this.state.visible?{}:{display:"none"},a=Aa.dwkitFormBuilderZoneText;return z.a.createElement(Ao.TouchableOpacity,{onPress:function(){return t.showModal()}},z.a.createElement(tl.Consumer,null,function(e){return e.isColumn&&(o=[o,Aa.grouped.inColumn.dropzone.container],a=[a,Aa.grouped.inColumn.dropzone.text]),z.a.createElement(Bi,{name:t.props.name,key:t.props.keyValue,elementafter:t.props.elementAfter,elementtoinsert:t.props.elementToInsert,placeholderkey:t.props.placeholderKey,style:[Aa.dwkitFormBuilderZone,o,r,n],onDrop:t.onDrop.bind(t),onBeginDrag:t.onBeginDrag.bind(t),onEndDrag:t.onEndDrag.bind(t),onEnter:t.onEnter.bind(t),onLeave:t.onLeave.bind(t),onHide:t.onHide.bind(t),onShow:t.onShow.bind(t),context:Sl,onPress:t.showModal.bind(t)},z.a.createElement(Ao.View,null,t.drawModal(function(){return z.a.createElement(pl.Text,{style:a},t.props.text)})))}))}}]),El(e,t),a}();function _l(){return(_l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rl(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}d("builder-dropzone",function(e){return z.a.createElement(xl,{name:e.key,key:e.key+"_bdz",keyValue:e.key,elementAfter:e.elementAfter,elementToInsert:e.elementToInsert,placeholderKey:e.placeholderKey,text:e.text,options:e})}),d("button",function(t){var e=Aa.controlParams(t.propsControl),e=function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Rl(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Rl(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({onPress:t.propsControl.onClick,children:t.propsControl.content,style:[Aa.baseMargin,{display:"flex"},t.propsControl.style,e.style]},e.props);return t.propsControl.icon&&(e.accessoryLeft=function(e){return z.a.createElement(_a.Icon,_l({name:t.propsControl.icon},e))}),z.a.createElement(_a.Button,e)});var Dl=r(9);function Tl(e){var r=e.children,t=e.style,n=e.notStretchItems;return z.a.createElement(Ao.View,{style:[{flexDirection:"row"},t]},r.map(function(e,t){return e?z.a.cloneElement(e,{style:[t<r.length-1&&Aa.layout.elementInRow,{flexGrow:n?0:1},e.props.style]}):null}))}function Fl(e){var r=e.children,t=e.style,n=e.notStretchItems;return z.a.createElement(Ao.View,{style:[{flexDirection:"column"},t]},r.map(function(e,t){return e?z.a.cloneElement(e,{style:[t<r.length-1&&Aa.layout.elementInColumn,{flexGrow:n?0:1},e.props.style]}):null}))}function Al(e){return z.a.createElement(Ao.View,{style:Ll.container},z.a.createElement(Ao.View,{style:Ll.spinnerBox},z.a.createElement(_a.Spinner,e)))}var Il=function(e){return z.a.createElement(Ao.View,e,e.children,e.isLoading&&z.a.createElement(Al,null))},Ll={container:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",position:"absolute",backgroundColor:"white",opacity:.6},spinnerBox:{padding:2,backgroundColor:"white",borderRadius:28}};function Nl(e){return(Nl="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Bl(){return(Bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ml(e,t){return(Ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ul(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zl(e){return(zl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xo=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ml(e,t)}(o,z.a.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=zl(r),t=n?(t=zl(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Nl(t)&&"function"!=typeof t?Ul(e):t});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),Kl(Ul(n=t.call(this,e)),"labels",function(){return n.props.compact?{}:{open:n.props.openLabel||"Open",clear:n.props.clearLabel||"Clear"}}),Kl(Ul(n),"load",function(){var e=Ul(n).props;e.value&&e.getAdditionalDataForControl(Ul(n),{type:"fetch",fetchUrl:e.downloadUrl+e.value,fetchOptions:{method:"get"},fetchResponseType:"blob"},function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){n.setState({image:{uri:t.result}}),n.setState({loading:!1})}})}),Kl(Ul(n),"clear",function(){n.props.clear(),n.setState({image:null})}),Kl(Ul(n),"openFullscreen",function(){var e=Ul(n),t=e.state;e.props.value&&!t.image&&(n.setState({loading:!0}),n.load()),n.setState({fullscreenView:!0})}),Kl(Ul(n),"fullscreenView",function(){var e=Ul(n).state,t=(r=Ao.Dimensions.get("window")).width,r=r.height;return z.a.createElement(Ao.Modal,null,z.a.createElement(Il,{isLoading:e.loading},z.a.createElement(Ao.Image,{source:e.image,resizeMode:"contain",style:{backgroundColor:"white",width:t,height:r}}),z.a.createElement(_a.Button,{onPress:function(){return n.setState({fullscreenView:!1})},accessoryLeft:function(e){return z.a.createElement(_a.Icon,Bl({},e,{name:"close-outline"}))},appearance:"outline",status:"basic",style:Hl})))}),Kl(Ul(n),"preview",function(){var e=(t=Ul(n)).props,t=t.state;return e.showPreview&&z.a.createElement(Il,{isLoading:t.loading},z.a.createElement(Ao.TouchableOpacity,{onPress:n.openFullscreen},e.compact?z.a.createElement(_a.Avatar,{source:t.image,shape:"rounded"}):z.a.createElement(Ao.Image,{source:t.image,resizeMode:"contain",style:Wl})))}),n.state={image:null,fullscreenView:!1,loading:!!e.showPreview},e.value&&e.showPreview&&n.load(),n}return Vl(o.prototype,[{key:"componentDidUpdate",value:function(e){var t=this.props;t.value!==e.value&&(t.value?t.showPreview&&(this.setState({loading:!0}),this.load()):this.setState({image:null}))}},{key:"render",value:function(){var e=this.props,t=this.state,r=this.labels,n=e.showPreview&&!e.compact?Fl:Tl;return z.a.createElement(Ao.View,null,z.a.createElement(Ao.View,{style:{flexDirection:e.compact?"row":"column"}},t.fullscreenView&&this.fullscreenView(),z.a.createElement(n,{status:"basic",size:"medium",style:{flexGrow:1}},e.showPreview?this.preview():z.a.createElement(_a.Button,{children:r().open,onPress:this.openFullscreen,status:"basic",size:"medium",accessoryLeft:function(e){return z.a.createElement(_a.Icon,Bl({},e,{name:"maximize-outline"}))}}),z.a.createElement(_a.Button,{onPress:this.clear,children:r().clear,accessoryLeft:function(e){return z.a.createElement(_a.Icon,Bl({},e,{name:"close-outline"}))},status:"basic",size:"medium"}))))}}]),o}(),Wl={flex:1,height:Ao.Dimensions.get("window").height/2,backgroundColor:"white"},Hl={position:"absolute",width:40,height:40,borderRadius:40,top:10,right:20};"ios"===Ao.Platform.OS&&Ao.NativeModules.StatusBarManager.getHeight(function(e){Hl.top=10+e.height});var ql=Xo;function Gl(e){return(Gl="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Jl(){return(Jl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $l(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return r(e),0}l.done?t(s):Promise.resolve(s).then(n,o)}function Yl(l){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=l.apply(e,i);function o(e){$l(n,t,r,o,a,"next",e)}function a(e){$l(n,t,r,o,a,"throw",e)}o(void 0)})}}function Ql(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zl(e,t){return(Zl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function es(e){return(es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ts(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rs="image/jpeg",ns="photo",os=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zl(e,t)}(o,z.a.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=es(r),t=n?(t=es(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Gl(t)&&"function"!=typeof t?Xl(e):t});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),ts(Xl(n=t.call(this,e)),"labels",function(){return n.props.compact?{}:{takeShot:n.props.shotLabel||"Take shot",getFromGallery:n.props.galleryLabel||"Get from gallery"}}),ts(Xl(n),"getFromCamera",Yl(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("web"===Ao.Platform.OS)return alert("The Camera control works only on mobile devices"),e.abrupt("return");e.next=5;break;case 5:return e.next=7,Dl.requestCameraPermissionsAsync();case 7:if(!1===e.sent.granted)return alert("Permission to access camera roll is required!"),e.abrupt("return");e.next=11;break;case 11:return e.next=13,Dl.launchCameraAsync({mediaTypes:Dl.MediaTypeOptions.Images,allowsEditing:!0,quality:n.props.compression||.75});case 13:(t=e.sent).cancelled||n.upload(t.uri);case 15:case"end":return e.stop()}},e)}))),ts(Xl(n),"getFromGallery",Yl(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("web"===Ao.Platform.OS)return alert("Camera opens only on real mobile device"),e.abrupt("return");e.next=5;break;case 5:return e.next=7,Dl.requestCameraRollPermissionsAsync();case 7:if(!1===e.sent.granted)return alert("Permission to access camera roll is required!"),e.abrupt("return");e.next=11;break;case 11:return e.next=13,Dl.launchImageLibraryAsync({mediaTypes:Dl.MediaTypeOptions.Images,allowsEditing:!0,quality:n.props.compression||.75});case 13:(t=e.sent).cancelled||n.upload(t.uri);case 15:case"end":return e.stop()}},e)}))),ts(Xl(n),"upload",function(e){n.setState({loading:!0}),e="android"===Ao.Platform.OS?e:e.replace("file://",""),(t=new FormData).append("name",ns+".jpg"),t.append("file_attachment",{uri:e,name:"image.jpg",type:rs});var t={method:"post",headers:{"Content-Type":"multipart/form-data"},body:t},r=Xl(n);n.props.getAdditionalDataForControl(Xl(n),{type:"fetch",fetchUrl:n.props.uploadUrl,fetchOptions:t,fetchResponseType:"json"},function(e){n.setState({loading:!1}),r.props.onUpload({name:ns+".jpg"},e)})}),n.state={loading:!1},n}return Ql(o.prototype,[{key:"render",value:function(){var e=this.props,t=this.state,r=this.labels,n=e.compact?_a.ButtonGroup:Tl;return z.a.createElement(Il,{isLoading:t.loading},e.value?z.a.createElement(ql,Jl({},e,{clear:e.onClear})):z.a.createElement(n,{status:"basic",size:"medium"},z.a.createElement(_a.Button,{onPress:this.getFromCamera,children:r().takeShot,accessoryLeft:function(e){return z.a.createElement(_a.Icon,Jl({},e,{name:"camera-outline"}))},status:"basic",size:"medium"}),z.a.createElement(_a.Button,{onPress:this.getFromGallery,children:r().getFromGallery,accessoryLeft:function(e){return z.a.createElement(_a.Icon,Jl({},e,{name:"folder-outline"}))},status:"basic",size:"medium"})))}}]),o}();d("camera",function(e){var t=e.props,r={width:t.compact&&t.showPreview?130:null};return z.a.createElement(Ao.View,{style:r},!!t.label&&z.a.createElement(ei,null,t.label),z.a.createElement(os,Jl({},t,{onUpload:e.onUpload,onClear:e.onClear})))});var Xo=r(15),as=r.n(Xo),is=r(11);function ls(e){return(ls="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function ss(){return(ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function us(e,t){return(us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ps(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fs(e){return(fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ds(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hs=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&us(e,t)}(o,z.a.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=fs(r),t=n?(t=fs(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ls(t)&&"function"!=typeof t?ps(e):t});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),ds(ps(r=t.call(this,e)),"labels",function(){return{draw:r.props.compact?null:r.props.drawLabel||"Draw signature",clearCanvas:r.props.clearCanvasLabel||"Clear canvas",upload:r.props.uploadLabel||"Upload"}}),ds(ps(r),"upload",function(e){r.setState({loading:!0});var t=is.cacheDirectory+"sign.png";is.writeAsStringAsync(t,e.replace("data:image/png;base64,",""),{encoding:is.EncodingType.Base64}).then(function(e){is.getInfoAsync(t,{size:!0,md5:!0}).then(function(e){var t="android"===Ao.Platform.OS?e.uri:e.uri.replace("file://","");(e=new FormData).append("name",bs+".jpg"),e.append("file_attachment",{uri:t,name:"image.jpg",type:ys}),e={method:"post",headers:{"Content-Type":"multipart/form-data"},body:e},r.props.getAdditionalDataForControl(ps(r),{type:"fetch",fetchUrl:r.props.uploadUrl,fetchOptions:e,fetchResponseType:"json"},function(e){r.setState({loading:!1}),r.props.onUpload({name:bs+".jpg"},e)})})}).catch(function(e){console.log("err",e)}),r.cancel()}),ds(ps(r),"showCanvasModal",function(){"web"!==Ao.Platform.OS?r.setState({showCanvas:!0}):alert("Signature opens only on real mobile device")}),ds(ps(r),"clearCanvas",function(){r.ref.current.clearSignature()}),ds(ps(r),"cancel",function(){r.setState({showCanvas:!1})}),ds(ps(r),"canvasModal",function(){var e=(t=ps(r)).state,t=t.labels;return e.showCanvas&&z.a.createElement(Ao.Modal,null,z.a.createElement(as.a,{ref:r.ref,onOK:r.upload,autoClear:!0,backgroundColor:"rgb(255,255,255)",penColor:"black",webStyle:ws,style:{height:ms}}),z.a.createElement(Tl,{style:{margin:20,position:"absolute",bottom:0,left:0}},z.a.createElement(_a.Button,{onPress:r.clearCanvas,children:t().clearCanvas,accessoryLeft:function(e){return z.a.createElement(_a.Icon,ss({},e,{name:"close-outline"}))},appearance:"outline",status:"primary"}),z.a.createElement(_a.Button,{onPress:function(){return r.ref.current.readSignature()},children:t().upload,accessoryLeft:function(e){return z.a.createElement(_a.Icon,ss({},e,{name:"cloud-upload-outline"}))},status:"primary"})),z.a.createElement(_a.Button,{onPress:r.cancel,accessoryLeft:function(e){return z.a.createElement(_a.Icon,ss({},e,{name:"close-outline"}))},appearance:"outline",status:"basic",style:vs}))}),r.state={showCanvas:!1,loading:!1},r.ref=z.a.createRef(),r}return cs(o.prototype,[{key:"render",value:function(){var e=this.props,t=this.state,r=this.labels;return z.a.createElement(Il,{isLoading:t.loading},e.value?z.a.createElement(ql,ss({},e,{clear:e.onClear})):z.a.createElement(Ao.View,null,this.canvasModal(),z.a.createElement(_a.Button,{onPress:this.showCanvasModal,children:r().draw,accessoryLeft:function(e){return z.a.createElement(_a.Icon,ss({},e,{name:"edit-2-outline"}))},status:"basic",size:"medium"})))}}]),o}();d("signature",function(e){var t=e.props,r={width:t.compact&&t.showPreview?130:null};return z.a.createElement(Ao.View,{style:r},!!t.label&&z.a.createElement(ei,null,t.label),z.a.createElement(hs,ss({},t,{onUpload:e.onUpload,onClear:e.onClear})))});var ms=Ao.Dimensions.get("window").height/2,ys="image/jpeg",bs="signature-image",vs={position:"absolute",width:40,height:40,borderRadius:40,top:10,right:20},gs=0;"ios"===Ao.Platform.OS&&Ao.NativeModules.StatusBarManager.getHeight(function(e){gs=e.height,vs.top=10+gs});var ws="\n.m-signature-pad--footer {\n    display: none;\n}\n.m-signature-pad--body {\n    top: ".concat(60+gs,"px;\n    bottom: 100px;\n}\n");function Os(){return(Os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Cs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ss(e){var t=e.children;return z.a.createElement(co.Consumer,null,function(e){return(e=e.visible)?z.a.createElement(Ao.View,{style:e?Aa.itemContainer:{}},t):t})}function ks(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}d("checkbox",function(e){var t=function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Cs(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Cs(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},e.propsControl);return t.onChange=!0===e.propsControl.readOnly?void 0:t.onChange.bind(void 0,null,{name:t.name,checked:!t.checked}),!0===e.propsControl.toggle?(t.style=Ao.StyleSheet.flatten([t.style,Aa.controls.dwKitCheckBox]),z.a.createElement(_a.Toggle,Os({},t,{children:t.label}))):z.a.createElement(Ba,t)}),d("container",function(e){var t=function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ks(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ks(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},e.props);return t.notStretchItems=!0,t.style=[Aa.containerView.base,t.style],e.props.childrenView&&t.style.push(Aa.containerView[e.props.childrenView]),delete t.childrenView,e="rows"!==e.props.childrenView&&e.props.childrenView?Tl:Fl,Za(t),z.a.createElement(Ss,null,z.a.createElement(e,t))}),r(24);var Es=r(16);function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function js(e){var t,r,p=e.options,n=(t=Object(c.useState)(!1),r=2,(e=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Ps(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ps(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]),o=e[1],f={form:"",formgroup:"",grid:"",gridcolumn:"",container:"",div:"",repeater:""};function a(e,t){Mn.move(p.props.model.key,t)}return p.me.updateBarPosition=function(){p.me.controlRef&&p.me.barRef&&p.me.controlRef.measure(function(s,c,u,e,t,r){p.me.barRef&&p.me.barRef.measure(function(e,t,r,n,o,a){var i=s+u-r;i<15&&(i=15);var l=c-n/2;null!=f[p.props.control.props["data-buildertype"]]&&(l-=20),r=!p.me.state.x||!p.me.state.y,n=1<Math.abs(p.me.state.x-i)||1<Math.abs(p.me.state.y-l),(r||n)&&p.me.setState({x:i,y:l})})})},z.a.createElement(co.Consumer,null,function(e){var t=e.visible,e=function(e){return o(e),e=[e?Aa.controlBar.containerHovered:Aa.controlBar.container,{left:(e=p.me.state).x+"px",top:e.y+"px",right:"auto"}],t&&z.a.createElement(Ao.View,{ref:function(e){p.me.barRef=e},style:e},z.a.createElement(Ao.View,{title:p.props.text,style:Aa.controlBar.title},z.a.createElement(pl.Text,{onPress:p.onCopyControl},p.props.model.key)),z.a.createElement(Ao.TouchableOpacity,{style:Aa.controlBar.iconTouchable},z.a.createElement(Ti,{onDrop:a,context:Sl},z.a.createElement(Ao.Image,{source:{uri:"/images/dwkitbuilder-move.svg"},style:Aa.controlBar.icon}))),z.a.createElement(Ao.TouchableOpacity,{style:Aa.controlBar.iconTouchable,onPress:p.props.onEdit.bind(p.props.parent,p.props.model)},z.a.createElement(Ao.Image,{source:{uri:"/images/dwkitbuilder-edit.svg"},style:Aa.controlBar.icon})),z.a.createElement(Ao.TouchableOpacity,{style:Aa.controlBar.iconTouchable,onPress:p.props.onCopy.bind(p.props.parent,p.props.model)},z.a.createElement(Ao.Image,{source:{uri:"/images/dwkitbuilder-copy.svg"},style:Aa.controlBar.icon})),z.a.createElement(Ao.TouchableOpacity,{style:Aa.controlBar.iconTouchable,onPress:p.props.onDelete.bind(p.props.parent,p.props.model)},z.a.createElement(Ao.Image,{source:{uri:"/images/dwkitbuilder-delete.svg"},style:Aa.controlBar.icon})))};return[z.a.createElement(Ao.View,{style:[Aa.controlWrapper,n?Aa.controlWrapperHovered:void 0],ref:function(e){p.me.controlRef=e}},z.a.cloneElement(p.props.control)),z.a.createElement(Es.Hoverable,null,e)]})}function xs(e){return(xs="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function _s(){return(_s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ds(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Rs(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Rs(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ts(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fs(e,t){return(Fs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function As(e){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}d("control-bar",function(e){return z.a.createElement(js,{options:e})});var Is=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fs(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=As(r),t=n?(t=As(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==xs(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={focused:!1},e}return Ts(o.prototype,[{key:"onFocus",value:function(){this.setState({focused:!0})}},{key:"onBlur",value:function(){this.setState({focused:!1})}},{key:"render",value:function(){var e=this.state.focused&&!this.props.disabled?Aa.dwKitFocusedInputProps:{},t=this.props.disabled?Aa.dwKitDisabledInputProps:{};return(e=Ds(Ds(Ds(Ds(Ds({},this.props),Aa.dwKitInputProps),e),t),{},{disabled:this.props.disabled||this.props.readOnly})).onChange&&(e.onChangeText=e.onChange,delete e.onChange),this.props.error&&(e.status="danger"),"number"!=this.props.type?z.a.createElement(_a.Input,_s({onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)},e)):("number"==typeof(t=e.value)&&(t=Number(t).toString()),e.keyboardType&&"default"!=e.keyboardType||(e.keyboardType="decimal-pad"),z.a.createElement(_a.Input,_s({onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),textStyle:{textAlign:"right"}},e,{value:t})))}}]),o}(),Xo=r(17),Ls=r.n(Xo);function Ns(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Bs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ns(Object(r),!0).forEach(function(e){Hs(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ns(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Vs(){return(Vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ms(e){return(Ms="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Us(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zs(e,t){return(zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ks(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ws(e){return(Ws=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qs=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zs(e,t)}(a,z.a.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Ws(r),t=n?(t=Ws(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Ms(t)&&"function"!=typeof t?Ks(e):t});function a(e){var t;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),Hs(Ks(t=o.call(this,e)),"convertCurrentValue",function(){var e=t.props;if(e.value)return e.datePickerProps&&e.datePickerProps.dateFormat?Le()(e.value).format(e.datePickerProps.dateFormat):Le()(e.value).format("YYYY-MM-DD")}),t.state={isDatePickerVisible:!1},t}return Us(a.prototype,[{key:"render",value:function(){function t(){o.props.disabled||o.props.readOnly||o.setState({isDatePickerVisible:!0})}function r(){o.setState({isDatePickerVisible:!1})}function n(e){r(),o.props.disabled||o.props.readOnly||o.props.onValueChange&&o.props.onValueChange(e)}var o=this,e=this.state.isDatePickerVisible,a=this.props,i=Aa.controlParams(a),l=a.value,s=new Date;return"[object Date]"!==Object.prototype.toString.call(l)&&(l=null==l||null==l||""==l?s:"object"==Ms(l)?Le()(l).toDate():"string"==typeof l&&(l=Le()(l))&&l.isValid()?l.toDate():s),z.a.createElement(Ao.View,null,z.a.createElement(Ao.TouchableOpacity,{onPress:t,accessible:!1},z.a.createElement(Is,Vs({},a,{onFocus:function(){Ao.Keyboard.dismiss(),t()},value:a.value?this.convertCurrentValue():void 0,style:[a.style,{display:"flex"},i.style],textStyle:{color:"black"},accessoryRight:function(e){return o.props.disabled||o.props.readOnly?z.a.createElement(Ao.View,null):z.a.createElement(Ao.View,{style:{display:"flex",flexWrap:"wrap",flexDirection:"row"}},z.a.createElement(Ao.TouchableOpacity,{onPress:t,accessible:!1},z.a.createElement(_a.Icon,Vs({},e,{name:"calendar-outline"}))),z.a.createElement(Ao.TouchableOpacity,{onPress:function(){return n(null)},accessible:!1},z.a.createElement(_a.Icon,Vs({},e,{name:"close-circle-outline"}))))}}))),z.a.createElement(Ls.a,{date:l,isVisible:e,mode:a.type,onConfirm:n,onCancel:r}))}}]),a}();function Gs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Js(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Gs(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Gs(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function $s(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ys(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?$s(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):$s(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Qs(e){return(Qs="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Zs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Xs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zs(Object(r),!0).forEach(function(e){nc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zs(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ec(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tc(e,t){return(tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rc(e){return(rc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}d("date-picker",function(e){var t=Bs(Bs({},e.props),{},{status:e.props.error?"danger":void 0}),r=e.props.onChange||e.props.onValueChange;return r&&(t.onValueChange=function(e){return r(e,{name:t.name,value:e})},delete e.props.onChange),e.props.isForm||(t["data-buildertype"]=e.props.type),Ao.Platform.select({native:function(){return z.a.createElement(qs,Vs({},t,{datePickerProps:e.datePickerProps}))},default:function(){return z.a.createElement(Is,Vs({type:e.type,value:e.date},t,{placeholder:"Time/Date picker shows only on mobile device"}))}})()}),d("dictionary",function(t){var e=Aa.controlParams(t.propsControl),r=Js(Js({},t.propsControl),{},{style:[t.propsControl.style,e.style]});return t.propsControl.onChange&&(r.onValueChange=function(e){return t.propsControl.onChange(null,{name:r.name,value:e})}),delete r.onChange,z.a.createElement($a,r)}),d("dropdown",function(t){var e=Aa.controlParams(t.propsControl),r=Ys(Ys({},t.propsControl),{},{style:[t.propsControl.style,e.style]});return t.propsControl.onChange&&(r.onValueChange=function(e){return t.propsControl.onChange(null,{name:r.name,value:e})}),delete r.onChange,z.a.createElement($a,r)}),d("dropzone",function(e){return e.props.readOnly?z.a.createElement(Ao.View,null):z.a.createElement(Ao.View,null,z.a.createElement(pl.Text,null,"dropzone"))});var oc=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tc(e,t)}(t,c.Component);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=rc(r),t=n?(t=rc(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Qs(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return ec(t.prototype,[{key:"render",value:function(){if(!this.props.visible)return null;var e=Xs(Xs({},Aa.dwKitModalOverlayProps),{},{isVisible:this.props.visible,onRequestClose:this.props.onClose,onBackdropPress:this.props.onClose});return z.a.createElement(pl.Overlay,e,z.a.createElement(Ao.View,{style:Aa.dwKitModalBody},this.props.children))}}]),t}();function ac(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ic(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ac(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ac(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function lc(e){return(e=ic(ic({},Aa.dwKitButtonProps),e)).children=e.title,e.size||(e.size="small"),e.style=Ao.StyleSheet.compose(e.style,Ao.StyleSheet.flatten(Aa.controls.button)),z.a.createElement(_a.Button,e)}function sc(){return(sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function uc(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?cc(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):cc(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function pc(){return(pc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fc(){return(fc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dc(e){return Ao.Platform.select({native:function(){return z.a.createElement(Ao.TouchableOpacity,fc({},e,{onPress:function(){return Ao.Linking.openURL(e.href)}}))},default:function(){return z.a.createElement("a",fc({},e,{target:e.target,href:e.href,rel:e.rel,onClick:e.onPress}),e.children)}})()}function hc(){return(hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function yc(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?mc(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):mc(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function bc(){return(bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}nc(oc,"Header",function(e){return z.a.createElement(Ao.View,{style:Aa.dwKitModalHeader},e.children)}),nc(oc,"Content",function(e){return z.a.createElement(Ao.View,{style:Aa.dwKitModalContent},e.children)}),nc(oc,"Actions",function(e){return z.a.createElement(Tl,{style:Aa.dwKitModalActions},e.children)}),d("edit-form",function(e){if(de(e.state.item))return z.a.createElement(Ao.View,null);var t=e.dwKitControls.getEditControlByType(e.state.item["data-buildertype"],e.props.externalControlList);if(!t)return o="Close",he(e.props.localization)&&(o=e.props.localization.base.closebutton),z.a.createElement(oc,{visible:e.state.open,onClose:e.onClose},z.a.createElement(oc.Header,null,z.a.createElement(pl.Text,null,"Error")),z.a.createElement(oc.Content,null,z.a.createElement(pl.Text,null,"EditForm is not found for this control!")),z.a.createElement(oc.Actions,null,z.a.createElement(lc,{onPress:e.onClose,title:o})));var r="OK",n="Cancel",o="Question";return he(e.props.localization)&&(r=e.props.localization.base.okbutton,n=e.props.localization.base.cancelbutton,o=e.props.localization.base.questiontitle),z.a.createElement(Ao.View,null,z.a.createElement(t,{key:"editform",data:e.state.item,parent:e.parent,open:e.state.open,onSave:e.onSave,onClose:e.onClose,actions:e.props.actions,localization:e.props.localization}),z.a.createElement(oc,{visible:e.state.confirm,onClose:e.confirmHandleCancel},z.a.createElement(oc.Header,null,z.a.createElement(pl.Text,null,o)),z.a.createElement(oc.Content,null,z.a.createElement(pl.Text,null,e.state.confirmtext)),z.a.createElement(oc.Actions,null,z.a.createElement(lc,{onPress:e.state.confirmHandle,title:r}),z.a.createElement(lc,{onPress:e.confirmHandleCancel,title:n,appearance:"outline"}))))}),d("empty",function(e){return z.a.createElement(Ao.View,{key:e.key,style:Aa.emptyView},z.a.createElement(Ao.Text,{style:Aa.emptyText},e.text))}),d("events-editor",function(i){function l(r,n){return function(e){var t=i.me.props.data[r];de(t)&&(i.me.props.data[r]=t={}),t[n]=e,he(i.me.props.onChange)&&i.me.props.onChange(n)(e)}}var e=i.props.data,t=i.props.events,s=[];return t.forEach(function(t){var r,n=he(e)?e[t]:void 0,o={element:$a,props:{className:"dwkit-action-dropdown",multiple:!0}},a={element:_e,props:{className:"parameters-editor",style:{marginRight:40,marginTop:-20}}};s.push(z.a.createElement(Ao.View,{key:t+"_events"},z.a.createElement(Ba,{width:3,key:"active",label:z.a.createElement(_a.Text,n.active?{category:"label",style:{fontSize:14}}:{},t),name:"active",checked:n.active,onChange:(r=t,function(e){var t=i.me.props.data[r];de(t)&&(i.me.props.data[r]=t={}),he(t.active=e)&&(t.active=e),he(i.me.props.onChange)&&i.me.props.onChange("active")(e)})}),n.active&&z.a.createElement(Ao.View,{key:"divGroup",style:[Aa.formGroupEqual,{flexDirection:"column",marginBottom:30,marginLeft:15}]},z.a.createElement(_e,{draggable:!0,columns:[{key:"actions",name:"Actions",control:"custom",customControl:o.element,style:Aa.eventsEditor.actions,customControlGetPropsFunc:function(e){return uc({options:i.actionOptions,value:e.actions,onValueChange:l(t,"actions",n.actions)},o.props)}},{key:"parameters",name:"Parameters",control:"custom",customControl:a.element,style:Aa.eventsEditor.parameters,customControlGetPropsFunc:function(e){return uc({value:e.parameters,columns:[{key:"name",name:"Name"},{key:"value",name:"Value"}],onValueChange:l(t,"parameters",n.parameters)},a.props)}},{key:"targets",name:"Targets",control:"custom",customControl:o.element,style:Aa.eventsEditor.targets,customControlGetPropsFunc:function(e){return uc({options:i.targetOptions,value:e.targets,onValueChange:l(t,"targets",n.targets)},o.props)}}],name:"triggers",disableAdd:!0,style:{flexShrink:1},value:n.triggers,onChange:i.me.handleChange.bind(i.me,t)}),z.a.createElement(_a.Button,sc({onPress:function(){i.me.initNewTrigger.call(i.me,t),i.me.forceUpdate()}},Aa.eventsEditor.addButton),z.a.createElement(_a.Text,{category:"label",style:{fontSize:18}},"+")))))}),z.a.createElement(Ao.View,null,s)}),d("form",function(e){Za(e.propsControl);var t={formSize:e.model.size},r=e.propsControl;return r.style=[Aa.containerView.base,r.style],z.a.createElement(Ss,null,z.a.createElement(rl.Provider,{value:t},z.a.createElement(Ao.View,pc({},r,{children:e.children}))))}),d("formgroup",function(e){var t=e.propsControl;t.notStretchItems=!0,t.style.flexDirection="grouped"===e.orientation?"column":"row",t.style=[Aa.containerView.base,t.style],Za(e.propsControl);var r="custom"===e.widths&&e.widthsCustom&&1<=e.widthsCustom&&e.widthsCustom<=16?Aa.formGroupWidthCustom[e.widthsCustom].style:Aa.formGroupWidthEqual,n="grouped"!==e.orientation;return z.a.createElement(Ss,null,z.a.createElement(tl.Provider,{value:{formWidthStyle:r,isColumn:n}},z.a.createElement(n?Tl:Fl,t,e.children)))}),d("header",function(e){var t={fontSize:Qa(e.model.size,24),textAlign:e.model.textAlign},r={fontSize:Qa(e.model.size,24)/1.4,textAlign:e.model.textAlign};return z.a.createElement(Ao.View,null,z.a.createElement(_a.Text,{style:t,category:"h1"},e.props.content),z.a.createElement(_a.Text,{style:r,category:"h6"},e.props.subheader))}),d("image",function(e){var t={width:e.props.style.width,height:e.props.style.height},r=!0===e.model.avatar?{width:28,height:28,borderRadius:"500rem"}:{},n=!0===e.model.bordered?{borderWidth:1,borderColor:"lightgrey"}:{},o=e.props.src;o&&"/"==o[0]&&window.DWKitApp&&window.DWKitApp.backendUrl&&(o=window.DWKitApp.backendUrl+o);var a=void 0;return delete(o=yc(yc({},e.propsControl),{},{source:{uri:o}})).src,a=z.a.createElement(pl.Image,hc({},o,{style:[o.style,r],containerStyle:[t,o.containerStyle,r,n]})),e.props.href&&(a=z.a.createElement(dc,{href:e.props.href},a)),n={flexDirection:"row",flexGrow:1,justifyContent:"center"},"left"===e.model.floated&&(n.justifyContent="flex-start"),"right"===e.model.floated&&(n.justifyContent="flex-end"),"top"===e.model.verticalAlign&&(n.alignItems="flex-start"),"middle"===e.model.verticalAlign&&(n.alignItems="center"),"bottom"===e.model.verticalAlign&&(n.alignItems="flex-end"),z.a.createElement(Ao.View,{style:n},a)}),d("input",function(o){var t;return o.propsControl.onChange&&(t=o.propsControl.onChange,o.propsControl.onChange=function(e){return t(e,{name:o.propsControl.name,value:e})}),z.a.createElement(tl.Consumer,null,function(e){var n=e.formWidthStyle;return z.a.createElement(rl.Consumer,null,function(e){return e=e.formSize,t=n,r=e,z.a.createElement(Ao.View,{style:[{flexGrow:1},t]},(t=e,r=Aa.controlParams(o.propsControl),o.propsControl.style=[r.style,o.propsControl.style],t&&(o.propsControl.size=t),o.propsControl.onChange&&(o.propsControl.onChangeText=o.propsControl.onChange,o.propsControl.onValueChange=o.propsControl.onChange,delete o.propsControl.onChange),"file"===o.propsControl.type?(o.propsControl.isForm=o.isForm,z.a.createElement(Dn,bc({},o.propsControl,{downloadUrl:o.props.additionalParams.downloadUrl,uploadUrl:o.props.additionalParams.uploadUrl}))):"date"===o.propsControl.type||"time"===o.propsControl.type||"datetime"===o.propsControl.type?(o.propsControl.isForm=o.isForm,z.a.createElement(qe,o.propsControl)):"number"!==o.propsControl.type?("password"===o.propsControl.type&&(o.propsControl.secureTextEntry=!0),z.a.createElement(Is,bc({label:o.propsControl.label},o.propsControl))):(t=Number.isInteger(o.propsControl.value)?o.propsControl.value.toString():o.propsControl.value,z.a.createElement(Is,bc({label:o.propsControl.label},o.propsControl,{value:t})))));var t,r})})});var Xo=r(18),vc=r.n(Xo);function gc(e){var t=Ao.StyleSheet.create({a:{fontWeight:"300",color:"#FF3366"}});return z.a.createElement(vc.a,{html:e.content,stylesheet:t})}function wc(e){return{element:e}}function Oc(e){return z.a.createElement(pl.Text,e)}function Cc(e){var t=!0===e.active?{fontWeight:"600"}:{};return z.a.createElement(Ao.View,e,z.a.createElement(pl.Text,{style:[e.style,t]},e.label),e.children)}function Sc(e){return z.a.createElement(pl.ButtonGroup,e)}d("menu-group",function(u){var e,t={};for(e in u.props)"data-items"!==e&&"activeItem"!==e&&"handleEvent"!==e&&"link"!==e&&(t[e]=u.props[e]);return t.buttons=function i(l,s){var c=[];de(s)&&(s="");for(var e=0;e<l.length;e++)!function(e){var t=l[e];if(he(t.visibleCondition)&&null!==t.visibleCondition&&""!==t.visibleCondition){var r="return "+t.visibleCondition;try{if(!new Function("",r)())return}catch(e){}}var n,o=String(s)+String(e),a=z.a.createElement(gc,{content:t.title});Array.isArray(t.children)&&0<t.children.length?c.push(wc(function(){return z.a.createElement(Cc,{key:o},z.a.createElement(Oc,null,a),z.a.createElement(Sc,{buttons:i(t.children,o+"_")}))})):(n=u.props.link?z.a.createElement(dc,{style:{color:"inherit"},href:t.target,onPress:u.handleItemClick2.bind(u.me,{name:t.target})},a):a,u.props.link?c.push(wc(function(){return z.a.createElement(Cc,{key:o,name:t.target,active:u.state.activeitem===t.target},n)})):c.push(wc(function(){return z.a.createElement(Cc,{key:o,name:t.target,active:u.state.activeitem===t.target,onPress:u.handleItemClick},n)})))}(e);return c}(u.items),z.a.createElement(pl.ButtonGroup,t)});var kc=Ao.StyleSheet.create({headerContainerStyle:{flexDirection:"row",marginTop:20},contentContainerStyle:{flexDirection:"row",marginVertical:10}});d("message",function(e){var t,r={fontSize:Qa(e.model.size,24)},n={fontSize:Qa(e.model.size,24)/1.4};!0!==e.model.error&&!0!==e.model.negative||(t="danger"),!0!==e.model.success&&!0!==e.model.positive||(t="success"),!0===e.model.info&&(t="info"),!0===e.model.warning&&(t="warning");var o=Aa.controlParams(e.propsControl);return e.propsControl.style=[o.style,e.propsControl.style],z.a.createElement(_a.Card,{style:[e.propsControl.style],status:t},z.a.createElement(Ao.View,e.propsControl,z.a.createElement(_a.Text,{style:r,category:"h6"},e.props.header),z.a.createElement(_a.Text,{style:[kc.contentStyle,n],category:"s1"},e.props.content)))}),d("null-control",function(e){var t=""+e["data-buildertype"];return z.a.createElement(pl.Text,{style:{color:"red",fontSize:24}},e.text," null-control ",t)});var Xo=r(19),Ec=r.n(Xo);function Pc(e){return(Pc="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function jc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function xc(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?jc(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):jc(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function _c(){return(_c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dc(e,t){return(Dc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tc(e){return(Tc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fc=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dc(e,t)}(o,z.a.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Tc(r),t=n?(t=Tc(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Pc(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={value:""},e}return Rc(o.prototype,[{key:"render",value:function(){var t=this,e=[this.props,this.state],r=e[0],n=e[1];return z.a.createElement(Ec.a,_c({},r,{displayType:"text",renderText:function(e){return n.value.endsWith(".")&&!e.includes(".")&&(e+="."),!n.value.endsWith(".")&&e.endsWith(".")&&(e=e.slice(0,-1)),z.a.createElement(Is,_c({},r,{onChangeText:function(e){return t.setState({value:e})},keyboardType:r.keyboardType||"number-pad",placeholder:r.placeholder,value:e}))},value:n.value}))}}]),o}();function Ac(t){var e=t.selectedIndex;de(e)&&(e=he(t.selectedValue)?t.items.findIndex(function(e){return e.value===t.selectedValue}):t.items.findIndex(function(e){return!e.value}));var r=t.items.map(function(e){return z.a.createElement(_a.Radio,{status:t.error?"danger":void 0,children:e.label||e.text})});return z.a.createElement(Ao.View,{style:[Aa.dwKitRadioGroup.containerStyle,{paddingLeft:0,marginBottom:0}]},t.label&&z.a.createElement(ei,null,t.label),z.a.createElement(_a.RadioGroup,{disabled:t.readonly,onChange:function(e){t.onChange(t.items[e].value)},selectedIndex:e,style:t.style},r))}function Ic(){return(Ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Nc(e){var t,r,n=e.options.trigger,t=(t=z.a.useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Lc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lc(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1];return z.a.createElement(_a.Tooltip,Ic({},e,{onBackdropPress:function(){return o(!1)},visible:r,anchor:"button"===n.props["data-buildertype"]?function(){return z.a.cloneElement(n,{onClick:function(){return o(!0)}})}:function(){return z.a.createElement(Ao.TouchableWithoutFeedback,{onPress:function(){return o(!0)}},n)}}))}function Bc(){return(Bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mc(){return(Mc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Uc(){return(Uc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zc(e){return(zc="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Kc(){return(Kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hc(e,t){return(Hc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qc(e){return(qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}d("number-format",function(e){var t=xc(xc({},e.propsControl),{},{status:e.propsControl.error?"danger":void 0});return(e.propsControl.onChange||e.propsControl.onValueChange)&&(t.onValueChange=e.propsControl.onChange||e.propsControl.onValueChange,delete e.propsControl.onChange),delete t.type,z.a.createElement(Fc,t)}),d("radio-group",function(t){var e="v"===t.props.direction;return z.a.createElement(Ao.View,null,z.a.createElement(ei,null,t.props.label),z.a.createElement(Ac,{error:t.props.error,style:t.props.style,vertical:e,items:t.props.items,disabled:t.props.readOnly,name:t.props.name,onChange:function(e){t.onChange(void 0,{name:t.props.name,value:e})},selectedValue:t.props.value,values:t.props.items}))}),d("popup",function(e){return z.a.createElement(Nc,{options:e,style:Aa.controls.tooltip.container,placement:e.popupPosition,children:z.a.createElement(Ao.View,null,z.a.createElement(_a.Text,{category:"s1",status:"control",style:Aa.controls.tooltip.title},e.header),z.a.createElement(_a.Text,{status:"control"},e.content))})}),d("repeater",function(i){function r(e,t,r){if(!i.props.controlProps.buildermode&&""!==i.props["item-visibleCondition"]&&void 0!==i.props["item-visibleCondition"]&&null!==i.props["item-visibleCondition"]){var n="return "+i.props["item-visibleCondition"];try{if(!new Function("data",n)(t))return}catch(e){return}}var o=void 0,a=i.props.controlProps.createBuilderDropzone;return he(i.props.placeholders)&&Array.isArray(i.props.placeholders[i.psTemplate])&&0<i.props.placeholders[i.psTemplate].length?he(n=i.props.placeholders[i.psTemplate])&&(o=z.a.createElement(Nr,{key:e,parent:i.me,model:n,psTemplate:i.psTemplate,item:t,controlProps:i.props.controlProps,includeDropzone:r,errors:Array.isArray(i.props.error)?i.props.error[e]:void 0,index:e,handleChange:i.handleChange,data:i.props.data,parentItem:i.props.model})):r&&a&&(o=a("repeater_dropzone_footer",i.props.model.key,void 0,void 0,i.psTemplate)),o}if(i.isServerMode&&i.state.firstLoad)return i.state.firstLoad=!1,i.loadNextPage(),z.a.createElement(Ao.View,{style:i.props.style},i.state.loading&&z.a.createElement(Ao.ActivityIndicator,null));var e,t,n,o,a,l=i.props.style;return i.props.childrenView&&(l=Ao.StyleSheet.compose(i.props.style,Ao.StyleSheet.flatten(Aa.containerView[i.props.childrenView]))),z.a.createElement(Ao.View,{style:l},(e=i.state.items,t=i.state.rowsCount,o=i.me,a=[],l=[i.props.slider?Aa.repeater.container.horizontal:Aa.repeater.container.vertical],i.props.style&&l.push(i.props.style),Array.isArray(e)&&0<e.length?a.push(z.a.createElement(Ao.FlatList,{data:e,horizontal:i.props.slider,style:l,renderItem:function(e){var t=e.index;return r(t,e=e.item,!t&&o.props.controlProps.buildermode)},keyExtractor:function(e,t){return t}})):i.props.controlProps.buildermode?he(n=r(0,{},!0))&&a.push(n):!i.state.loading&&i.isServerMode&&(!de(n=i.props.noRecordsLabel)&&""!==n||(n="No records. Refresh..."),n=z.a.createElement(Ao.View,{key:"norecords"},z.a.createElement(lc,{onPress:function(){i.state.firstLoad=!0,i.loadNextPage()},title:n})),a.push(n)),!i.state.loading&&i.isServerMode&&t>e.length&&0<e.length&&(!de(e=i.props.loadButtonLabel)&&""!==e||(e="Load more..."),l.height=l.height+40,e=z.a.createElement(Ao.View,{key:"loadmore"},z.a.createElement(lc,{onPress:i.loadNextPage,title:e})),a.push(e)),z.a.createElement(Ss,null,a)),i.state.loading&&z.a.createElement(Ao.ActivityIndicator,null))}),d("search",function(a){function i(e){var t=[];if(!e)return t;var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return Vc(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Vc(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;t.push({item:o,title:o.title})}}catch(e){n.e(e)}finally{n.f()}return t}return z.a.createElement(Ao.View,null,z.a.createElement(pl.SearchBar,Bc({},a.controlProps,{showLoading:a.state.isLoading,onChangeText:function(e){return a.handleSearchChange(null,{value:e})},value:a.state.value})),z.a.createElement(Ao.View,null,function(){if(!de(a.state.results)&&null!==a.state.results){var e=function(e){if(!0!==a.controlProps.category)return[{title:"",separator:{title:"Search results"},data:i(e)}];var t,r,n,o=[];for(t in e)e.hasOwnProperty(t)&&(n=i((r=e[t]).results),o.push({title:r.name,separator:r,data:n}));return o}(a.state.results);return z.a.createElement(Ao.SectionList,{sections:e,keyExtractor:function(e,t){return e+t},renderItem:function(e){return e=e.item.item,z.a.createElement(Ao.View,null,z.a.createElement(pl.Text,{style:{fontWeight:"500"}},e.title),z.a.createElement(pl.Text,null,e.description),z.a.createElement(pl.Image,{source:{uri:e.image},style:{width:32,height:32}}),z.a.createElement(pl.Text,null,e.price))},renderSectionHeader:function(e){return z.a.createElement(pl.Text,{h4:!0},e.section.title)}})}}()))}),d("static-content",function(e){var t=he(e.props.content)?e.props.content.replace("\n","<br/>"):void 0;return t?(Za(e.spanProps),e.props.isHtml?z.a.createElement(gc,Mc({},e.spanProps,{content:e.props.content})):z.a.createElement(_a.Text,e.spanProps,t)):null}),d("statistic",function(n){var e=[];n.items&&(e=n.items.map(function(e){return t=e,r={fontSize:Qa(n.model.size,24)/1.4},e={fontSize:Qa(n.model.size,24)},z.a.createElement(Ao.View,{style:{margin:10}},z.a.createElement(_a.Text,{style:e,category:"label"},t.value),z.a.createElement(_a.Text,{style:r,category:"label",appearance:"hint"},t.label));var t,r}));var t=!0!==n.model.horizontal?{flexDirection:"row"}:{};return z.a.createElement(Ao.View,Uc({},n.propsControl,{style:[n.propsControl.style,t]}),e)});var Gc=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hc(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=qc(r),t=n?(t=qc(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==zc(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function a(e){var t;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),(t=o.call(this,e)).state={selectedIndex:e.activeitem||0},t}return Wc(a.prototype,[{key:"onTabChange",value:function(e){this.setState({selectedIndex:e}),this.props.onTabChange(null,{activeIndex:e})}},{key:"render",value:function(){var e="top"===this.props.model.position?_a.TabBar:_a.BottomNavigation,t="top"===this.props.model.position?_a.Tab:_a.BottomNavigationTab,r=z.a.createElement(e,{selectedIndex:this.state.selectedIndex,onSelect:this.onTabChange.bind(this)},this.props.panes.map(function(e){return z.a.createElement(t,{title:e.menuItem})})),e=this.props.panes[this.state.selectedIndex].pane,e=z.a.createElement(Ao.View,{key:e.key},e.content);return z.a.createElement(Ss,null,z.a.createElement(Ao.View,{style:this.props.style},"top"===this.props.model.position?[r,e]:[e,r]))}}]),a}();function Jc(){return(Jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $c(){return($c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yc(){return(Yc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}d("tab-group",function(e){return z.a.createElement(Gc,Kc({},e.props,{panes:e.panes,onTabChange:e.onTabChange}))}),d("textarea",function(t){var e={multiline:!0,numberOfLines:t.propsControl.rows||3,disabled:t.propsControl.readOnly,onChange:function(e){return t.propsControl.onChange(e,{name:t.propsControl.name,value:e})},value:t.propsControl.value,placeholder:t.propsControl.placeholder,style:{marginTop:7},error:t.propsControl.error};return z.a.createElement(Is,Jc({label:t.propsControl.label},e))}),d("upload",function(a){var e,t,r=a.props.type,n=[],o=a.props.value;return he(o)&&null!=o&&""!==o?(e="Download",t="Clear",he(o=function(){if(window.DWKitAdminLang&&window.DWKitAdminLang.button)return window.DWKitAdminLang.button}())&&(e=o.download,t=o.clear),o=a.props.disabled||a.props.disabled||a.props.hideClearButton,n.push(z.a.createElement(Ao.TouchableOpacity,{key:"download",onPress:function(e){e.preventDefault();var e=a.props.value,o=new XMLHttpRequest;o.open("POST",a.props.downloadUrl+e,!0),o.responseType="arraybuffer",o.onload=function(){var e,t=a.getCustomFileName();t||!(e=o.getResponseHeader("Content-Disposition"))||-1===e.indexOf("attachment")||(r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e))&&r[1]&&(t=r[1].replace(/['"]/g,""));var r=(r=a.getCustomContentType())||o.getResponseHeader("Content-Type"),n=document.createElement("a");n.setAttribute("href",window.URL.createObjectURL(new Blob([o.response],{type:r}))),n.setAttribute("download",t||"unknown"),document.body.appendChild(n),n.onclick=function(){document.body.removeChild(n)},n.click()},o.send(null)}},z.a.createElement(pl.Text,null,e))),o||(n.push(z.a.createElement(pl.Text,{key:"sparator"},"  ")),n.push(z.a.createElement(pl.Button,{key:"clear",onPress:a.onClear,title:t})))):a.props.disabled||a.props.readOnly?n.push(z.a.createElement(pl.Text,null)):(t=Ao.Platform.select({native:function(){return z.a.createElement(pl.Text,{h1:!0,style:{color:"red"}},"Implement me!")},default:function(){return z.a.createElement(pl.Text,null,"This control is unavailable on web.")}}),n.push(t)),z.a.createElement(Ao.View,{"data-buildertype":r},a.props.label&&z.a.createElement(ei,null,a.props.label),n)}),d("workflow-bar",function(o){var e=o.props.style,t=o.state.commands||o.props.commands;o.props.selectedScheme&&t&&(t=t.filter(function(e){return e.scheme===o.props.selectedScheme}));var r=o.state.states||o.props.states;return z.a.createElement(Ao.View,{style:e},z.a.createElement(Ao.View,{style:{flexDirection:"row"}},function(){if(o.state.processExists||o.props.blockSelectScheme||o.props.schemes.length<=1)return null;var e,t="Select scheme";o.props.selectSchemeDropdown?t=o.props.selectSchemeDropdown:(e=Ve())&&e.selectscheme&&(t=e.startworkflow);var r=[];return r.push({value:null,text:""}),o.props.schemes.forEach(function(e){return r.push({value:e,text:e})}),z.a.createElement(L,{key:"setstate",name:"setstate",options:r,placeholder:t,onChange:o.selectWorkflowScheme,value:o.props.selectedScheme,style:Aa.layout.elementInRow})}(),function(e){if(o.props.blockCommands)return null;if(!o.props.blockSelectScheme&&!o.props.selectedScheme&&1<o.props.schemes.length)return null;if(Array.isArray(e)&&0<e.length){var r=[];return e.forEach(function(e){var t=Aa.controlParams({floated:"flex-start",primary:1===e.type,secondary:2===e.type});r.push(z.a.createElement(_a.Button,$c({key:e.value,onPress:o.onCommand.bind(o.me,e),children:e.text,style:[t.style,Aa.layout.elementInRow]},t.props)))}),r}}(t),function(e){if(!o.props.blockSetState&&Array.isArray(e)&&0<e.length){var t=de(o.state.setstate)||""===o.state.setstate,r="Set state";me(o.props.setStateButton)?r=o.props.setStateButton:(n=Ve())&&(r=n.setstate);var n=Aa.controlParams({floated:"flex-start"});return[z.a.createElement(L,{key:"setstate",name:"setstate",placeholder:"States",options:e,onChange:o.handleChanged,style:Aa.layout.elementInRow}),z.a.createElement(_a.Button,$c({key:"btnsetstate",disabled:t,onPress:o.onSetState.bind(o.me),children:r,style:[n.style,Aa.layout.elementInRow]},n.props))]}}(r)))}),d("card",function(e){var t=Ao.StyleSheet.create({topContainer:{margin:10},card:{},footerContainer:{margin:10}}),r={style:[Aa.baseMargin,t.card],onPress:e.propsControls.onClick},n=e.me.renderPanel("extra");return z.a.createElement(_a.Card,Yc({},r,{header:function(){return z.a.createElement(Ao.View,{style:t.topContainer},z.a.createElement(_a.Text,{category:"h6"},e.props.header),z.a.createElement(_a.Text,{category:"s1"},e.props.subheader))},footer:function(){return z.a.createElement(Ao.View,{style:t.footerContainer},n)}}),e.me.renderPanel("description"))}),lo([].concat([{key:"sepContainers",title:"Containers",isseparate:!0,defaultopen:!0},{key:"container",title:"View",control:Ae},{key:"staticcontent",title:"Static Content",control:pn,defaultValues:{content:"Text..."}},{key:"form",title:"Form",control:Zr},{key:"formgroup",title:"Form Group",control:Zr,defaultValues:{widths:"equal",orientation:"grouped"}},{key:"tab",title:"Tab",control:bn,defaultValues:{position:"top",panes:[{title:"Tab 1",psid:"t1"},{title:"Tab 2",psid:"t2"},{title:"Tab 3",psid:"t3"}]}},{key:"card",title:"Card",control:Sn,defaultValues:{header:"Card",subheader:"Description"}},{key:"customblock",title:"Custom block",control:void 0,defaultValues:{sourceType:"form"}},{key:"sepCollection",title:"Collections",isseparate:!0},{key:"collectioneditor",title:"Collection Editor",control:_e,defaultValues:{columns:[{key:"Id",name:"ID"},{key:"Title",name:"Title"},{key:"Count",name:"Count"}]}},{key:"repeater",title:"Repeater",control:jr,defaultValues:{}},{key:"sepControls",title:"Controls",isseparate:!0},{key:"header",title:"Header",control:Zr,defaultValues:{content:"Header",size:"medium"}},{key:"input",title:"Input",control:Zr,defaultValues:{label:"Input",onChangeTimeout:200,fluid:!0}},{key:"numberformat",title:"Number Format",control:ur,defaultValues:{label:"NumberFormat",onChangeTimeout:200}},{key:"textarea",title:"TextArea",control:Zr,defaultValues:{label:"TextArea"}},{key:"dictionary",title:"Dictionary",control:Xe,defaultValues:{label:"Dictionary",selection:!0}},{key:"dropdown",title:"Dropdown",control:Zr,defaultValues:{label:"Dropdown",selection:!0,fluid:!0,"data-elements":[{value:1,text:"Item 1"},{value:2,text:"Item 2"},{value:3,text:"Item 3"}]}},{key:"checkbox",title:"CheckBox",control:Zr,defaultValues:{label:"Checkbox"}},{key:"radiogroup",title:"Radio group",control:br,defaultValues:{label:"Radio","data-elements":[{value:1,text:"Item 1"},{value:2,text:"Item 2"},{value:3,text:"Item 3"}]}},{key:"button",title:"Button",control:Zr,defaultValues:{content:"Button",fluid:!0,floated:"flex-start",basic:!0}},{key:"label",title:"Label",control:Zr,defaultValues:{content:"Label"}},{key:"message",title:"Message",control:Zr,defaultValues:{header:"Message",content:"Description...",size:"medium",fluid:!0}},{key:"image",title:"Image",control:Zr,defaultValues:{src:"/images/unknown.png","style-width":128,"style-height":128}},{key:"camera",title:"Camera",control:fe,defaultValues:{showPreview:!0,compression:.75}},{key:"signature",title:"Signature",control:an,defaultValues:{showPreview:!0}},{key:"workflowbar",title:"Workflow bar",control:Bn,defaultValues:{blockSetState:!0,blockLoadParameters:!0,events:{onCommandClick:{active:!0,actions:["workflowExecuteCommand"]},onSetStateClick:{active:!0,actions:["workflowSetState"]},onSchemeSelected:{active:!0,actions:["workflowSelectScheme"]}}}}])),Go.setItems(so());var Qc=Go;function Zc(e){return(Zc="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Xc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eu(e,t){return(eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tu(e){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ru=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eu(e,t)}(o,To);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=tu(r),t=n?(t=tu(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Zc(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).createControls=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Qc.createControls.apply(Qc,t)},e}return Xc(o.prototype,[{key:"render",value:function(){var e=this.getItemsForRender();return z.a.createElement(Ao.View,{style:{margin:5}},e)}}]),o}();function nu(e){return(nu="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function ou(e,t){return(ou=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function au(e){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var iu=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ou(e,t)}(t,ru);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=au(r),t=n?(t=au(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==nu(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return t}();function lu(e){return z.a.createElement(Ao.View,null,z.a.createElement(_a.TabBar,{selectedIndex:e.selectedIndex,onSelect:e.onPress},e.items.map(function(e){return z.a.createElement(_a.Tab,{title:e})})),z.a.createElement(Ao.View,{style:Ao.StyleSheet.flatten(Aa.controls.tabBarChild)},e.children))}function su(e){return(su="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function cu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uu(e,t){return(uu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pu(e){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fu=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uu(e,t)}(t,c.Component);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=pu(r),t=n?(t=pu(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==su(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return cu(t.prototype,[{key:"render",value:function(){return z.a.createElement(Ao.View,{style:Aa.dwKitMessage},this.props.children)}}]),t}();function du(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function hu(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?du(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):du(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function mu(e){var t={};return e.flex&&(t.flex=e.flex),e=hu(hu({},e),Aa.dwKitTextareaProps),z.a.createElement(Ao.View,{style:t},z.a.createElement(Is,e))}function yu(e){return(yu="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function bu(){return(bu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gu(e,t){return(gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wu(e){return(wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}lo=function(e){return z.a.createElement(Ao.View,{style:Aa.dwKitMessageContent},e.children)},(so="Content")in(Go=fu)?Object.defineProperty(Go,so,{value:lo,enumerable:!0,configurable:!0,writable:!0}):Go[so]=lo;var Ou=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gu(e,t)}(t,c.Component);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=wu(r),t=n?(t=wu(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==yu(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return vu(t.prototype,[{key:"render",value:function(){return z.a.createElement(_a.Text,bu({},this.props,{category:"label",appearance:"hint"}),this.props.children)}}]),t}();function Cu(e){return(Cu="function"==typeof Symbol&&"symbol"==ju(Symbol.iterator)?function(e){return ju(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ju(e)})(e)}function Su(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ku(e,t){return(ku=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Eu(e){return(Eu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pu=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ku(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Eu(r),t=n?(t=Eu(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Cu(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={activeItem:"general",defaultValuePreferInt:!1},e.menuItems=[{key:"general",name:"general",content:e.getLocalValue("generaltab","General")},{key:"style",name:"style",content:e.getLocalValue("styletab","Style")},{key:"events",name:"events",content:e.getLocalValue("eventstab","Events")},{key:"other",name:"other",content:e.getLocalValue("othertab","Other")}],e}return Su(o.prototype,[{key:"getLocalValue",value:function(e,t,r){var n=this.props.localization,r=he(r)?r:"base";return de(n)||de(n[r])||de(n[r][e])?t:n[r][e]}},{key:"handleItemClick",value:function(e){e=this.menuItems[e],this.setState({activeItem:e.name})}},{key:"getDescription",value:function(){var r=this.state.activeItem,n=0,e=this.menuItems.map(function(e,t){return n=e.name===r?t:n,e.content});return z.a.createElement(lu,{items:e,onPress:this.handleItemClick.bind(this),selectedIndex:n},this.getDetailDescription(r))}},{key:"getDetailDescription",value:function(e){var t;return"general"===e?t=this.getGeneralDescription():"style"===e?t=this.getStyleDescription():"events"===e?t=this.getEventsDescription():"tooltip"===e?t=this.getToolTipDescription():"other"===e&&(t=this.getOtherDescription()),t}},{key:"getGeneralDescription",value:function(){var e=this.props.data,t=this.props.parent.handleTextChange.bind(this.props.parent);return z.a.createElement(Ao.View,{key:"generalDescriptionForm",style:Aa.formGroupEqual},z.a.createElement(Is,{label:"Name",value:e.key,onChange:t("key")}))}},{key:"getStyleDescription",value:function(){var e=this.props.data,t=this.props.parent.handleTextChange.bind(this.props.parent),r=this.props.parent.handleIntChange.bind(this.props.parent);return this.getLocalValue("adaptivedefault","Any"),this.getLocalValue("adaptivedesctop","Desktop"),this.getLocalValue("adaptivemobile","Mobile"),z.a.createElement(Fl,{key:"styleDescriptionForm"},z.a.createElement(Tl,null,z.a.createElement(Is,{label:this.getLocalValue("widthfield","Width"),placeholder:"100",value:e["style-width"],onChange:r("style-width")}),z.a.createElement(Is,{label:this.getLocalValue("heightfield","Height"),placeholder:"100",value:e["style-height"],onChange:r("style-height")})),z.a.createElement(Tl,null,z.a.createElement(Is,{label:this.getLocalValue("margintopfield","Margin Top"),placeholder:"0",value:e["style-marginTop"],onChange:r("style-marginTop")}),z.a.createElement(Is,{label:this.getLocalValue("marginbottomfield","Margin Bottom"),placeholder:"0",value:e["style-marginBottom"],onChange:r("style-marginBottom")}),z.a.createElement(Is,{label:this.getLocalValue("marginleftfield","Margin Left"),placeholder:"0",value:e["style-marginLeft"],onChange:r("style-marginLeft")}),z.a.createElement(Is,{label:this.getLocalValue("marginrightfield","Margin Right"),placeholder:"0",value:e["style-marginRight"],onChange:r("style-marginRight")})),z.a.createElement(mu,{label:this.getLocalValue("stylefield","Style"),placeholder:"/*** Example Code ***/\ncolor:red;\npaddingTop:5px;",value:e["style-source"],onChangeText:t("style-source")}),z.a.createElement(Ba,{label:this.getLocalValue("hiddenfield","Hidden"),checked:e["style-hidden"],onChange:t("style-hidden")}))}},{key:"getEventsList",value:function(){return[]}},{key:"getEventsDescription",value:function(){var e=this.props.data;de(e.events)&&(e.events={});var t,r=this.props.parent.handleTextChange.bind(this.props.parent),n=this.props.parent.handleIntChange.bind(this.props.parent),o=this.props.actions,a=this.getEventsList();if(Array.isArray(a)&&0!==a.length){for(var i=this.props.parent.getControlsList(),l=[],s=0;s<i.length;s++)e.key!=i[s]&&l.push({text:i[s],value:i[s]});t=z.a.createElement(Ot,{key:"events",name:"events",data:e.events,events:a,actions:o,targets:l,onAdditionActions:this.handleAdditionActions.bind(this),onChange:r})}else t=z.a.createElement(fu,null,z.a.createElement(pl.Image,{source:{uri:"/images/dwkitbuilder-info.png"},style:Aa.dwKitMessageIcon}),z.a.createElement(fu.Content,null,z.a.createElement(pl.Text,null,this.getLocalValue("controlhasnoeventsmsg","This control has no events."))));return r=null,a.includes("onChange")&&(r=z.a.createElement(Is,{placeholder:"0",label:this.getLocalValue("onchangetimeout","onChange timeout"),value:e.onChangeTimeout,onChange:n("onChangeTimeout",!0)})),z.a.createElement(Fl,{key:"eventsDescriptionForm"},z.a.createElement(fu,null,z.a.createElement(pl.Image,{source:{uri:"/images/dwkitbuilder-info.png"},style:{width:32,height:32}}),z.a.createElement(fu.Content,null,z.a.createElement(pl.Text,null,this.getLocalValue("eventsinfomsg","These flags enable processing from this element.")))),r,t)}},{key:"getToolTipDescription",value:function(){var e=[{text:this.getLocalValue("tooltipdefault","Default"),value:""},{text:this.getLocalValue("tooltiptopcenter","Top Center"),value:"top"},{text:this.getLocalValue("tooltiptopleft","Top Left"),value:"top start"},{text:this.getLocalValue("tooltiptopright","Top Right"),value:"top end"},{text:this.getLocalValue("tooltipbottomcenter","Bottom Center"),value:"bottom"},{text:this.getLocalValue("tooltipbottomleft","Bottom Left"),value:"bottom start"},{text:this.getLocalValue("tooltipbottomright","Bottom right"),value:"bottom end"},{text:this.getLocalValue("tooltipleftcenter","Left Center"),value:"left"},{text:this.getLocalValue("tooltiprightright","Right Center"),value:"right"}],t=(this.getLocalValue("tooltipdefault","Default"),this.getLocalValue("tooltiphover","Hover"),this.getLocalValue("tooltipclick","Click"),this.getLocalValue("tooltipfocus","Focus"),this.props.data),r=this.props.parent.handleTextChange.bind(this.props.parent);return z.a.createElement(Fl,{key:"tooltipDescriptionForm"},z.a.createElement(Ba,{label:this.getLocalValue("tooltipenabledfield","Enabled"),checked:t["tooltip-enabled"],onChange:r("tooltip-enabled")}),z.a.createElement(Tl,null,z.a.createElement(Is,{label:this.getLocalValue("tooltipheaderfield","Tooltip Header"),value:t["tooltip-header"],onChange:r("tooltip-header"),disabled:!t["tooltip-enabled"]}),z.a.createElement(Is,{label:this.getLocalValue("tooltipcontentfield","Tooltip Content"),value:t["tooltip-content"],onChange:r("tooltip-content"),disabled:!t["tooltip-enabled"]})),z.a.createElement($a,{options:e,placeholder:"Default",label:this.getLocalValue("tooltippositionfield","Tooptip position"),value:t["tooltip-position"],onChange:r("tooltip-position"),disabled:!t["tooltip-enabled"]}),z.a.createElement(Ao.View,{style:{marginTop:30}},z.a.createElement(Ou,null,this.getLocalValue("errortooltipfield","Error-tooltip")),z.a.createElement(_a.Divider,{style:{marginBottom:10}}),z.a.createElement(Tl,null,z.a.createElement(Ba,{label:this.getLocalValue("errortooltipdisabledfield","Disable error tooptip"),checked:t["tooltip-errordisabled"],onChange:r("tooltip-errordisabled")}),z.a.createElement($a,{options:e,placeholder:"Default",label:this.getLocalValue("errortooltippositionfield","Error tooptip position"),value:t["tooltip-errorposition"],onChange:r("tooltip-errorposition")}))))}},{key:"getOtherDescription",value:function(){var e=this.props.data,t=this.props.parent.handleTextChange.bind(this.props.parent),r=this.props.parent.handleIntChange.bind(this.props.parent),r=this.state.defaultValuePreferInt?r:t;return z.a.createElement(Fl,{key:"otherDescriptionForm"},z.a.createElement(Is,{label:this.getLocalValue("propertynamefield","Property Name"),value:e.propertyName,onChange:t("propertyName")}),z.a.createElement(Ba,{label:this.getLocalValue("requiredfield","Required"),checked:e["other-required"],onChange:t("other-required")}),z.a.createElement(Is,{label:this.getLocalValue("defaultvaluefield","Default value"),value:e.defaultValue,onChange:r("defaultValue")}),z.a.createElement(mu,{label:this.getLocalValue("customvalidationfield","Custom Validation"),placeholder:"/*** Example Code ***/\nvalue > 10 ? true : 'Must be more 10'",value:e["other-customValidation"],onChangeText:t("other-customValidation")}),z.a.createElement(mu,{label:this.getLocalValue("visibleconditionfield","Visible condition"),placeholder:"/*** Example Code ***/\ndata.type == 1 ? true : false",value:e["other-visibleConition"],onChangeText:t("other-visibleConition")}),z.a.createElement(mu,{label:this.getLocalValue("readonlyconditionfield","ReadOnly condition"),placeholder:"/*** Example Code ***/\ndata.type == 1 ? true : false",value:e["other-readOnlyConition"],onChangeText:t("other-readOnlyConition")}))}},{key:"render",value:function(){var t=this;return z.a.createElement(oc,{visible:this.props.open,onClose:this.props.onClose.bind(this.props.parent)},z.a.createElement(oc.Header,null,z.a.createElement(pl.Text,{style:Aa.dwKitModalComponentName},this.props.data["data-buildertype"])),z.a.createElement(oc.Content,null,this.getDescription()),z.a.createElement(oc.Actions,null,z.a.createElement(lc,{onPress:function(){var e;t.beforeSave(),(e=t.props.onSave.bind(t.props.parent)).call.apply(e,arguments)},title:this.getLocalValue("savebutton","Save"),type:"solid"}),z.a.createElement(lc,{onPress:this.props.onClose.bind(this.props.parent),appearance:"outline",title:this.getLocalValue("cancelbutton","Cancel")})))}},{key:"beforeSave",value:function(){}},{key:"checkActionsList",value:function(e){for(var t=!1,r=0;r<this.props.actions.length;r++)if(this.props.actions[r]==e){t=!0;break}t||this.props.actions.push({text:e,value:e})}},{key:"handleAdditionActions",value:function(e,t){t=t.value,this.checkActionsList(t),this.forceUpdate()}}]),o}()}],C.c=k,C.d=function(e,t,r){C.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},C.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},C.t=function(t,e){if(1&e&&(t=C(t)),8&e)return t;if(4&e&&"object"==ju(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(C.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)C.d(r,n,function(e){return t[e]}.bind(null,n));return r},C.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return C.d(t,"a",t),t},C.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},C.p="",C(C.s=25);function C(e){if(k[e])return k[e].exports;var t=k[e]={i:e,l:!1,exports:{}};return S[e].call(t.exports,t,t.exports,C),t.l=!0,t.exports}var S,k},"object"==ju(n)&&"object"==ju(e)?e.exports=r(o(0),o(3),o(23),o(10),o(4),o(24),o(16),o(12),o(25),o(9),o(26),o(27),o(32),o(33),o(34),o(35),o(36),o(37),o(11),o(38)):(t=[o(0),o(3),o(23),o(10),o(4),o(24),o(16),o(12),o(25),o(9),o(26),o(27),o(32),o(33),o(34),o(35),o(36),o(37),o(11),o(38)],void 0===(r="function"==typeof(r=r)?r.apply(n,t):r)||(e.exports=r))}.call(this,o(47)(e))},function(e,t){e.exports=F},function(e,t){e.exports=A},function(e,t){e.exports=I},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,d="function"!=typeof Object.create&&"~";function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(){}a.prototype._events=void 0,a.prototype.eventNames=function(){var e,t=this._events,r=[];if(!t)return r;for(e in t)n.call(t,e)&&r.push(d?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(e,t){var r=this._events&&this._events[d?d+e:e];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},a.prototype.emit=function(e,t,r,n,o,a){var i=d?d+e:e;if(!this._events||!this._events[i])return!1;var l,s=this._events[i],c=arguments.length;if("function"==typeof s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,n),!0;case 5:return s.fn.call(s.context,t,r,n,o),!0;case 6:return s.fn.call(s.context,t,r,n,o,a),!0}for(f=1,l=new Array(c-1);f<c;f++)l[f-1]=arguments[f];s.fn.apply(s.context,l)}else for(var u,p=s.length,f=0;f<p;f++)switch(s[f].once&&this.removeListener(e,s[f].fn,void 0,!0),c){case 1:s[f].fn.call(s[f].context);break;case 2:s[f].fn.call(s[f].context,t);break;case 3:s[f].fn.call(s[f].context,t,r);break;default:if(!l)for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];s[f].fn.apply(s[f].context,l)}return!0},a.prototype.on=function(e,t,r){r=new o(t,r||this),e=d?d+e:e;return this._events||(this._events=d?{}:Object.create(null)),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],r]:this._events[e].push(r):this._events[e]=r,this},a.prototype.once=function(e,t,r){r=new o(t,r||this,!0),e=d?d+e:e;return this._events||(this._events=d?{}:Object.create(null)),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],r]:this._events[e].push(r):this._events[e]=r,this},a.prototype.removeListener=function(e,t,r,n){e=d?d+e:e;if(!this._events||!this._events[e])return this;var o=this._events[e],a=[];if(t)if(o.fn)(o.fn!==t||n&&!o.once||r&&o.context!==r)&&a.push(o);else for(var i=0,l=o.length;i<l;i++)(o[i].fn!==t||n&&!o[i].once||r&&o[i].context!==r)&&a.push(o[i]);return a.length?this._events[e]=1===a.length?a[0]:a:delete this._events[e],this},a.prototype.removeAllListeners=function(e){return this._events&&(e?delete this._events[d?d+e:e]:this._events=d?{}:Object.create(null)),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=d,e.exports=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mix=function(e){var o={init:[],preEmit:[],shouldEmit:[]},t=function t(r){var n={};return r.mixins&&r.mixins.forEach(function(e){a.extend(n,t(e))}),a.extend(n,r),Object.keys(o).forEach(function(e){r.hasOwnProperty(e)&&o[e].push(r[e])}),n}(e);1<o.init.length&&(t.init=function(){var t=arguments;o.init.forEach(function(e){e.apply(this,t)},this)});1<o.preEmit.length&&(t.preEmit=function(){return o.preEmit.reduce(function(e,t){t=t.apply(this,e);return void 0===t?e:[t]}.bind(this),arguments)});1<o.shouldEmit.length&&(t.shouldEmit=function(){var t=arguments;return!o.shouldEmit.some(function(e){return!e.apply(this,t)},this)});return Object.keys(o).forEach(function(e){1===o[e].length&&(t[e]=o[e][0])}),t};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(5))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindMethods=function(e,t){for(var r in t){var n;Object.getOwnPropertyDescriptor&&Object.defineProperty?(n=Object.getOwnPropertyDescriptor(t,r)).value&&"function"==typeof n.value&&t.hasOwnProperty(r)&&(e[r]=t[r].bind(e)):"function"==typeof(n=t[r])&&t.hasOwnProperty(r)&&(e[r]=n.bind(e))}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=function e(t){t=t||{};u.isObject(t)||(t={actionName:t});for(var r in p)if(!h[r]&&f[r])throw new Error("Cannot override API method "+r+" in Reflux.ActionMethods. Use another method name or override it on Reflux.PublisherMethods instead.");for(var n in t)if(!h[n]&&f[n])throw new Error("Cannot override API method "+n+" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.");t.children=t.children||[];t.asyncResult&&(t.children=t.children.concat(["completed","failed"]));var o=0,a={};for(;o<t.children.length;o++){var i=t.children[o],l="string"==typeof i?i:i.actionName;a[l]=e(i)}var s=u.extend({eventLabel:"action",emitter:new u.EventEmitter,_isAction:!0},f,p,t);var c=function e(){var t,r=!1;for(t in e.childActions){r=!0;break}var n=!e.sync&&void 0!==e.sync||r,n=n?"triggerAsync":"trigger";return e[n].apply(e,arguments)};u.extend(c,a,s);d.addAction(c);return c};var u=n(r(5)),p=n(r(28)),f=n(r(19)),d=n(r(18));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var h={preEmit:1,shouldEmit:1}},function(e,t,r){var n=r(8),o=r(20),a=r(5);e.exports=function(e,r){return a.throwIf(void 0===r,"Reflux.connect() requires a key."),{getInitialState:function(){return a.isFunction(e.getInitialState)?a.object([r],[e.getInitialState()]):{}},componentDidMount:function(){var t=this;a.extend(t,n),this.listenTo(e,function(e){t.setState(a.object([r],[e]))})},componentWillUnmount:o.componentWillUnmount}}},function(e,t,r){var a=r(8),i=r(20),l=r(5);e.exports=function(r,n,o){return l.throwIf(l.isFunction(n),"Reflux.connectFilter() requires a key."),{getInitialState:function(){if(!l.isFunction(r.getInitialState))return{};var e=o.call(this,r.getInitialState());return void 0!==e?l.object([n],[e]):{}},componentDidMount:function(){var t=this;l.extend(this,a),this.listenTo(r,function(e){e=o.call(t,e);t.setState(l.object([n],[e]))})},componentWillUnmount:i.componentWillUnmount}}},function(e,t,r){var o=r(8);e.exports=function(t,r,n){return{componentDidMount:function(){for(var e in o)if(this[e]!==o[e]){if(this[e])throw"Can't have other property '"+e+"' when using Reflux.listenTo!";this[e]=o[e]}this.listenTo(t,r,n)},componentWillUnmount:o.stopListeningToAll}}},function(e,t,r){var n=r(8);e.exports=function(t){return{componentDidMount:function(){for(var e in n)if(this[e]!==n[e]){if(this[e])throw"Can't have other property '"+e+"' when using Reflux.listenToMany!";this[e]=n[e]}this.listenToMany(t)},componentWillUnmount:n.stopListeningToAll}}},function(e,t,r){var n=r(17);if(n.defineReact=r(57),n.utils.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},"undefined"!=typeof React&&React)n.defineReact(React);else try{var o=r(0);n.defineReact(o)}catch(e){}},function(e,t,r){var i,p=r(17),l=!1;function f(e,t){if(!e)return t;for(var r=!1,n={},o=0,a=e.length;o<a;o++){var i=e[o];t.hasOwnProperty(i)&&(r=!0,n[i]=t[i])}return!!r&&n}e.exports=function t(e,r,n){var o;try{i=e||i||React,o=n||i.Component}catch(e){return}if(i&&o&&(!l||n)){var a=function(e,t,r){o.call(this,e,t,r)};if(p.utils.inherits(a,o),(e=a.prototype).storeKeys=null,e.componentWillMount=function(){if(this.store&&(Array.isArray(this.stores)?this.stores.unshift(this.store):this.stores=[this.store]),this.stores){this.__storeunsubscribes__=this.__storeunsubscribes__||[];for(var t=this.setState.bind(this),e=function(e){(e=f(this.storeKeys,e))&&t(e)}.bind(this),r=0,n=this.stores.length;r<n;r++){var o=this.stores[r];if("function"==typeof o){var a=o.id;if(o.singleton||(o.singleton=new o,a&&(p.stores[a]=o.singleton)),this.stores[r]=o=o.singleton,(o.id=a)&&p.GlobalState[a]){for(var i in p.GlobalState[a])o.state[i]=p.GlobalState[a][i];p.GlobalState[a]=o.state}else a&&(p.GlobalState[a]=o.state)}p.serverMode||this.__storeunsubscribes__.push(o.listen(e));var l=f(this.storeKeys,o.state);l&&this.setState(l)}}this.__readytomap__=!0;var s=this.__delayedmaps__;if(s)for(var c=0,u=s.length;c<u;c++)s[c].func(s[c].state);this.__delayedmaps__=null},e.componentWillUnmount=function(){if(this.__storeunsubscribes__)for(var e=0,t=this.__storeunsubscribes__.length;e<t;e++)this.__storeunsubscribes__[e]();this.__readytomap__=!1},e.mapStoreToState=function(e,n){"function"==typeof e&&(e=e.singleton||p.initStore(e));var o=this;function t(e){if(e=n.call(o,e)){var t,r=!1;for(t in e){r=!0;break}r&&o.setState(e)}}this.__storeunsubscribes__=this.__storeunsubscribes__||[],this.__storeunsubscribes__.push(e.listen(t)),this.__readytomap__?t(e.state):(this.__delayedmaps__=this.__delayedmaps__||[],this.__delayedmaps__.push({func:t,state:e.state}))},a.extend=function(e){return t(null,0,e)},n)return a;p.Component=a,i.PureComponent&&(p.PureComponent=a.extend(i.PureComponent)),e=(a=function(){this.__store__=p.createStore(),this.state={};var e,r=this;for(e in this.__store__)!function(t){Object.defineProperty(r,t,{get:function(){return r.__store__[t]},set:function(e){r.__store__[t]=e}})}(e)}).prototype,Object.defineProperty(e,"listenables",{get:function(){return this.__listenables__},set:function(e){var r={};Array.isArray(e)?e.forEach(function(e){for(var t in e)r[t]=e[t]}):r=e,this.__listenables__=r,this.listenToMany(r)},enumerable:!0,configurable:!0}),e.setState=function(e){for(var t in e)this.state[t]=e[t];this.id&&(p.GlobalState[this.id]=this.state),this.trigger(e)},Object.defineProperty(a,"isES6Store",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(a,"state",{get:function(){if(!this.singleton)throw new Error("Reflux.Store.state is inaccessible before the store has been initialized.");return this.singleton.state},enumerable:!0,configurable:!0}),p.Store=a,p.GlobalState=p.GlobalState||{},p.stores={},p.getGlobalState=function(){return function e(t,r){if(null===t||"object"!=typeof t)return t;if(t.constructor!==Object&&t.constructor!==Array)return t;if(t.constructor===Date||t.constructor===RegExp||t.constructor===Function||t.constructor===String||t.constructor===Number||t.constructor===Boolean)return new t.constructor(t);for(var n in r=r||new t.constructor,t)r[n]=void 0===r[n]?e(t[n],null):r[n];return r}(p.GlobalState)},p.setGlobalState=function(e){for(var t in e)p.stores[t]?p.stores[t].setState(e[t]):p.GlobalState[t]=e[t]},p.initializeGlobalStore=p.initStore=function(e){var t=e.id;if(e.singleton)return e.singleton;if(!t)return e.singleton=new e,e.singleton;var r=e.singleton=new e;if((p.stores[t]=r).id=t,p.GlobalState[t]){for(var n in p.GlobalState[t])r.state[n]=p.GlobalState[t][n];p.GlobalState[t]=r.state}else p.GlobalState[t]=r.state;return r},l=!0}}},function(e,t,r){"use strict";r.r(t),r.d(t,"Actions",function(){return L}),r.d(t,"API",function(){return le}),r.d(t,"ApplicationRouter",function(){return un}),r.d(t,"FlowContent",function(){return zt}),r.d(t,"FormContent",function(){return At}),r.d(t,"WorkflowContent",function(){return Yt}),r.d(t,"ScreenContent",function(){return en}),r.d(t,"NotificationComponent",function(){return rr}),r.d(t,"SignalRConnector",function(){return fn}),r.d(t,"StateBindedForm",function(){return pr}),r.d(t,"Store",function(){return V}),r.d(t,"Thunks",function(){return dt}),r.d(t,"DWKitAppForm",function(){return qe}),r.d(t,"oidcClient",function(){return Pn}),r.d(t,"navigate",function(){return rn}),r.d(t,"navigationRef",function(){return tn});var a=r(0),l=r.n(a),n=r(13),b=r.n(n),o=r(6),L=Object(o.createActions)({UPDATESTATE:function(e){return{stateDelta:e}},APP:{USERINFO:{FETCH:{BEGIN:void 0,SUCCESS:function(e){return{user:e}},FAILURE:function(e,t){return{error:e,details:t}}}},CLEARERRORS:void 0,FAILURE:function(e,t,r){return{error:e,details:t,level:r}},FETCHBEGIN:void 0,RESETFETCHCOUNT:void 0,IMPERSONATEDUSERIDFROMURL:void 0,SETAUTH:function(e){return{type:e}},FORM:{MODEL:{FETCH:{BEGIN:void 0,SUCCESS:function(e,t,r,n,o){return{model:e,name:r,modalId:n,formParams:o,mapping:t}},FAILURE:function(e,t){return{error:e,details:t}}},CHANGE:function(e,t){return{name:e,modalId:t}}},DATA:{FETCH:{BEGIN:void 0,SUCCESS:function(e,t,r){return{data:e,isNew:r,modalId:t}},FAILURE:function(e,t){return{error:e,details:t}}},UPDATE:function(e,t,r,n){return{key:e,value:t,modalId:r,additionalValues:n}},SAVE:{BEGIN:void 0,SUCCESS:function(e,t,r){return{data:e,url:r,modalId:t}},FAILURE:function(e,t,r,n){return{error:e,details:t,level:r,formerrors:n}}},DELETE:{BEGIN:void 0,SUCCESS:function(e){return{name:e}},FAILURE:function(e,t,r,n){return{error:e,details:t,level:r,formerrors:n}}},UPDATEFROMCHILD:function(e,t,r){return{key:e,value:t,modalId:r}},UPDATEMODALFILTER:function(e,t){return{filter:e,modalId:t}},SETPROCESSPARAMETERS:function(e,t){return{modalId:e,parameters:t}}},CLEAR:function(e){return{modalId:e}},REFRESH:function(e){return{modalId:e}}}},ROUTER:{PUSH:function(e){return{newurl:e}},REDIRECT:function(e){return{newurl:e}},REFRESH:function(){return{newurl:"refresh"}},RELOAD:function(){return{newurl:"reload"}},ROUTECHANGED:function(e,t,r){return{history:e,location:t,changeRefreshKey:r}},CHANGEURLFILTER:function(e,t){return{newfilter:e,clearCommand:t}},SETSCREEN:function(e){return{screen:e}}},SETTINGS:{SET:function(e,t){return{key:e,value:t}}}}),i=r(11),s=r.n(i),c=r(14),t=r(39),n=r(40),i=r.n(n),u={app:{user:null,impersonatedUserId:null,fetchCount:0,error:void 0,errorDetails:void 0,modals:{models:{},windows:{},order:[]},form:{models:{model:null,mapping:null,hideControls:null,readOnlyControls:null,readOnly:null},filters:{main:null},data:{isDirty:!1,isNew:!1,original:null,modified:null},errors:null,formParams:{schemes:null,securityGroup:void 0,permissions:null,name:null}},authType:"identityserver",screens:[]},router:{history:null,redirect:null,location:null,push:null,refreshKey:null,screen:null},settings:{backendUrl:"",fetchOptions:void 0,form:"form",flow:"flow",workflow:"workflow",accountget:"/account/get",uiform:"/ui/form",uiflow:"/ui/flow",uiworkflow:"/ui/workflow",dataget:"/data/get",datachange:"/data/change",datadelete:"/data/delete",datadictionary:"/data/dictionary",dataupload:"/data/upload/",datadownload:"/data/download/",dataexport:"/data/export",workflowget:"/workflow/get",workflowexecute:"/workflow/execute",workflowset:"/workflow/set",notificationhub:"/hubs/notifications",executeaction:"/actions/execute",mobile:!1}};function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach(function(e){m(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n={failure:function(e,t){var r=t.payload,n=r.error,o=r.details,a=r.level,t=r.formerrors,r=t?t.modalId:null;return h(h({},e),{},r?{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:n,errorLevel:a,errorDetails:o,modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},m({},r,h(h({},e.modals.windows[r]),{},{errors:t?t.errors:null})))})}:{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:n,errorLevel:a,errorDetails:o,form:h(h({},e.form),{},{errors:t?t.errors:null})})}},n={CLEAR:function(e,t){t=t.payload.modalId;return h(h({},e),{},t?{modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},m({},t,h(h({},e.modals.windows[t]),{},{data:h(h({},e.modals.windows[t].data),{},{isDirty:!1,original:null,modified:null})})))})}:{form:h({},u.app.form)})},MODEL:{FETCH:{BEGIN:function(e){return h(h({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){var r=t.payload,n=r.model,o=r.name,a=r.formParams,t=r.mapping;if(r.modalId){r=h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1});return r.modals.models[o]={model:n,mapping:t,formParams:a},r}return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,form:h(h({},e.form),{},{models:h(h({},e.form.models),{},{model:n,mapping:t}),formParams:a})})},FAILURE:function(e,t){var r=t.payload,t=r.error,r=r.details;return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:t,errorDetails:r})}},CHANGE:function(e,t){var r=t.payload,t=r.name,r=r.modalId;return r&&e.modals.windows[r]?h(h({},e),{},{modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},m({},r,h(h({},e.modals.windows[r]),{},{name:t})))})}):e}},DATA:{FETCH:{BEGIN:function(e){return h(h({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){var r=t.payload,n=r.data,o=r.modalId,t=r.isNew;o&&e.modals.windows[o]&&((a=e.modals.windows[o].data)&&a.isNew&&(t=!0)),t&&(n.__id="CLIENT__"+J());var r=Q(n),a=(o?e.modals.windows[o]:e.form).data;if(Z(a.original,n),Z(a.modified,r),o)return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},m({},o,h(h({},e.modals.windows[o]),{},{errors:null,data:h(h({},e.modals.windows[o].data),{},{isDirty:!1,isNew:!!t,original:n,modified:r})})))})});var i,l=h({},e.modals.windows);for(i in l)l.hasOwnProperty(i)&&(l[i]=h(h({},l[i]),{},{errors:null}));return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{isDirty:!1,isNew:!!t,original:n,modified:r}),errors:null}),modals:h(h({},e.modals),{},{windows:l})})},FAILURE:function(e,t){var r=t.payload,t=r.error,r=r.details;return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:t,errorDetails:r})}},UPDATEFROMCHILD:function(e,t){function r(e,t){if(Array.isArray(e)){var r=p(e),n=r.findIndex(function(e){return e.__id===t.__id});return 0<=n?r[n]=G(r[n],t):r.push(t),r}return G(e,t)}var n=t.payload,o=n.key,a=n.value,i=n.modalId,t=(!!i?e.modals.windows[i]:e.form).data,n=r(o?t.modified[o]:t.modified,a),t=r(o?t.original[o]:t.original,a);if(i){a=h({},e),i=a.modals.windows[i].data;return o?(i.modified[o]=n,i.original[o]=t):(i.modified=n,i.original=t),a}return h(h({},e),{},o?{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{modified:h(h({},e.form.data.modified),{},m({},o,n)),original:h(h({},e.form.data.original),{},m({},o,t))})})}:{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{modified:n,original:t})})})},UPDATEMODALFILTER:function(e,t){var r=t.payload,t=r.filter,r=r.modalId;return h(h({},e),{},{modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},m({},r,h(h({},e.modals.windows[r]),{},{data:h(h({},e.modals.windows[r].data),{},{filter:t})})))})})},SETPROCESSPARAMETERS:function(e,t){var r=t.payload,n=r.parameters,t=r.modalId;if(n){var r=(t?e.modals.windows[t]:e.form).data,o=h({},r.modified),a=h({},r.original);return Object.keys(o).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){delete o[e]}),Object.keys(a).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){delete a[e]}),Object.keys(n).forEach(function(e){o["_wp".concat(e)]=a["_wp".concat(e)]=n[e]}),h(h({},e),{},t?{modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},m({},t,h(h({},e.modals.windows[t]),{},{data:h(h({},e.modals.windows[t].data),{},{modified:o,original:a})})))})}:{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{modified:o,original:a})})})}},UPDATE:function(e,t){var r,n=t.payload,o=n.key,a=n.value,i=n.modalId,l=n.additionalValues,s=null,s=o?((r={})[o]=a,l&&!Array.isArray(l)&&Object.keys(l).forEach(function(e){r["".concat(o,"_").concat(e)]=l[e]}),G((i?e.modals.windows[i]:e.form).data.modified,r)):a;if(i){t=h({},e);t.modals.windows[i]||(t.modals.windows[i]={});n=t.modals.windows[i].data;return n?(a=t.modals.windows[i].data.original,W(s,a)?n.isDirty=!!n.isNew&&n.isDirty:n.isDirty=!0,n.modified=s,n.additionalValues[o]=l):((n=new{original:null,modified:s,isDirty:!0,isNew:!0,additionalValues:{}}).additionalValues[o]=l,t.modals.windows[i].data=n),t}s=W(s,e.form.data.original)?h(h({},e),{},{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{isDirty:!!e.form.data.isNew&&e.form.data.isDirty,modified:s}),errors:null})}):h(h({},e),{},{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{isDirty:!0,modified:s})})});return s},SAVE:{BEGIN:function(e){return h(h({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){var r=t.payload,t=r.data,r=r.modalId,e=h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,form:h({},e.form)});return r?e.modals.windows[r]&&(e.modals.windows[r].errors=null,(r=e.modals.windows[r].data).isNew=!1,r.isDirty=!1,null!==t&&(Z(r.modified,t),r.modified=t),r.original=Q(r.modified)):(e.form.errors=null,e.form.data.isNew=!1,e.form.data.isDirty=!1,null!==t&&(Z(e.form.data.modified,t),e.form.data.modified=t),e.form.data.original=e.form.data.modified,Object.values(e.modals.windows).forEach(function(e){e=e.data;e.isNew=!1,e.isDirty=!1,e.original=Q(e.modified)})),e},FAILURE:n.failure},DELETE:{BEGIN:function(e){return h(h({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){t.payload;return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1})},FAILURE:n.failure}}};function y(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function v(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?y(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var g=Object(o.handleActions)({APP:{USERINFO:{FETCH:{BEGIN:function(e){return v(v({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){t=t.payload.user;return v(v({},e),{},{user:t,fetchCount:e.fetchCount<=0?0:e.fetchCount-1})},FAILURE:function(e,t){var r=t.payload,t=r.error,r=r.details;return v(v({},e),{},{error:t,errorDetails:r,fetchCount:e.fetchCount<=0?0:e.fetchCount-1})}}},CLEARERRORS:function(e){return v(v({},e),{},{error:void 0,errorLevel:void 0,errorDetails:void 0})},FAILURE:function(e,t){var r=t.payload,n=r.error,t=r.details,r=r.level;return v(v({},e),{},{error:n,errorLevel:r,errorDetails:t,fetchCount:e.fetchCount<=0?0:e.fetchCount-1})},FETCHBEGIN:function(e){return v(v({},e),{},{fetchCount:e.fetchCount+1})},RESETFETCHCOUNT:function(e){return v(v({},e),{},{fetchCount:0})},FORM:n,IMPERSONATEDUSERIDFROMURL:function(e){return v(v({},e),{},{impersonatedUserId:dt.common.getParameterFormUrlOrCookie("impersonatedUserId")})},SETAUTH:function(e,t){t=t.payload.type;return v(v({},e),{},{authType:t})}}},u.app),w=Object(o.handleActions)({UPDATESTATE:function(e,t){t=t.payload.stateDelta;if(!t||H(t))return e;var r=G(e,t);return Object.keys(r.app.modals.windows).forEach(function(e){r.app.modals.windows[e]||delete r.app.modals.windows[e]}),r}},u),O=["copy"];function C(e){var t={urlFilter:null,type:null,name:null,options:null,command:null};if(e){e="string"==typeof e?e:e.pathname;return e.includes("?")?S(e.split("?")[0],t):S(e,t)}return t}function S(e,t){var r=e.split("/");return 1<r.length&&(t.type=r[1]),2<r.length&&(t.name=r[2]),3<r.length&&(t.urlFilter=r[3]),5===r.length&&(e=r[4],O.includes(e)?t.command=e:t.options=e),5<r.length&&(t.command=r[4],t.options=r[5]),t}function k(e,t,r){r=!(2<arguments.length&&void 0!==r)||r,e=e.split("/");return 3<e.length?e[3]=t:e.push(t),r&&4<e.length&&O.includes(e[4])&&(5===e.length?e.pop():e.slice(4,1)),e.join("/")}var N={filterFromLocation:function(e){return C(e).urlFilter},formFilterFromLocation:function(e){var t=V.getState(),r=C(e),e=r.type,r=r.urlFilter;return!e||e!==t.settings.form&&e!==t.settings.flow&&e!==t.settings.workflow?null:r},typeFromLocation:function(e){var t=C(e),e=t.type;t.name;return e},nameFromLocation:function(e,t){var r=C(e),e=r.type,r=r.name;return e&&e.toLowerCase()===t?r:null},changeFilter:function(e,t,r){var n=e.pathname;if(n.includes("?")){e=n.split("?");return"".concat(k(e[0],t,r),"?").concat(e[1])}return k(n,t,r)},formDataFromLocation:function(e){var t=C(e),r=t.urlFilter,e=t.options;return t.type!==V.getState().settings.form?{urlFilter:null,options:null}:{urlFilter:r,options:e}},deconstructLocation:C,getParamValue:function(e,t){return!e||!e.search||e.search.length<2?null:new URLSearchParams(e.search.substring(1)).get(t)}},E={getWindowLocation:function(){return window.location},setCurrentLocation:function(e){return window.location.href=e},loadScript:function(e,t){var r;window.document&&((r=window.document.createElement("script")).src="data:text/javascript,"+encodeURIComponent(e),window.document.body.appendChild(r),t&&t())},openExcel:function(e,t){var r=document.createElement("a"),t=new Blob([t],{type:"application/vnd.ms-excel"}),e=e.fileName||e.propertyName+".xlsx";r.setAttribute("href",window.URL.createObjectURL(t)),r.setAttribute("download",e),document.body.appendChild(r),r.onclick=function(){return window.document.body.removeChild(r)},r.click()},getCookie:function(){return window.document&&window.document.cookie},setCookie:function(e){window.document&&(window.document.cookie=e)}};function P(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function j(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?P(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):P(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var x=Object(o.handleActions)({ROUTER:{ROUTECHANGED:function(e,t){var r=t.payload,n=r.history,t=r.location,r=r.changeRefreshKey;return j(j({},e),{},{push:null,redirect:null,refresh:null,reload:null,history:n,location:t,refreshKey:r?J():e.refreshKey})},PUSH:function(e,t){t=t.payload.newurl;return j(j({},e),{},{push:t,redirect:null,refresh:null,reload:null})},REDIRECT:function(e,t){t=t.payload.newurl;return j(j({},e),{},{redirect:t,push:null,refresh:null,reload:null})},REFRESH:function(e,t){t=t.payload.newurl;return j(j({},e),{},{refresh:t,reload:null,redirect:null,push:null})},RELOAD:function(e,t){t=t.payload.newurl;return j(j({},e),{},{reload:t,refresh:null,redirect:null,push:null})},CHANGEURLFILTER:function(e,t){var r=t.payload,n=r.newfilter,t=r.clearCommand,r=E.getWindowLocation();return j(j({},e),{},{redirect:N.changeFilter(r,n,t),push:null,refresh:null,reload:null})},SETSCREEN:function(e,t){t=t.payload.screen;return j(j({},e),{},{screen:t})}}},u.router);function _(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach(function(e){D(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=Object(o.handleActions)({SETTINGS:{SET:function(e,t){var r=t.payload,t=r.key,r=r.value;return R(R({},e),{},D({},t,r))}}},u.settings),F={preFetchUser:function(){return Promise.resolve()},logoff:function(){var e=E.getWindowLocation();E.setCurrentLocation(e.href)},onLogon:function(){}},A={cookie:F},I={get:function(e){e=e.getState().app.authType,e=A[e];return e||F},addProvider:function(e,t){return A[e]=t}},B=(Object(c.combineReducers)({"":w,app:g,router:x,settings:T}),Object(c.createStore)(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return"UPDATESTATE"===t.type?w(e,t):{app:g(e.app,t,e),router:x(e.router,t,e),settings:T(e.settings,t,e)}},u,Object(t.composeWithDevTools)(Object(c.applyMiddleware)(i.a))));B.getState().app.addQueryParams=function(e){for(var t in B.additionalParams||(B.additionalParams={}),e)B.additionalParams[t]=e[t]},B.resetForm=function(e){var t=B.getState();t.app.form=u.app.form,e&&(t.app.modals.models={})},B.logoff=function(){I.get(B).logoff().then(function(){B.resetStateInStorage()}).catch(function(e){B.dispatch(L.app.failure("Logoff failed",e.message,1))})},B.login=function(r){I.get(B).onLogon().then(function(){B.dispatch(dt.userinfo.fetch(function(e){r&&r(e);var t=B.getState().settings.router;t&&t.userLoaded&&t.userLoaded(e)}))}).catch(function(e){B.dispatch(L.app.failure("Logon failed",e.message,1))})},B.encodeQueryData=function(e){var t,r=[],n=B.getState();for(t in n.app.impersonatedUserId&&r.push("impersonatedUserId="+encodeURIComponent(n.app.impersonatedUserId)),e)e.hasOwnProperty(t)&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r.join("&")},B.getAuthState=function(){var e=I.get(B);return null==e.getAuthState&&console.log("getAuthState is not implemented for this auth provider."),e.getAuthState()},B.setAuthState=function(e){var t=I.get(B);return null==t.setAuthState&&console.log("setAuthState is not implemented for this auth provider."),t.setAuthState(e)},B.loadStateFromStorage=function(){console.log("loadStateFromStorage is not implemented for this build.")},B.saveStateToStorage=function(){console.log("loadStateFromStorage is not implemented for this build.")},B.resetStateInStorage=function(){};var V=window.DWKitStore=B;function M(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach(function(e){z(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var W=function(e,t){return JSON.stringify(e)===JSON.stringify(t)};function H(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return;return 1}function q(e,t){return t}var G=function(e,t){return s()(e,t,{arrayMerge:q})},J=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},$=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(Z|([+\-])(\d{2}):(\d{2}))$/;function Y(e,t){return"string"==typeof t&&$.test(t)?new Date(t):t}function Q(e){var t,r,n=U({},e);for(t in n)Array.isArray(n[t])&&(r=[],e[t].forEach(function(e){"object"===K(e)?r.push(U({},e)):r.push(e)}),n[t]=r);return n}function Z(t,r){t&&Object.keys(t).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){r[e]=t[e]})}function X(){return window.DWKitAdminLang}function ee(e,t){var r=t.model,n=t.data,o=t.mapping,a=t.hideControls,i=t.readOnlyControls,l=t.readOnly,s=t.filters,t=t.errors;return function t(r){return Object.keys(r).forEach(function(e){r[e]&&"object"===K(r[e])?t(r[e]):void 0===r[e]&&delete r[e]}),r}(e?{app:{modals:{models:z({},V.getState().app.modals.windows[e].name,{model:r,mapping:o}),windows:z({},e,{data:{modified:n},hideControls:a,readOnlyControls:i,readOnly:l,filters:s,errors:t})}}}:{app:{form:{data:{modified:n},models:{model:r,mapping:o,hideControls:a,readOnlyControls:i,readOnly:l},filters:s,errors:t}}})}var te,re=r(2),t=r(4),ne=r.n(t),oe=function(e,t,r,o,n,a){var i=new FormData;i.append("request",JSON.stringify(t));t=V.getState().settings,e=t.executeaction+"?"+V.encodeQueryData({name:e});a&&(e+="&useServerCodeActionRequest=true"),t.mobile&&(e+="&mobile=true");i=(i=dt.configuredFetch(e,{method:"post",body:i})).then(function(e){return e.json()});if(r&&(i=i.then(function(e){var t=r(e);return void 0!==t?t:e})),n&&(i=i.then(function(e){if(null!=e){if(e.success){var t={},r=!1,n=e.result;return null==n?{}:(n.hasOwnProperty("data")&&(t.data=n.data,r=!0),n.hasOwnProperty("stateDelta")&&(t.stateDelta=n.stateDelta,r=!0),r||(t.stateDelta=n),o&&V.dispatch(actions.updatestate(t.stateDelta)),t)}if(!o)throw{level:1,message:e.message,details:e.details};V.dispatch(actions.app.failure(e.message,e.details,1))}return{}})),!o)return i},ae={getModelConrol:function(e,t){for(var r in e){var n=e[r];if(n.key==t)return n;if(n.children&&0<n.children.length){r=ae.getModelConrol(n.children,t);if(null!=r)return r}if(n.placeholders)for(var o in n.placeholders){o=ae.getModelConrol(n.placeholders[o],t);if(null!=o)return o}}},changeModelControl:function(e,t,r,n){return ae.changeModelControls(e,[{key:t,name:r,value:n}])},changeModelControls:function(e,t){function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.key==n.key&&(e[n.name]=n.value)}if(null!=e.children&&0<e.children.length)for(var o in e.children)i(e.children[o],t);if(null!=e.placeholders&&0<e.placeholders.length)for(var a in e.placeholders)i(e.placeholders[a],t)}var r,n=e.modalId?e.state.app.modals.windows[e.modalId].name:null,o=(e.modalId?e.state.app.modals.models[n]:e.state.app.form.models).model;for(r in o)i(o[r],t);return ee(e.modalId,{model:o})},setDataField:function(e,t,r){V.dispatch(L.app.form.data.update(e,t,r))},rewriteControlModel:function(e,t,r){var n=V.getState(),o=r?n.app.modals.windows[r].name:null,n=(r?n.app.modals.models[o]:n.app.form.models).model,a=ae.getModelConrol(n,e),i=t(a);if(i!==a)for(var l in i)a[l]=i[l]},clearErrors:function(){V.dispatch(L.app.clearerrors())},forceUpdate:function(){V.dispatch(L.updatestate({}))},redirectToForm:function(e,t){ae.redirect("form",e,t)},redirectToFlow:function(e,t){ae.redirect("flow",e,t)},redirectToUrl:function(e){V.dispatch(L.router.push(e))},redirect:function(e,t,r){t="/"+e+"/"+t;null!=r&&(t+="/"+r),V.dispatch(L.router.push(t))},formValidate:function(e){return Te.validate(e)},createElement:function(e,t,r){return l.a.createElement(e,t,r)},checkRole:function(e){return De.checkRole(e,V.getState())},checkPermission:function(e,t){return De.checkPermission(e,V.getState(),t)},callUrl:function(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],t=dt.configuredFetch(e,t);return n&&(t=t.then(function(e){return e.json()})),t=r?t.then(function(e){return r(e)}):t},callServerCodeAction:function(e,t,r,n,o){return oe(e,t,r,!1,n,o)},callServerCodeActionDispatch:function(e,t,r,n){oe(e,t,r,!0,autoResultProcessing,useServerCodeActionRequest)},openModal:function(e,t,r){var n=r.type,o=r.viewType,a=r.sidebarWidth,i=r.sidebarFrom,l=r.onOpenFunc,s=r.onCloseFunc,c=r.callContext,u=r.closeOnOutsideClick,p=r.data,f=V.getState(),r=f.app.modals.order.length?f.app.modals.order[f.app.modals.order.length-1]:null;return Te.openModal({modalId:r,state:f,controlRef:void 0,parameters:{filter:t,name:e,type:n,viewType:o,sidebarSettings:{from:i,width:a},onOpenFunc:l,onCloseFunc:s,closeOnOutsideClick:u,data:p},callContext:c})},openModalDispatch:function(e,t,r){var n=r.type,o=r.viewType,a=r.sidebarWidth,i=r.sidebarFrom,l=r.onOpenFunc,s=r.onCloseFunc,c=r.callContext,u=r.closeOnOutsideClick,r=r.data,r=ae.openModal(e,t,{type:n,viewType:o,sidebarWidth:a,sidebarFrom:i,onOpenFunc:l,onCloseFunc:s,callContext:c,closeOnOutsideClick:u,data:r});"function"==typeof r?r(V.dispatch).then(function(e){e&&e.stateDelta&&V.dispatch(L.updatestate(e.stateDelta))}):V.dispatch(L.updatestate(r))},executeActions:function(e){return dt.form.executeActions(e)},executeActionsDispatch:function(e){V.dispatch(dt.form.executeActions(e))},setCookie:function(e,t){dt.common.setCookie(e,t)},getCookie:function(e){return dt.common.getCookie(e)},getParameterFormUrlOrCookie:function(e){return dt.common.getParameterFormUrlOrCookie(e)},setAuth:function(e){V.dispatch(L.app.setauth(e))},loadBackendScript:function(e,t,r){return dt.configuredFetch(e,t).then(function(e){return e.text()}).then(function(e){E.loadScript(e,r)}).catch(function(e){console.error(e)})},convertToState:ee,getWindowState:(te=function(e,t){return getWindowState(e,t)},ie.toString=function(){return te.toString()},ie),validate:function(e,t,r){r=r||V.getState(),e=e||(t?r.app.modals.models[r.app.modals.windows[t].name]:r.app.form).data.modified;for(var n=!0,o={},a=t?De.getControlsForValidate(r.app.modals.models[r.app.modals.windows[t].name].model):De.getControlsForValidate(r.app.form.models.model),i=0;i<a.length;i++){var l=a[i].propertyName||a[i].key,s=De.validate(a[i],e[l],e);s&&(o[l]=s,n=!1)}return n?null:o},loadImage:function(e,r){e=V.getState().settings.datadownload+e;ae.callUrl(e,void 0,void 0,!1).then(function(e){return e.blob()}).then(function(e){var t;0==e.size?r(void 0):((t=new FileReader).onload=function(){r(this.result)},t.readAsDataURL(e))})}};function ie(e,t){return te.apply(this,arguments)}var le=ae;function se(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue={open:function(e,t,r,n,o,a,i,l,s,c,u,p,f,d){null===n&&(n=void 0);var h="form"===l,m="flow"===l,y="workflow"===l,b=h?t.app.modals.models[r]:null,v=se(t.app.modals.order),g=r+"_"+v.length;v.push(g);var w={};return w[g]={id:g,parentId:e,data:{isDirty:!1,isNew:a,original:n,modified:n,additionalValues:{},filter:o,property:i},errors:null,name:h?r:null,type:l,viewType:s,sidebarSettings:c,onOpenFunc:u,onCloseFunc:p,preventLoad:void 0!==n,flowName:m?r:void 0,schemeName:y?r:void 0,keyIndex:0,callContext:f,closeOnOutsideClick:d},h?!b&&h?function(e){return dt.form.fetchform(r,g)(e).then(function(){if(w[g].onOpenFunc&&!w[g].onOpenFunc(g,w[g],t))return{};return re.Promise.resolve({stateDelta:{app:{modals:{windows:w,order:v}}}})})}:{app:{modals:{windows:w,order:v}}}:y?function(e){return dt.form.fetchworkflow(r,o,w[g],a&&!!o)(e).then(function(){if(w[g].onOpenFunc&&!w[g].onOpenFunc(g,w[g],t))return{};return re.Promise.resolve({stateDelta:{app:{modals:{windows:w,order:v}}}})})}:function(e){return dt.form.fetchflow(r,o,w[g],a&&!!o)(e).then(function(){if(w[g].onOpenFunc&&!w[g].onOpenFunc(g,w[g],t))return{};return re.Promise.resolve({stateDelta:{app:{modals:{windows:w,order:v}}}})})}}};function pe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function fe(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):pe(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var de={edit:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;return de.operation({state:t,controlRef:r,parameters:n,modalId:e,op:"edit"})},create:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;return de.operation({state:t,controlRef:r,parameters:n,modalId:e,op:"create"})},copy:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;return de.operation({state:t,controlRef:r,parameters:n,modalId:e,op:"copy"})},operation:function(e){var t=e.state,r=e.controlRef,n=e.parameters,o=e.modalId,a=e.op,i=r.props,l="copy"===a,s="create"===a,c=void 0!==r.props.editType||"form"===r.props.editType,u=i.editForm;"flow"===r.props.editType?u=i.editFlow:"workflow"===r.props.editType&&(u=i.editWorkflow);var p=null,f=null,e=de.getSelectedRow({parameters:n,controlRef:r});if(!e&&!s)return{};a=r.props.name,i=r.props.propertyName&&""!=r.props.propertyName?r.props.propertyName:a,p=!s&&e.__loaded&&c?(c=t.app.modals.models[u],i=(o?t.app.modals.model[t.app.modals.windows[o].name]:t.app.form.models).mapping.toData[i],c=c.mapping.toForm,f=de.mapRow(de.mapRow(e,i),c),l&&(f.__id="CLIENT_"+J()),f.__id):s?null:e.__id;s&&((f=fe({},n)).__id||(f.__id="CLIENT_"+J()));return ue.open(o,t,u,f,p,l||s,a,r.props.editType||"form",r.props.editFormShowType,{from:r.props.sidebarDirection,width:n.sidebarWidth},void 0,function(e){var t=V.getState();V.dispatch(dt.form.executeActions({actions:["modalClosed"],controlRef:r,formName:t.app.modals.windows[e.modalId].name,modalId:o,parameters:e})),null!=r&&null!=r.props.handleEvent&&r.props.handleEvent({key:r.props.name,eventName:"onModalClosed",parameters:e})})},mapRow:function(e,r,n){var t,o={};for(t in e)!function(t){t.startsWith("__")&&(o[t]=e[t]),r&&r[t]&&(o[r[t]]=e[t],n&&n[t]&&Object.keys(n[t]).forEach(function(e){o["".concat(r[t],"_").concat(e)]=n[t][e]}))}(t);return o},getSelectedRow:function(e){var t=e.parameters,r=e.controlRef,n=-1;if("object"===K(e=t.rowIdx)&&null===e||void 0===e?0<r.state.selectedIndexes.length&&(n=r.state.selectedIndexes[0]):n=t.rowIdx,!(n<0))return r.state.items[n]}},he=de;function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ye=new(function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r={},(t="map")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var e,t,r;return e=n,(t=[{key:"register",value:function(e,t){if(ye.map[e])throw new Error("Component "+e+" already registered!");ye.map[e]=t}},{key:"draw",value:function(e,t){var r=ye.map[e];if(!r)throw new Error("Cannot find draw function for ".concat(e,", ").concat(t));return r(t)}}])&&me(e.prototype,t),r&&me(e,r),n}()),c=ye.register,be=ye.draw;function ve(e,t,r){return be("alert",{message:e,type:t,props:r})}function ge(e,t){return ve(e,"error",t)}function we(e,t){return ve(e,"success",t)}var i=r(41),Oe=r.n(i);function Ce(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(r),!0).forEach(function(e){je(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e,n){var o=e.key,t=e.actions,a=e.controlRef,i=e.sourceControlRef,l=e.sourceControlValue,s=e.parameters,c=e.component,u=e.formName,p=e.schemeName,f=e.modalId,r=e.callContext;function d(e){return f?e.app.modals.windows[f]:e.app.form}if(!t||t.length<1)return re.Promise.resolve();var h,e=null==u?"":u.toLowerCase(),m=window.globalUserActions,y=window.DWKitApp.ActionHandlers?window.DWKitApp.ActionHandlers[e]:void 0,b=V.getState(),v=Pe({},b),g=null===(e=d(v)).data.modified?null:Pe({},e.data.modified),w=null===e.data.original?null:Pe({},e.data.original),O=null,C={},S=r||{};for(h in t)!function(e){var r=t[e];O=O?O.then(function(e){var t=e.data,e=e.stateDelta;return e&&(C=G(C,e),v=G(v,e)),Re(o,r,m,y,a,i,l,s,t,w,v,c,u,p,f,n,S)}):Re(o,r,m,y,a,i,l,s,g,w,v,c,u,p,f,n,S)}(h);return O=O.then(function(e){var t=e.data,r=e.stateDelta;r&&(C=G(C,r));e=d(b);f?W(e.data.modified,t)||((r={app:{modals:{windows:je({},f,{})}}}).app.modals.windows[f].data={modified:t},C=G(C,r)):W(e.data.modified,t)||(C=G(C,{app:{form:{data:{modified:t}}}})),H(C)||n(L.updatestate(C))})}var _e=r(16),Re=function(e,t,r,n,o,a,i,l,s,c,u,p,f,d,h,m,y){function b(e){return{data:e&&e.data?e.data:s,stateDelta:e&&e.stateDelta?e.stateDelta:null}}var v=null;if(!(v=(v=!(v=n?n[t]:v)&&r?r[t]:v)||Te[t]))return le.callServerCodeAction(t,{data:s,parameters:l,formName:f,modalId:h},void 0,!0,!0).then(b);t=null;try{t=v({key:e,data:s,originalData:c,state:u,component:p,formName:f,schemeName:d,controlRef:o,sourceControlRef:a,sourceControlValue:i,parameters:l,modalId:h,callContext:y})}catch(e){return re.Promise.reject(e)}return t&&t.then instanceof Function?t.then(b):t instanceof Function?t(m).then(function(e){return re.Promise.resolve({data:e&&e.data?e.data:s,stateDelta:e&&e.stateDelta?e.stateDelta:null})}):re.Promise.resolve({data:s,stateDelta:t})},De={getControlsForValidate:function(e){var n=[];return e.forEach(function(e){var t;if((!0===e["other-required"]||void 0!==e["other-customValidation"]&&""!==e["other-customValidation"])&&n.push(e),void 0!==e.children&&0<e.children.length&&(t=De.getControlsForValidate(e.children),n=n.concat(t)),void 0!==e.placeholders)if("collectioneditor"===e["data-buildertype"])n.push(e);else for(var r in e.placeholders){r=De.getControlsForValidate(e.placeholders[r]);n=n.concat(r)}"customblock"===e["data-buildertype"]&&"source"===e.sourceType&&null!=e.source&&(t=ne.a.parse(e.source),t=De.getControlsForValidate(t),n=n.concat(t))}),n},validate:function(e,t,r){var n=void 0;if(!0===e["other-required"]&&(null==t||""===t||"collectioneditor"===e["data-buildertype"]&&Array.isArray(t)&&0===t.length))n="This field is required!";else if(void 0!==e["other-customValidation"]&&""!==e["other-customValidation"]){var o="return "+e["other-customValidation"],r=new Function("value, data",o)(t,r);"boolean"==typeof r?!1===r&&(n=!0):n=r}else if("collectioneditor"===e["data-buildertype"]&&Array.isArray(t)&&0<t.length&&Array.isArray(e.columns)){var a,i=[],l=!1;for(a in t){var s=t[a];if(null!=s&&null!=s){var c,u={__id:s.__id},p=!1;for(c in e.columns){var f,d=e.columns[c];"custom"==d.control&&e.placeholders&&(f=e.placeholders[d.key],Array.isArray(f)&&0<f.length&&((f=De.validate(f[0],s[d.key],s))&&(p=!0,u[d.key]=f)))}p&&(l=!0,i.push(u))}}l&&(n=i)}return n},initDefaultState:function(e,t){if(Array.isArray(e)&&void 0!==t)for(var r,n=0;n<e.length;n++){if(void 0!==e[n].defaultValue&&""!==e[n].defaultValue&&(t[e[n].propertyName||e[n].key]=e[n].defaultValue),Array.isArray(e[n].children)&&De.initDefaultState(e[n].children,t),void 0!==e[n].placeholders)for(var o in e[n].placeholders)De.initDefaultState(e[n].placeholders[o],t);"customblock"===e[n]["data-buildertype"]&&"source"===e[n].sourceType&&null!=e[n].source&&(r=ne.a.parse(e[n].source),De.initDefaultState(r,t))}},initDefaultStateFormUrl:function(e){void 0===e&&(e={});var t=function(e){if(window.location&&window.location.href.href){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0}return null}("defaultvalues");if(t){var r=void 0;try{r=ne.a.parse(t)}catch(e){}if(r&&"object"===ke(r))for(var n in r)void 0!==r[n]&&(e[n]=r[n])}return e},checkPermission:function(e,t,r){var n=(r?t.app.modals.models[t.app.modals.windows[r].name]:t.app.form).formParams.permissions;if(Array.isArray(n))for(var o=0;o<n.length;o++)if(n[o].code===e)return 1===n[o].accessType||0===n[o].accessType;return!1},checkRole:function(e,t){return void 0!==t.app.user&&void 0!==t.app.user.roles&&t.app.user.roles.includes(e)},checkConditions:function(e){var t=e.model,r=e.data,n=e.state,o=e.modalId,a={hideControls:[],readOnlyControls:[]};if(null===t||null===r)return a;for(var i=0;i<t.length;i++){var l,s=t[i]["other-visibleConition"];if(void 0!==s&&""!==s&&(new Function("data, checkPermission, checkRole","return "+s)(r,function(e){return De.checkPermission(e,n,o)},function(e){return De.checkRole(e,n)})||a.hideControls.push(t[i].key)),void 0!==(s=t[i]["other-readOnlyConition"])&&""!==s&&(new Function("data, checkPermission, checkRole","return "+s)(r,function(e){return De.checkPermission(e,n,o)},function(e){return De.checkRole(e,n)})&&a.readOnlyControls.push(t[i].key)),Array.isArray(t[i].children)&&(l=De.checkConditions({model:t[i].children,data:r,state:n,modalId:o}),a={hideControls:a.hideControls.concat(l.hideControls),readOnlyControls:a.readOnlyControls.concat(l.readOnlyControls)}),void 0!==t[i].placeholders)for(var c in t[i].placeholders){c=De.checkConditions({model:t[i].placeholders[c],data:r,state:n,modalId:o});a={hideControls:a.hideControls.concat(c.hideControls),readOnlyControls:a.readOnlyControls.concat(c.readOnlyControls)}}"customblock"===t[i]["data-buildertype"]&&"source"===t[i].sourceType&&null!=t[i].source&&(l=ne.a.parse(t[i].source),l=De.checkConditions({model:l,data:r,state:n,modalId:o}),a={hideControls:a.hideControls.concat(l.hideControls),readOnlyControls:a.readOnlyControls.concat(l.readOnlyControls)})}return a}},Te={initSystem:function(e){var t=e.state,r=e.data,n=e.modalId,o=(n?t.app.modals.models[t.app.modals.windows[n].name]:t.app.form.models).model,a=(n?t.app.modals.models[t.app.modals.windows[n].name]:t.app.form).formParams,i=null;if(a&&a.securityGroup){var l=a.permissions;if(Array.isArray(l))for(var i=!0,s=0;s<l.length;s++)if("Edit"===l[s].code){1==l[s].accessType&&(i=!1);break}}if((n?t.app.modals.windows[n]:t.app.form).data.isNew){e=r;De.initDefaultState(o,e),De.initDefaultStateFormUrl(e);a=De.checkConditions({model:o,data:e,state:t,modalId:n});return n?{app:{modals:{windows:je({},n,{data:{original:e,modified:e},hideControls:a.hideControls,readOnlyControls:a.readOnlyControls,readOnly:i})}}}:{app:{form:{data:{original:e,modified:e},models:{hideControls:a.hideControls,readOnlyControls:a.readOnlyControls,readOnly:i}}}}}t=De.checkConditions({model:o,data:r,state:t,modalId:n});return n?{app:{modals:{windows:je({},n,{hideControls:t.hideControls,readOnlyControls:t.readOnlyControls,readOnly:i})}}}:{app:{form:{models:{hideControls:t.hideControls,readOnlyControls:t.readOnlyControls,readOnly:i}}}}},init:function(e){},dataReceived:function(e){},modalClosed:function(e){},checkConditions:function(e){var t=e.data,r=e.state,n=e.modalId,e=(n?r.app.modals.models[r.app.modals.windows[n].name]:r.app.form.models).model,r=De.checkConditions({model:e,data:t,state:r,modalId:n});return n?{app:{modals:{windows:je({},n,{hideControls:r.hideControls,readOnlyControls:r.readOnlyControls})}}}:{app:{form:{models:{hideControls:r.hideControls,readOnlyControls:r.readOnlyControls}}}}},workflowExecuteCommand:function(e){var o=e.formName,a=e.state,s=e.parameters,c=e.modalId,u=e.callContext,p=e.schemeName,f=e.data,d=u.commandFormResult&&u.commandFormResult.commandParams?u.commandFormResult.commandParams:null;return function(i){i(L.app.form.data.fetch.begin());var r=c?a.app.modals.windows[c]:a.app.form,l=(null!=s.row&&null!=s.row.__id?s.row:f).__id;l||(e=E.getWindowLocation(),l=c?r.data.filter:N.filterFromLocation(e));var n,t,e={command:s.command.value,name:o,id:l};return p&&(e.schemeName=p),d&&(n={},t=u.commandFormResult.model,Object.keys(d).forEach(function(e){le.getModelConrol(t,e)&&(n[e]=d[e])}),Object.keys(r.data.modified).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){var t=e.substring(3);n[t]||_e(r.data.modified[e],r.data.original[e])||(n[t]=r.data.modified[e])}),Object.keys(n).length&&(e.data=JSON.stringify(n))),dt.configuredFetch(V.getState().settings.workflowexecute+"?"+V.encodeQueryData(e),{method:"post"}).then(function(e){return e.json()}).then(function(e){if(e.success){var t="The command execution has been completed!";if(void 0!==X()&&(t=X().msg.commandexecutioncompleted),i(L.app.resetfetchcount()),we(t),p){var r=e.item,n=(r&&r.entity,r?r.entityId:null),o=null!=n,a={};return o&&n!=l&&o&&(t={},c?t.app={modals:{windows:je({},c,{data:{filter:o?n:void 0}})}}:(r=E.getWindowLocation(),t.router={push:o?N.changeFilter(r,n):void 0}),a.stateDelta=t),re.Promise.resolve(a)}}else i(L.app.form.data.save.failure(e.message,e.details))}).catch(function(e){i(L.app.form.data.save.failure(e.message,e.stack))})}},workflowSetState:function(e){var a=e.formName,i=e.state,l=(e.controlRef,e.parameters),s=e.modalId,c=e.schemeName;return function(r){r(L.app.form.data.fetch.begin());var e,n=s?i.app.modals.windows[s]:i.app.form,t=(null!=l.row&&null!=l.row.__id?l.row:n.data.modified).__id;t||(e=E.getWindowLocation(),t=s?n.data.filter:N.filterFromLocation(e));t={state:l.state.value,name:a,id:t};c&&(t.schemeName=c);var o={};return Object.keys(n.data.modified).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){var t=e.substring(3);_e(n.data.modified[e],n.data.original[e])||(o[t]=n.data.modified[e])}),Object.keys(o).length&&(t.data=JSON.stringify(o)),dt.configuredFetch(V.getState().settings.workflowset+"?"+V.encodeQueryData(t),{method:"post"}).then(function(e){return e.json()}).then(function(e){var t;e.success?(r(L.app.resetfetchcount()),t="The new state was set!",we(t=void 0!==X()?X().msg.newstateset:t)):r(L.app.form.data.save.failure(e.message,e.details))}).catch(function(e){r(L.app.form.data.save.failure(e.message,e.stack))})}},workflowSelectScheme:function(e){var t=e.modalId,e=e.parameters.scheme;return t?{app:{modals:{windows:je({},t,{data:{modified:{__wf_selectedscheme:e}}})}}}:{app:{form:{data:{modified:{__wf_selectedscheme:e}}}}}},save:function(e){var t=e.formName,r=e.modalId,n=e.state,o=e.data,e=e.schemeName;return dt.form.savedata({formName:t,modalId:r,state:n,data:o,schemeName:e})},delete:function(e){var t=e.formName,r=e.data,e=e.schemeName;return dt.common.deleteByIds(t,null,r.__id,void 0,e)},exit:function(e){var t=e.state,r=e.modalId,e=e.parameters;if(t.settings.mobile)return{router:{push:"/"}};if(r){var n=Pe({},t.app.modals.windows);if(null!=n[r]&&null!=n[r].onCloseFunc){var o=n[r].onCloseFunc({modalId:r,modal:n[r],state:t});if(0==o)return{};if("object"===ke(o))return o}o=Ce(t.app.modals.order);return o.pop(),n[r]=null,{app:{modals:{windows:n,order:o}}}}n="/",o=function(e){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0}("backurl");return o?n=o:e&&e.target&&(n=e.target),{router:{push:n}}},confirm:function(e){e=e.parameters;function t(e,t,r){var n=window.DWKitLang;return(e&&n&&n.msg&&n.msg[e]?n.msg[e]:e)||(X()&&X().confirm[t]?X().confirm[t]:r)}var r={title:t(e.confirmTitle,"title","Confirm"),text:t(e.confirmText,"text","Please confirm the action"),ok:t(e.confirmOk,"ok","Ok"),cancel:t(e.confirmCancel,"cancel","Cancel")};return function(e){return be("confirm",{messages:r})}},apply:function(e){var t=e.state,r=e.modalId;if(!r)return{};var n=t.app.modals.windows[r],o=n.data;if(!o||!o.isDirty&&!o.isNew)return{};var a=null,i=null,e=null,r=!!n.parentId;e=r?(i=(c=t.app.modals.windows[n.parentId]).name,a=c.data,t.app.modals.models[i].model):(a=t.app.form.data,t.app.form.models.model);var l=o.modified,s=o.additionalValues,c=o.property,u=c;!u||(o=le.getModelConrol(e,c))&&o.propertyName&&""!=o.propertyName&&(u=o.propertyName);function p(e,t){t=he.mapRow(he.mapRow(t,f,s),d);var r=e.findIndex(function(e){return e.__id===t.__id});0<=r?(e[r]=G(e[r],t),e[r].__loaded=!0):(t.__loaded=!0,e.push(t))}var f=t.app.modals.models[n.name].mapping.toData,d=(r?t.app.modals.models[i]:t.app.form.models).mapping.toForm[u],h=null;if(!u)throw Error("apply action: propertyName is not defined");e=le.getModelConrol(e,c);if("gridview"===e["data-buildertype"]&&"server"===e.pagerType)throw Error("Can't apply to gridview with server paging! Use a custom CodeActions for changing data in DB.");c=Array.isArray(l),e=a.modified[u],a=Array.isArray(e);if(!c&&a)p(h=e,l);else if(c&&a)for(var h=e,m=0;l.length,m++;)p(h,l[m]);else{if(c&&!a)throw Error("apply action: source data are array but target data is not array, can not merge");c||a||(h=G(e,l))}return function(e){return dt.form.updateData(u,h,n.parentId)(e)}},redirect:function(e){e.state;e=e.parameters;if(void 0!==e&&void 0!==e.target)return e.target.includes("http://")||e.target.includes("https://")?void E.setCurrentLocation(e.target):{app:{modals:u.app.modals},router:{redirect:null,push:e.target}};console.error("For call 'redirect' action you need to set the 'target' parameter!")},refresh:function(e){var t=e.state,e=e.modalId;return e?{app:{modals:{windows:je({},e,{keyIndex:t.app.modals.windows[e].keyIndex+1})}}}:{router:{refresh:"refresh"}}},reload:function(){return{router:{reload:"reload"}}},loadRecord:function(e){var t=e.parameters;return null!=t.urlFilter?function(e){return e(L.router.changeurlfilter(t.urlFilter)),re.Promise.resolve()}:t.row&&t.row.__id?function(e){return e(L.router.changeurlfilter(t.row.__id)),re.Promise.resolve()}:(null!=console&&console.log("This action uses parameters.row.__id or parameters.urlFilter. Fill one of them."),{})},validate:function(e){for(var t=e.data,r=(e.originalData,e.state),n=(e.component,e.controlRef,e.eventArgs,e.modalId),o=(e.callContext,!0),a={},i=n?De.getControlsForValidate(r.app.modals.models[r.app.modals.windows[n].name].model):De.getControlsForValidate(r.app.form.models.model),l=0;l<i.length;l++){var s=i[l].propertyName||i[l].key,c=De.validate(i[l],t[s],t);c&&(a[s]=c,o=!1)}if(o)return ee(n,{errors:null});r="Check errors on the form!";throw{level:1,message:r=void 0!==X()?X().msg.checkerrorsonform:r,formerrors:{modalId:n,errors:o?null:a}}},createElement:function(e){var t=e.data,r=(e.model,e.controlRef),n=(e.state,e.parameters),o=e.modelId;if(void 0===n)return{};if(!r)throw{level:1,message:"Fill targets for the createElement event!"};if(r.isServerMode&&r.isServerMode())throw{level:1,message:"The createElement event does not work in Server pagination!"};var a=r.props.propertyName&&""!==r.props.propertyName?r.props.propertyName:r.props.name,e=t[a];Array.isArray(e)||(e=t[a]=[]);var i=r.props.columns;if(Array.isArray(i)){var l,s={__id:"CLIENT_"+J()};for(l in n){for(var c=!1,u=0;u<i.length;u++)if(i[u].key.toLowerCase()===l.toLowerCase()){s[i[u].key]=n[l],c=!0;break}!1===c&&(s[l]=n[l])}e.push(s)}else{r=Pe({},n);r.__id||(r.__id="CLIENT_"+J()),e.push(r)}return ee(o,{data:t})},deleteElement:function(e){var t=e.data,r=(e.model,e.controlRef),n=(e.state,e.parameters),o=e.modelId;if(void 0===n)return{};if(!r)throw{level:1,message:"Fill targets for the createElement event!"};e=r.props.propertyName&&""!==r.props.propertyName?r.props.propertyName:r.props.name,r=t[e],n=n.index;return Array.isArray(r)&&(r=t[e]).length>n&&r.splice(n,1),ee(o,{data:t})},setFilter:function(e){var t=e.key,r=(e.data,e.originalData,e.state),n=(e.component,e.controlRef,e.eventArgs,e.parameters),o=e.sourceControlRef,a=e.sourceControlValue,i=e.modalId,e=t,t=i?r.app.modals.windows[i]&&r.app.modals.windows[i].filters&&r.app.modals.windows[i].filters.hasOwnProperty(e)?r.app.modals.windows[i].filters[e]:[]:null!==r.app.form.filters.main&&r.app.form.filters.main.hasOwnProperty(e)?r.app.form.filters.main[e]:[],r=t.find(function(e){return e.__controlName===o.props.name});return void 0!==r?r.nextValue=null!=a&&""!==a?a:null:null!=a&&""!==a&&((r={}).column=void 0===n.column?o.props.name:n.column.split(",").map(function(e){return e.trim()}).join(","),r.term=void 0===n.term?"like":n.term,r.nextValue=a,r.value=null,r.__controlName=o.props.name,t.push(r)),i?{app:{modals:{windows:je({},i,{filters:je({},e,t)})}}}:{app:{form:{filters:{main:je({},e,t)}}}}},applyFilter:function(e){var t=e.key,r=(e.data,e.originalData,e.state),n=(e.component,e.controlRef,e.eventArgs,e.parameters,e.sourceControlRef,e.sourceControlValue,e.modalId),e=null,t=t;return n?r.app.modals.windows[n]&&r.app.modals.windows[n].filters&&r.app.modals.windows[n].filters.hasOwnProperty(t)&&(e=r.app.modals.windows[n].filters[t]):null!==r.app.form.filters.main&&r.app.form.filters.main.hasOwnProperty(t)&&(e=r.app.form.filters.main[t]),null===e?{}:((e=e.filter(function(e){return null!==e.nextValue})).forEach(function(e){return e.value=e.nextValue}),n?{app:{modals:{windows:je({},n,{filters:je({},t,e)})}}}:{app:{form:{filters:{main:je({},t,e)}}}})},openModal:function(e){var t=e.modalId,r=e.controlRef,n=e.state,o=e.parameters,e=e.callContext;return ue.open(t,n,o.name,o.data,o.filter,!o.filter||o.isCopy,r?r.props.name:null,o.type||"form",o.viewType||"modal",o.sidebarSettings,o.onOpenFunc,o.onCloseFunc,e,o.closeOnOutsideClick)},copy:function(e){var t=e.state,r=e.modalId,e=e.data;if((r?t.app.modals.windows[r]:t.app.form).data.isNew)throw Error("Can't copy new unsaved object");e=e.__id;if(r)return{app:{modals:{windows:je({},r,{data:{isNew:!0,filter:e}})}}};t=N.deconstructLocation(t.router.location);return{router:{push:"/".concat(t.type,"/").concat(t.name,"/").concat(e,"/copy")}}},workflowShowCommandForm:function(e){var t=e.state,r=e.parameters,n=e.callContext,o=e.data;if(t.settings.mobile)return{};if(r.command.form&&r.command.form.name){var a=null;return!o||(t=Object.keys(o).filter(function(e){return e.startsWith("_wp")})).length&&(a={},t.forEach(function(e){a[e.substring(3)]=o[e]})),new re.Promise(function(e,t){le.openModalDispatch(r.command.form.name,null,{onCloseFunc:function(){n.commandFormResult||t(),(n.commandFormResult&&n.commandFormResult.cancel?t:e)()},callContext:n,closeOnOutsideClick:!0,data:a})})}return{}},workflowContinueExecution:function(e){var t=e.state,r=e.modalId,n=e.data,o=e.callContext,e=(r?t.app.modals.models[t.app.modals.windows[r].name]:t.app.form.models).model;return o.commandFormResult={commandParams:n,model:e},Te.exit({state:t,modalId:r})},workflowCancelExecution:function(e){var t=e.state,r=e.modalId;return e.callContext.commandFormResult={cancel:!0},Te.exit({state:t,modalId:r})},gridCreate:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;if(r.isEditFormModal()||r.isEditFormSidebar())return he.create({state:t,controlRef:r,parameters:n,modalId:e});r=r.props;return"flow"!==r.editType?"workflow"!==r.editType?{router:{push:"/form/"+r.editForm+"/"}}:{router:{push:"/workflow/"+r.editWorkflow+"/"}}:{router:{push:"/flow/"+r.editFlow+"/"}}},gridRefresh:function(e){return e.controlRef.refresh(),{}},gridCopy:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;if(r.isEditFormModal()||r.isEditFormSidebar())return he.copy({state:t,controlRef:r,parameters:n,modalId:e});e=r.props;if(e.editFormShowType&&"Default"!==e.editFormShowType)return{};r=he.getSelectedRow({parameters:n,controlRef:r}),r=r?r.__id:void 0;return r?"flow"!==e.editType?{router:{push:"/form/"+e.editForm+"/"+r+"/copy"}}:{router:{push:"/flow/"+e.editFlow+"/"+r+"/copy"}}:{}},gridDelete:function(e){var t=e.state,r=e.controlRef,n=e.formName,o=e.modalId,a=r.props.propertyName||r.props.name;if(r.isServerMode()){var i=r.getSeletedRowKeys();if(0!==i.length)return i=i.filter(function(e){return null!=e&&!e.toString().startsWith("CLIENT_")}),function(e){return dt.common.deleteByIds(n,a,i,function(){var e="Rows have been deleted!";we(e=void 0!==X()?X().msg.rowsdeleted:e),r.refresh()})(e)};e="Please, select rows for deletion!";ge(e=void 0!==X()?X().msg.selectrowsfordelete:e)}else{var l=r.getSeletedRowKeys();if(0!==l.length){var s=(o?t.modals.windows[o]:t.app.form).data.modified[a].filter(function(e){return!l.includes(e.__id)});return function(e){return dt.form.updateData(a,s,o)(e)}}t="Please, select rows for deletion!";ge(t=void 0!==X()?X().msg.selectrowsfordelete:t)}return{}},gridEdit:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;if(r.isEditFormModal()||r.isEditFormSidebar())return he.edit({state:t,controlRef:r,parameters:n,modalId:e});e=r.props;if(e.editFormShowType&&"Default"!==e.editFormShowType)return{};r=he.getSelectedRow({parameters:n,controlRef:r}),r=r?r.__id:void 0;return r?"flow"!==e.editType?"workflow"!==e.editType?{router:{push:"/form/"+e.editForm+"/"+r+"/"}}:{router:{push:"/workflow/"+e.editWorkflow+"/"+r+"/"}}:{router:{push:"/flow/"+e.editFlow+"/"+r+"/"}}:{}},gridExport:function(e){var o=e.controlRef,a=e.parameters,i=e.modalId,l=e.formName;return function(e){var t=Oe.a.chain(o.props.columns).map(function(e){return e.key+":"+e.name}).join(",").value(),r=o.getSort(),n=o.getFilters();return dt.additional.exportToExcel({type:o.props["data-buildertype"],controlRef:o,modalId:i,formName:l,parameters:a,startIndex:0,cols:t,pagerType:o.props.pagerType,sort:r,filters:n})(e)}},changeModel:function(e){var t=e.controlRef,r=e.state,n=e.parameters,e=e.modalId,o=r.app.form.models.model;if(void 0===n)return{};function a(e,t,r){if(t.key!=e){if(null!=t.children&&0<t.children.length)for(var n in t.children)a(e,t.children[n],r)}else for(var o in r)t[o]=r[o]}var i,l=t.props.name;for(i in o)a(l,o[i],n);return ee(e,{model:o})},setFields:function(e){var t,r,n=e.data,o=e.parameters,e=e.modalId;for(t in o)r=o[t],/^-?\d+(?:[.,]\d*?)?$/.test(r)&&(r=parseFloat(r),!isNaN(r))?n[t]=parseFloat(o[t]):n[t]=o[t];return ee(e,{data:n})},print:function(e){var t=void 0;e.parameters&&e.parameters.title&&(t=e.parameters.title),e.component.print||console.error("Print is unsupported for this component!",e),e.component.print(t)}},t=r(1);function Fe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ae(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Fe(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Fe(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}i=Object.getPrototypeOf(new XMLHttpRequest);i!==XMLHttpRequest.prototype&&(XMLHttpRequest.prototype=i);var Ie=XMLHttpRequest.prototype.send,Le=XMLHttpRequest.prototype.setRequestHeader,Ne=null,Be=window.fetch,Ve=[],Me=null,Ue=!1;var ze={addRequestCallback:function(e){Ve.push(e)},removeRequestCallback:function(e){!function(e,t){var r=e.indexOf(t);if(!(-1<r))throw new Error("Could not remove "+t+" from array");e.splice(r,1)}(Ve,e)},isWired:function(){return Ue},wire:function(){if(Ue)throw new Error("Ajax interceptor already wired");XMLHttpRequest.prototype.send=function(){!function(e,t){for(var r=0;r<e.length;r++)e[r](t)}(Ve,this),this.authToken&&Le.apply(this,["Authorization",this.authToken]),Ie.apply(this,arguments)},XMLHttpRequest.prototype.setRequestHeader=function(e,t){"Authorization"===e?(this.authToken=t,Ne=this.authToken):Le.apply(this,arguments)},Ue=!0},unwire:function(){if(!Ue)throw new Error("Ajax interceptor not currently wired");XMLHttpRequest.prototype.send=Ie,XMLHttpRequest.prototype.setRequestHeader=Le,Ue=!1},fetch:function(e,t){var r=t||{},t=r.headers||new Headers;return Ne&&t.append("Authorization",Ne),r.headers=t,Be(e,r)},configureHeaders:function(e){var t=null,t=(t=window.globalFetchOptions?window.globalFetchOptions():t)||Ae({},V.getState().settings.fetchOptions),r=e?"Bearer "+e:null;t.headers=Ae(Ae({},t.headers),{},{Authorization:r}),window.globalFetchOptions||V.dispatch(L.settings.set("fetchOptions",t)),Me?ze.removeRequestCallback(Me):ze.wire(),Me=function(e){e.setRequestHeader("Authorization",r)},ze.addRequestCallback(Me)}},Ke=ze;function We(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function He(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?We(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):We(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function qe(e){e=He({},e);return e.fetchFunc=Ke.fetch,be("dwkit-form",{props:e})}function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function $e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0).forEach(function(e){tt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=et(r);return e=n?(e=et(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Ge(e)&&"function"!=typeof e?Xe(t):e}}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(o,a["Component"]);var e,t,r,n=Ze(o);function o(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),tt(Xe(a=n.call(this,e)),"getAdditionalDataForControl",function(e,t,r){var n=a.props,o=a.state.forCopy||!1;return a.props.additionalFetch(function(){return n.name},n.id,o,e,t,r,a.props.schemeName)}),a.state={},a}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=void 0!==e.filter?e.filter:null,o=null!==t?t.filter:null,a=null,i=e.preventLoad;return!n||o&&W(o,n)?e.preventLoad||null!==n||void 0!==o?!n||!e.isNew||t&&t.isNew||(a={filter:n,forCopy:!0}):i||(a={forCopy:!1}):i||(a={filter:n,forCopy:n&&e.isNew}),null!==(r.childDataRequest=a)&&(r.forCopy=a.forCopy),r.filter=n,r.isNew=e.isNew,r}}],(t=[{key:"componentDidMount",value:function(){this.requestModelAndData()}},{key:"componentDidUpdate",value:function(){this.requestModelAndData()}},{key:"requestModelAndData",value:function(){var e;this.state.childDataRequest&&(e=this.state.childDataRequest,"flow"===this.props.type&&0<this.props.keyIndex?this.props.fetchFlow(this.props.flowName,e.filter,this.props.id,e.forCopy):"workflow"===this.props.type&&0<this.props.keyIndex?this.props.fetchWorkflow(this.props.schemeName,e.filter,this.props.id,e.forCopy):"flow"===this.props.type||this.props.model?this.props.fetchData(null,e.filter,this.props.name,this.props.id,e.forCopy,this.props.schemeName):this.props.fetchForm(this.props.name,e.filter,this.props.id,e.forCopy),this.setState({childDataRequest:null}))}},{key:"render",value:function(){var a=this,i=this.props,e=V.getState().settings,t=e.dataupload,r=e.datadownload;e.backendUrl&&(t=e.backendUrl+t,r=e.backendUrl+r);t={key:"chidForm_"+i.id,formName:i.name,data:i.data,extendedData:{filters:i.controlFilters,schemes:i.schemes},model:this.props.model,errors:i.errors,dataChanged:function(e,t){var r=t.key,n=t.propertyName,o=t.value,t=t.additionalValues;a.props.dataChanged(n||r,o,t,i.id)},eventFunc:function(e){a.props.executeActions($e($e({},e),{},{schemeName:a.props.schemeName,modalId:i.id,callContext:i.callContext}))},getAdditionalDataForControl:this.getAdditionalDataForControl,hideControls:i.hideControls,readOnlyControls:i.readOnlyControls,readOnly:i.readOnly,uploadUrl:t,downloadUrl:r};if(e.userForms){r=t.formName?t.formName.toLowerCase():void 0;if(r&&e.userForms[r]){r=e.userForms[r];return l.a.createElement(r,t)}}return l.a.createElement(qe,t)}}])&&Ye(e.prototype,t),r&&Ye(e,r),o}(),rt=Object(t.connect)(null,function(a){return $e($e({},gt(a)),{},{fetchFlow:function(e,t,r,n){a(dt.form.fetchflow(e,t,r,n)).then(function(){var e=V.getState();a(dt.form.fetchdata(null,t,e.app.modals.windows[r].name,r,n))})},fetchWorkflow:function(t,r,n,o){a(dt.form.fetchworkflow(t,r,n,o)).then(function(){var e=V.getState();a(dt.form.fetchdata(null,r,e.app.modals.windows[n].name,n,o,t))})},fetchForm:function(e,t,r,n){a(dt.form.fetchform(e,r)).then(function(){a(dt.form.fetchdata(null,t,e,r,n))})}})})(i);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function at(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach(function(e){it(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,lt)}var st=r(46),ct={credentials:"same-origin"},ut={},pt={configuredFetch:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=V.getState(),n=window.globalFetchOptions?window.globalFetchOptions():r.settings.fetchOptions||{},o=at(at(at({},ct),n),t),n="",t=V.getState().settings;return t.backendUrl&&!e.startsWith("http")&&(n=t.backendUrl),n+=e,b()(n,o,window.globalFetchOptions).then(function(e){if(r.settings.mobile&&401==e.status)throw V.login(),new lt;return e})},userinfo:{fetch:function(r){return function(t){I.get(V).preFetchUser().then(function(){return t(L.app.userinfo.fetch.begin()),pt.configuredFetch(V.getState().settings.accountget).then(function(e){if(200==e.status)return e.json();e="Error status:"+e.status+".";throw new Error(e)}).then(function(e){e.success?(t(L.app.userinfo.fetch.success(e.item)),r&&r(e.item)):t(L.app.userinfo.fetch.failure(e.message,e.details))}).catch(lt,function(){}).catch(function(e){t(L.app.userinfo.fetch.failure(e,"userinfo.fetch"))})})}}},additional:{fetch:function(e){var g=e.type,w=e.controlRef,O=e.formName,C=e.schemeName,S=e.startIndex,k=e.pageSize,E=e.filters,P=e.sort,j=e.callback,x=e.modalId,_=e.forCopy,R=e.row,D=e.loadParameters,T=e.baseLocation,F=e.fetchUrl,A=e.fetchResponseType,I=e.fetchOptions;return function(t){if("dictionary"===g){for(var e=w.props.dataModel,r=w.props.columns.split(",").map(function(e){return e.trim()}),n=[],o=[],a=0;a<r.length;a++){var i=r[a],l=i.split(/\s+/);1===l.length?o.push(i):2===l.length&&(o.push(l[0]),n.push({column:l[0],order:l[1]}))}e={columns:JSON.stringify(o),sort:JSON.stringify(n),name:e};return null!=E&&(e.filter="string"==typeof E?E:JSON.stringify(E)),null!=S&&null!=k&&(e.paging=JSON.stringify({startIndex:S,pageSize:k})),ft.dictionaryFetch(t,e,S,k,j,function(e){return{items:e.item.map(function(e){var t=w.props.textFunc?w.props.textFunc(e.values):e.value;return{key:e.key,text:t,value:e.key,values:e.values}}),count:e.count}})}if("treepicker"===g){for(var s=w.props.dataModel,e=w.props.parentIdField,c=w.props.columns.split(",").map(function(e){return e.trim()}),u=[],p=[],f=0;f<c.length;f++){var d=c[f],h=d.split(/\s+/);1===h.length?p.push(d):2===h.length&&(p.push(h[0]),u.push({column:h[0],order:h[1]}))}s={columns:JSON.stringify(p),sort:JSON.stringify(u),name:s,parent:e};return E&&(s.filter=JSON.stringify(E)),void 0!==S&&k&&(e=w.state.parentIdToFetch,s.paging=JSON.stringify({startIndex:S,pageSize:k,parentId:e})),ft.dictionaryFetch(t,s,S,k,j,function(e){return{items:e.item.map(function(e){return at(at({},e),{},{name:w.props.textFunc?w.props.textFunc(e.values):e.name})}),count:e.count}})}if("gridview"===g){var m=ft.createUrlData({type:g,controlRef:w,formName:O,startIndex:S,pageSize:k,filters:E,sort:P,callback:j,modalId:x,forCopy:_,baseLocation:T}),s=V.getState().settings;return s.mobile&&(m.mobile=s.mobile),pt.configuredFetch(s.dataget+"?"+V.encodeQueryData(m)).then(function(e){return e.json()}).then(function(e){e.success?j({sIndex:S,pSize:k,rowsCount:e.item["__"+m.propertyName+"_totalcount"],items:e.item[m.propertyName]}):t(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))})}if("repeater"===g){var y=ft.createUrlData({type:g,controlRef:w,formName:O,startIndex:S,pageSize:k,filters:E,sort:P,callback:j,modalId:x,forCopy:_,baseLocation:T}),b=V.getState().settings;return b.mobile&&(y.mobile=b.mobile),pt.configuredFetch(b.dataget+"?"+V.encodeQueryData(y)).then(function(e){return e.json()}).then(function(e){e.success?j({sIndex:S,pSize:k,rowsCount:e.item["__"+y.propertyName+"_totalcount"],items:e.item[y.propertyName]}):t(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))})}if("workflowbar"!==g)return"fetch"===g?"blob"==A?pt.configuredFetch(F,I).then(function(e){return e.blob()}).then(function(e){j(e)}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))}):"json"==A?pt.configuredFetch(F,I).then(function(e){return e.json()}).then(function(e){e.success?j(e):t(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))}):pt.configuredFetch(F,I).then(function(e){return j(e)}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))}):(console.log("TODO: implement getAdditionalDataForControl method for "+g+" control"),Promise.resolve());b=null!=R&&null!=R.__id?R.__id:x?V.getState().app.modals.windows[x].data.filter:(v=V.getState().router.location,N.formFilterFromLocation(v||T));var v={name:O,forCopy:_,loadParameters:D};return C&&(v.schemeName=C),null!==b&&(v.urlFilter=b),ft.buildRequest(t,V.getState().settings.workflowget,v,function(e){return D&&t(L.app.form.data.setprocessparameters(x,e.item.processParameters)),e.item}).then(function(e){e&&j(e)})}},exportToExcel:function(e){var n=e.type,o=e.controlRef,a=e.formName,i=e.startIndex,l=e.filters,s=e.sort,c=e.callback,u=e.modalId,p=e.forCopy,f=e.cols,d=e.pagerType,h=e.parameters;return function(t){var r=ft.createUrlData({type:n,controlRef:o,formName:a,startIndex:i,pageSize:null,filters:l,sort:s,callback:c,modalId:u,forCopy:p,cols:f,pagerType:d,filename:h.filename}),e=V.getState().settings;return e.mobile&&(r.mobile=e.mobile),pt.configuredFetch(e.dataexport+"?"+V.encodeQueryData(r)).then(function(e){return e.blob()}).then(function(e){return E.openExcel(r,e)}).catch(function(e){t(L.app.failure(e.message,e.stack))})}}},form:{clear:function(){return function(e){e(L.app.form.clear())}},fetchform:function(n,o){return function(r){r(L.app.form.model.fetch.begin());var e=V.getState().settings,t={wrapresult:!0,enableSecurity:!0,mobile:e.mobile};return pt.configuredFetch(e.uiform+"/"+n+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t;e.success?(t=e.item,r(L.app.form.model.fetch.success(JSON.parse(t.source),t.mapping,n,o,{schemes:t.schemes,securityGroup:t.securityGroup,permissions:t.permissions,mapping:t.mapping,name:t.name}))):r(L.app.form.model.fetch.failure(e.message,e.details))}).catch(function(e){r(L.app.form.model.fetch.failure(e.message,e.stack))})}},fetchflow:function(r,o,a,i){return function(n){var e=V.getState().settings,t={urlFilter:o};return e.mobile&&(t.mobile=e.mobile),i&&(t.forCopy=i),n(L.app.form.model.fetch.begin()),pt.configuredFetch(e.uiflow+"/"+r+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t,r;e.success?(t=e.item,r=null,a&&("string"==typeof a||a instanceof String?n(L.app.form.model.change(t.name,r=a)):(r=a.id,a.name=t.name)),n(L.app.form.model.fetch.success(JSON.parse(t.source),t.mapping,t.name,r,{schemes:t.schemes,securityGroup:t.securityGroup,permissions:t.permissions,mapping:t.mapping,name:t.name}))):n(L.app.form.model.fetch.failure(e.message,e.details))}).catch(function(e){n(L.app.form.model.fetch.failure(e.message,e.stack))})}},fetchworkflow:function(o,r,a,i){return function(n){var e=V.getState().settings,t={urlFilter:r};return e.mobile&&(t.mobile=e.mobile),i&&(t.forCopy=i),n(L.app.form.model.fetch.begin()),pt.configuredFetch(e.uiworkflow+"/"+o+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t,r;e.success?(t=e.item,r=null,a&&("string"==typeof a||a instanceof String?n(L.app.form.model.change(t.name,r=a)):(r=a.id,a.name=t.name)),n(L.app.form.model.fetch.success(JSON.parse(t.source),t.mapping,t.name,r,{schemes:[o],securityGroup:t.securityGroup,permissions:t.permissions,mapping:t.mapping,name:t.name}))):n(L.app.form.model.fetch.failure(e.message,e.details))}).catch(function(e){n(L.app.form.model.fetch.failure(e.message,e.stack))})}},fetchdata:function(r,o,a,i,l,s){return function(n){n(L.app.form.data.fetch.begin());var e=V.getState().settings,t={name:a};return s&&(t.schemeName=s),r&&(t.filter=JSON.stringify(r)),o&&(t.urlFilter=o),l&&(t.forCopy=!0),e.mobile&&(t.mobile=e.mobile),pt.configuredFetch(e.dataget+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t,r;e.success?(t=l||"object"===nt(e.item)&&!Array.isArray(e.item)&&null===e.item.__id,r=JSON.parse(JSON.stringify(e.item),Y),pt.form.executeActions({formName:a,schemeName:s,eventName:"dataReceived",actions:["dataReceived"],modalId:i,parameters:{data:r}})(n),n(L.app.form.data.fetch.success(r,i,t))):n(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){n(L.app.form.data.fetch.failure(e.message,e.stack))})}},savedata:function(e){var n=e.formName,d=e.modalId,h=e.state,o=e.data,a=e.schemeName;return function(u){var p=(d?h.app.modals.windows[d]:h.app.form).data;u(L.app.form.data.save.begin());var e={};n&&(e.name=n),a&&(e.schemeName=a);var t=new FormData,f=p.isNew;t.append("data",JSON.stringify(o));var r=V.getState().settings;return r.mobile&&(e.mobile=r.mobile),pt.configuredFetch(r.datachange+"?"+V.encodeQueryData(e),{method:"post",body:t}).then(function(e){return e.json()}).then(function(e){if(e.success){var t="The changes have been applied!";X()&&(t=X().msg.savedatasuccess),we(t=void 0!==e.message&&null!==e.message?e.message:t);var r=e.item,n=r?r.entity:null,o=r?r.entityId:null,a=null!=n,i=null!=o;u(a?L.app.form.data.save.success(n,d):L.app.form.data.save.success(null,d)),ft.changeStateWithResult(e),d&&(r=((t=(s=h.app.modals.windows[d]).parentId)?h.app.modals.models[h.app.modals.windows[t].name]:h.app.form.models).model,(r=le.getModelConrol(r,p.property))&&"gridview"===r["data-buildertype"]&&"server"===r.pagerType||(l=null,(r=!!s.parentId)&&(l=h.app.modals.windows[t].name),c=p.property,t=h.app.modals.models[s.name].mapping.toData,l=(r?h.app.modals.models[l]:h.app.form.models).mapping.toForm,c&&(l=l[c]),l=he.mapRow(he.mapRow(n,t,p.additionalValues),l),u(L.app.form.data.updatefromchild(c,l,s.parentId))));var l,s,c={};return f&&(a||i)&&(l={},d?l.app={modals:{windows:it({},d,{data:{filter:i?o:a?n.__id:void 0}})}}:(s=E.getWindowLocation(),l.router={push:i?N.changeFilter(s,o):a?N.changeFilter(s,n.__id):void 0}),c.stateDelta=l),a&&(c.data=n),Promise.resolve(c)}ft.changeStateWithResult(e);n=null!==e.message?e.message:void 0,c=null!==e.details?e.details:void 0;throw null!==e.validationResult&&void 0!==e.validationResult?{level:1,message:n,details:c,formerrors:{modalId:d,errors:e.validationResult}}:{level:1,message:n,details:c}}).catch(function(e){throw e.stack&&!e.details&&(e.details=e.stack),e})}},updateData:function(t,r,n){return function(e){return e(L.app.form.data.update(t,r,n)),Promise.resolve()}},executeActions:function(e){return function(r){xe(e,r).catch(function(e){var t;"object"===nt(e)?(t=e.details,null!=e.stack&&(t=null==t?e.stack:t+"\nStack: "+e.stack),null!=console&&null!=t&&console.log(t),r(L.app.form.data.save.failure(e.message,e.details,e.level,e.formerrors))):r(L.app.form.data.save.failure(e,void 0))})}}},common:{deleteByIds:function(o,a,i,l,s){return function(t){t(L.app.form.data.delete.begin());var e={name:o};a&&(e.propertyName=a),s&&(e.schemeName=s);var r=new FormData;Array.isArray(i)?r.append("data",JSON.stringify(i)):r.append("data",JSON.stringify([i]));var n=V.getState().settings;return n.mobile&&(e.mobile=n.mobile),pt.configuredFetch(n.datadelete+"?"+V.encodeQueryData(e),{method:"post",body:r}).then(function(e){return e.json()}).then(function(e){e.success?(ft.changeStateWithResult(e),t(L.app.form.data.delete.success(o)),l&&l(e)):(ft.changeStateWithResult(e),t(L.app.form.data.delete.failure(null!==e.message?e.message:void 0,null!==e.details?e.details:void 0,void 0,null!==e.validationResult&&void 0!==e.validationResult?{main:e.validationResult}:void 0)))}).catch(function(e){t(L.app.form.data.delete.failure(e.message,e.details))})}},setCookie:function(e,t,r){ft.setCookie(e,t,r)},getCookie:function(e){return ft.getCookie(e)},getParameterFormUrlOrCookie:function(){var e=E.getWindowLocation();return N.getParamValue(e,"impersonatedUserId")||ft.getCookie("impersonatedUserId")}}},ft={createUrlDataForCollections:function(e){e.type;var t=e.controlRef,r=e.formName,n=e.startIndex,o=e.pageSize,a=e.filters,i=e.sort,l=(e.callback,e.modalId),s=e.forCopy,c=e.cols,u=e.pagerType,p=e.filename,e=e.baseLocation,o=o?{startIndex:n,pageSize:o}:void 0,a=a,f=[];i&&i.split(",").forEach(function(e){e=e.trim().split(" ");1<e.length?f.push({column:e[0].trim(),Order:e[1].trim()}):f.push({column:e[0].trim(),Order:"ASC"})});i={};l?i.urlFilter=V.getState().app.modals.windows[l].data.filter:(d=V.getState().router.location,i=N.formDataFromLocation(d=d||e));var d=t.props.name,t=t.props.propertyName,r={control:d,propertyName:t||d,name:r&&r.toLowerCase()};return s&&(r.forCopy=s),o&&(r.paging=JSON.stringify(o)),a&&(r.filter=JSON.stringify(a)),f&&(r.sort=JSON.stringify(f)),c&&(r.cols=c),i.options&&(r.options=i.options),i.urlFilter&&(r.urlFilter=i.urlFilter),u&&(r.pagerType=u),p&&(r.fileName=p),r},createUrlData:function(e){switch(e.type){case"gridview":case"repeater":return this.createUrlDataForCollections(e);default:throw new Error("unknown type")}},changeStateWithResult:function(e){void 0!==e.result&&null!==e.result&&V.dispatch(L.updatestate(e.result))},getCookie:function(e){var t=E.getCookie();if(t){e=t.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}},setCookie:function(e,t,r){var n,o=(r=r||{}).expires;"number"==typeof o&&o&&((n=new Date).setTime(n.getTime()+1e3*o),o=r.expires=n),o&&o.toUTCString&&(r.expires=o.toUTCString());var a,i=e+"="+(t=encodeURIComponent(t));for(a in r){i+="; "+a;var l=r[a];!0!==l&&(i+="="+l)}E.setCookie("".concat(i,"; path=/"))},dictionaryFetch:function(e,t,r,n,o,a){return this.buildRequest(e,V.getState().settings.datadictionary,t,a).then(function(e){e&&o({sIndex:r,pSize:n,rowsCount:e.count,items:e.items})})},buildRequest:function(t,e,r,n){var o=st(r),a=null;return ut[o]?a=ut[o]:(a=pt.configuredFetch(e+"?"+V.encodeQueryData(r)).then(function(e){return e.json()}).then(function(e){return e.success?n(e):void t(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))}).finally(function(){ut[o]=void 0}),ut[o]=a),a}},dt=pt;function ht(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function bt(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):yt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function vt(e){var t,r=e.app.form.filters.main,n={};if(r)for(var o in r)!r.hasOwnProperty(o)||0<(t=r[o].filter(function(e){return null!==e.value}).map(function(e){return{column:e.column,term:e.term,value:e.value}})).length&&(n[o]=t);var a=e.app.form.data.modified,i=(l=N.deconstructLocation(e.router.location)).urlFilter,l=l.command;return{filter:i,model:e.app.form.models.model,data:null==a?void 0:(Array.isArray(a)?ht:Q)(a),mainControlFilters:n,errors:e.app.form.errors||void 0,hideControls:e.app.form.models.hideControls,readOnlyControls:e.app.form.models.readOnlyControls,readOnly:e.app.form.models.readOnly,dimmed:Object.values(e.app.modals.windows).some(function(e){return"sidebar"===e.type}),selectedScheme:e.app.form.selectedScheme,schemes:null===e.app.form.formParams||void 0===e.app.form.formParams?void 0:e.app.form.formParams.schemes,command:l}}var gt=function(l){return{fetchData:function(e,t,r,n,o,a){l(dt.form.fetchdata(e,t,r,n,o,a))},dataChanged:function(e,t,r,n){l(L.app.form.data.update(e,t,n,r))},executeActions:function(e){l(dt.form.executeActions(e))},additionalFetch:function(e,t,r,n,o,a,i){i=bt(bt({},o),{},{formName:e(),controlRef:n,callback:a,modalId:t,forCopy:r,schemeName:i});!i.type&&n&&n.props&&n.props["data-buildertype"]&&(i.type=n.props["data-buildertype"]),l(dt.additional.fetch(i))}}};function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ct(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=kt(r);return e=n?(e=kt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==wt(e)&&"function"!=typeof e?St(t):e}}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(o,a["Component"]);var n=Ct(o);function o(){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Et(St(a=n.call.apply(n,[this].concat(t))),"getAdditionalDataForControl",function(e,t,r){return t&&!t.baseLocation&&(t.baseLocation=a.props.baseLocation),a.props.additionalFetch(function(){return a.props.formName},null,"copy"===a.props.command,e,t,r,a.props.schemeName)}),Et(St(a),"drawMainForm",function(){if(a.props.preventDrawMainform)return null;var e=V.getState().settings,t=e.dataupload,r=e.datadownload;e.backendUrl&&(t=e.backendUrl+t,r=e.backendUrl+r);t={key:a.props.getMainFormKey(),formName:a.props.formName,objectId:a.props.data?a.props.data.__id:a.props.filter,data:a.props.data,extendedData:{filters:a.props.mainControlFilters,schemes:a.props.schemes},model:a.props.model,errors:a.props.errors,dataChanged:function(e,t){var r=t.key,n=t.propertyName,o=t.value,t=t.additionalValues;a.props.dataChanged(n||r,o,t)},eventFunc:function(e){a.props.schemeName&&(e.schemeName=a.props.schemeName),a.props.executeActions(e)},getAdditionalDataForControl:a.getAdditionalDataForControl,hideControls:a.props.hideControls,readOnlyControls:a.props.readOnlyControls,readOnly:a.props.readOnly,uploadUrl:t,downloadUrl:r};if(e.userForms){r=t.formName?t.formName.toLowerCase():void 0;if(r&&e.userForms[r]){r=e.userForms[r];return l.a.createElement(r,t)}}return l.a.createElement(qe,t)}),a}return o}();function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _t(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):xt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ft(r);return e=n?(e=Ft(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==jt(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(o,a["Component"]);var e,t,r,n=Tt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=null===e.formName||void 0===e.formName?null:e.formName.toLowerCase(),o=null===t||void 0===t.formName?null:t.formName,a=void 0!==e.filter?e.filter:null,i=null!==t?t.filter:null,l=t?t.command:null;return r.formName=n,r.command=e.command,n!==o?null!==n&&(r.needFetchForm=!0,r.needFetchData=!0):a===i&&l===r.command||(r.filter=e.filter,r.needFetchData=!0),r.refreshKey=e.refreshKey,e.refreshKey!=t.refreshKey&&(r.needFetchForm=!0,r.needFetchData=!0),r}}],(t=[{key:"componentDidMount",value:function(){this.RequestModelAndData()}},{key:"componentDidUpdate",value:function(){this.RequestModelAndData()}},{key:"getMainFormKey",value:function(){return"mainform_"+this.state.formName+"_"+this.props.refreshKey}},{key:"RequestModelAndData",value:function(){this.state.needFetchForm?(this.setState({needFetchForm:!1}),this.props.fetchForm(this.state.formName)):this.state.needFetchData&&null!==this.state.formName&&(this.setState({needFetchData:!1}),this.props.fetchData(null,this.state.filter,this.state.formName,null,"copy"===this.props.command))}},{key:"render",value:function(){var e=_t({},this.props);return e.getMainFormKey=this.getMainFormKey.bind(this),e.preventDrawMainform=!this.state.formName||this.state.needFetchForm,be("content",{key:this.getMainFormKey()+"_formcontent",props:e})}}])&&Rt(e.prototype,t),r&&Rt(e,r),o}(),At=Object(t.connect)(function(e,t){return _t(_t({},vt(e)),{},{formName:t.formName||N.nameFromLocation(e.router.location,e.settings.form),refreshKey:e.router.refreshKey})},function(t){return _t(_t({},gt(t)),{},{fetchForm:function(e){t(dt.form.clear()),t(dt.form.fetchform(e))}})})(i);function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Nt(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Lt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ut(r);return e=n?(e=Ut(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==It(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(o,a["Component"]);var e,t,r,n=Mt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=null===e.flowName||void 0===e.flowName?null:e.flowName.toLowerCase(),o=null===t||void 0===t.flowName?null:t.flowName,a=void 0!==e.filter?e.filter:null,i=null!==t?t.filter:null,l=t?t.command:null;return r.flowName=n,r.command=e.command,n!==o?null!==n&&(r.needFetchFlow=!0,r.needFetchData=!0,r.filter=e.filter):a===i&&l===r.command||(r.filter=e.filter,r.needFetchData=!0),r.refreshKey=e.refreshKey,e.refreshKey!=t.refreshKey&&(r.needFetchForm=!0,r.needFetchData=!0),r}}],(t=[{key:"componentDidMount",value:function(){this.RequestModelAndData()}},{key:"componentDidUpdate",value:function(e,t){this.RequestModelAndData()}},{key:"getMainFormKey",value:function(){return"mainform_"+this.state.flowName+"_"+this.props.refreshKey}},{key:"RequestModelAndData",value:function(){this.state.needFetchFlow?(this.setState({needFetchFlow:!1}),this.props.fetchFlow(this.state.flowName,this.state.filter,"copy"===this.props.command)):this.state.needFetchData&&null!==this.props.formName&&(this.setState({needFetchData:!1}),this.props.fetchData(null,this.state.filter,this.props.formName,null,"copy"===this.props.command))}},{key:"render",value:function(){var e=Nt({},this.props);return e.getMainFormKey=this.getMainFormKey.bind(this),e.preventDrawMainform=!this.state.flowName||this.state.needFetchFlow,be("content",{key:this.getMainFormKey()+"_flowcontent",props:e})}}])&&Bt(e.prototype,t),r&&Bt(e,r),o}(),zt=Object(t.connect)(function(e,t){return Nt(Nt({},vt(e)),{},{flowName:t.flowName||N.nameFromLocation(e.router.location,V.getState().settings.flow),formName:e.app.form.formParams.name,refreshKey:e.router.refreshKey})},function(n){return Nt(Nt({},gt(n)),{},{fetchFlow:function(e,t,r){n(dt.form.clear()),n(dt.form.fetchflow(e,t,null,r))}})})(i);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ht(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Wt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=$t(r);return e=n?(e=$t(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Kt(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(o,a["Component"]);var e,t,r,n=Jt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=null===e.schemeName||void 0===e.schemeName?null:e.schemeName.toLowerCase(),o=null===t||void 0===t.schemeName?null:t.schemeName,a=void 0!==e.filter?e.filter:null,i=null!==t?t.filter:null,l=t?t.command:null;return r.schemeName=n,r.command=e.command,n!==o?null!==n&&(r.needFetchWorkflow=!0,r.needFetchData=!0,r.filter=e.filter):a===i&&l===r.command||(r.filter=e.filter,r.needFetchData=!0),r.refreshKey=e.refreshKey,e.refreshKey!=t.refreshKey&&(r.needFetchForm=!0,r.needFetchData=!0),r}}],(t=[{key:"componentDidMount",value:function(){this.RequestModelAndData()}},{key:"componentDidUpdate",value:function(e,t){this.RequestModelAndData()}},{key:"getMainFormKey",value:function(){return"mainform_"+this.state.schemeName+"_"+this.props.refreshKey}},{key:"RequestModelAndData",value:function(){this.state.needFetchWorkflow?(this.setState({needFetchWorkflow:!1}),this.props.fetchWorkflow(this.state.schemeName,this.state.filter,"copy"===this.props.command)):this.state.needFetchData&&null!==this.props.formName&&(this.setState({needFetchData:!1}),this.props.fetchData(null,this.state.filter,this.props.formName,null,"copy"===this.props.command,this.props.schemeName))}},{key:"render",value:function(){var e=Ht({},this.props);return e.getMainFormKey=this.getMainFormKey.bind(this),e.preventDrawMainform=!this.state.schemeName||this.state.needFetchWorkflow,be("content",{key:this.getMainFormKey()+"_workflowcontent",props:e})}}])&&qt(e.prototype,t),r&&qt(e,r),o}(),Yt=Object(t.connect)(function(e,t){return Ht(Ht({},vt(e)),{},{schemeName:t.schemeName||N.nameFromLocation(e.router.location,e.settings.workflow),formName:e.app.form.formParams.name,refreshKey:e.router.refreshKey})},function(n){return Ht(Ht({},gt(n)),{},{fetchWorkflow:function(e,t,r){n(dt.form.clear()),n(dt.form.fetchworkflow(e,t,null,r))}})})(i);function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=tr(r);return e=n?(e=tr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Qt(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function tr(e){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(o,a["Component"]);var e,t,r,n=er(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={fetchCount:0},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={};return 0===t.fetchCount&&0<e.fetchCount?(r.fetchCount=e.fetchCount,r.start=!0,r.stop=!1):0<t.fetchCount&&0===e.fetchCount&&(r.fetchCount=0,r.start=!1,r.stop=!0),r.showError||void 0===e.error||(r.showError=!0,r.error=e.error,r.errorLevel=e.errorLevel,r.errorDetails=e.errorDetails),r}}],(t=[{key:"render",value:function(){return null}},{key:"componentDidMount",value:function(){this.StartStopOnFetch(),this.ShowError()}},{key:"componentDidUpdate",value:function(e,t){this.StartStopOnFetch(),this.ShowError()}},{key:"StartStopOnFetch",value:function(){this.state.start?(this.setState({start:!1}),this.onFetchStarted()):this.state.stop&&(this.setState({stop:!1}),this.onFetchFinished())}},{key:"ShowError",value:function(){var e,t;this.state.showError&&(t=this.state.error,this.setState({showError:!1}),1===this.state.errorLevel?(this.state.errorDetails&&(t+="\n"+this.state.errorDetails),this.ShowPopupError(t)):(e=t,void 0!==this.state.errorDetails&&(t="More information in the developer console!",e+=". "+(t=void 0!==X()?X().msg.moreinformation:t)),this.ShowPopupError(e)),this.props.clearErrors())}},{key:"ShowPopupError",value:function(e){var t,r,n=void 0;null!=this.state.prevError&&null!=this.state.prevErrorDate&&(t=new Date,r=this.state.prevErrorDate,n=(t.getTime()-r.getTime())/1e3),null!=n&&this.state.prevError==e&&n<1||ge(e),this.state.prevError=e,this.state.prevErrorDate=new Date}},{key:"onFetchStarted",value:function(){void 0!==this.props.onFetchStarted&&this.props.onFetchStarted()}},{key:"onFetchFinished",value:function(){void 0!==this.props.onFetchFinished&&this.props.onFetchFinished()}}])&&Zt(e.prototype,t),r&&Zt(e,r),o}(),rr=Object(t.connect)(function(e,t){return{fetchCount:e.app.fetchCount,error:e.app.error,errorLevel:e.app.errorLevel,errorDetails:e.app.errorDetails}},function(e,t){return{clearErrors:function(){e(L.app.clearerrors())}}})(i);function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ar(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ir(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ar(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ar(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=ur(r);return e=n?(e=ur(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==nr(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(o,a["Component"]);var e,t,r,n=cr(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={};return e.modelurl||void 0!==e.formName&&""!==e.formName&&e.formName!==t.formName&&(r.formName=e.formName,r.needFetchModel=!0),r}}],(t=[{key:"render",value:function(){var e=ir({},this.props);return void 0===e.key&&(e.key="bindForm"),e.data=this.props.combinedData,l.a.createElement(qe,or({},e,{eventFunc:this.eventFunc.bind(this),getAdditionalDataForControl:this.getAdditionalDataForControl.bind(this),model:this.state.model,data:this.props.combinedData,hideControls:this.state.checkConditions,readOnlyControls:this.state.readOnlyControls}))}},{key:"eventFunc",value:function(e){var t="initSystem";if(Array.isArray(e.actions)&&e.actions.includes(t)){this.initSystem(e);t=e.actions.indexOf(t);if(-1!==t&&e.actions.splice(t,1),0==e.actions.length)return}V.dispatch(dt.form.executeActions(e))}},{key:"getAdditionalDataForControl",value:function(e,t,r){var n=t.startIndex,o=t.pageSize,a=t.filters,i=t.sort,t=(t.model,this.props.formName);V.dispatch(dt.additional.fetch({type:e.props["data-buildertype"],formName:t,controlRef:e,startIndex:n,pageSize:o,filters:a,sort:i,callback:r}))}},{key:"initSystem",value:function(e){var t;this.state.model&&(t=De.checkConditions({model:this.state.model,data:this.props.combinedData}),this.setState({checkConditions:t.checkConditions,readOnlyControls:t.readOnlyControls}))}},{key:"componentDidMount",value:function(){this.PrepareState()}},{key:"componentDidUpdate",value:function(e,t){this.PrepareState()}},{key:"PrepareState",value:function(){var e,t,r=this;this.state.needFetchModel&&(r.setState({needFetchModel:!1}),t={mobile:(e=V.getState().settings).mobile},dt.configuredFetch(e.uiform+"/"+this.props.formName+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t=e,e=De.checkConditions({model:t,data:r.props.combinedData});r.setState({model:t,checkConditions:e.checkConditions,readOnlyControls:e.readOnlyControls})}).catch(function(e){r.props.LogError(e.message,e.stack)}))}}])&&lr(e.prototype,t),r&&lr(e,r),o}(),pr=Object(t.connect)(function(i,e){function t(e,t){for(var r=e.split("."),n=0<r.length?i[r[0]]:null,o=null,a=1;a<r.length&&null!=n;a++)n=n[o=r[a]];return null==n?ir({},t):"object"===nr(n)?ir(ir({},t),n):(t=ir({},t),null!==o&&(t[o]=n),t)}var r,n={},o={};if(null!==e.stateDataPath&&void 0!==e.stateDataPath)if("string"==typeof e.stateDataPath)o=t(e.stateDataPath,o);else if(Array.isArray(e.stateDataPath))for(var a=0;a<e.stateDataPath.length;a++)"string"==typeof e.stateDataPath[a]&&(o=t(e.stateDataPath[a],o));return void 0!==e.data&&null!==e.data&&"object"===nr(e.data)&&(r=e.data,o=ir(ir({},o),r)),n.combinedData=o,n},function(r,e){return{LogError:function(e,t){r(L.app.form.model.fetch.failure(e,t))}}})(i),i=r(42),fr=r.n(i),i=r(21),dr=r.n(i),i=r(12),hr=r.n(i);function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(){return(yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vr(e,t){return(vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=wr(r);return e=n?(e=wr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==mr(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Or={success:{containerStyle:{backgroundColor:"green"}},error:{containerStyle:{backgroundColor:"darkred"}}},Cr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}(o,a["Component"]);var e,t,r,n=gr(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={visible:!0},e.hiding=!1,e}return e=o,(t=[{key:"componentDidMount",value:function(){var e=this.props.timeout||3e3;setTimeout(this.hide.bind(this),e)}},{key:"hide",value:function(){this.hiding||(this.hiding=!0,this.setState({visible:!1}),this.props.closeHandler&&this.props.closeHandler.onClose())}},{key:"render",value:function(){return l.a.createElement(fr.a,yr({},this.props.snackbarProps,{visible:this.state.visible,message:this.props.message,actionHandler:this.hide.bind(this),action:"close",position:"top",top:50,autoHidingTime:100}))}}])&&br(e.prototype,t),r&&br(e,r),o}();c("alert",function(e){var e={key:hr.a.v1(),message:e.message,closeHandler:{onClose:function(){}},snackbarProps:Or[e.type]},t=dr.a.set(l.a.createElement(Cr,e));e.closeHandler.onClose=function(){dr.a.remove(t)}});var Sr=r(3);c("confirm",function(e){var r={resolve:function(){},reject:function(){}},t=new Promise(function(e,t){r.resolve=e,r.reject=t});return Sr.Alert.alert(e.messages.title,e.messages.text,[{text:e.messages.cancel,onPress:function(){r.reject()}},{text:e.messages.ok,onPress:function(){r.resolve()}}],{cancelable:!1}),t});var kr=r(10);function Er(e){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function jr(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Pr(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Pr(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function xr(e){return function(e){if(Array.isArray(e))return _r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rr(){return(Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tr(e,t){return(Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ar(r);return e=n?(e=Ar(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Er(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Ar(e){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tr(e,t)}(o,a["Component"]);var e,t,r,n=Fr(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={isrtl:!1,visible:!0};try{e.state.isrtl="rtl"==getComputedStyle(document.getElementsByTagName("html")[0]).direction}catch(e){}return e}return e=o,(t=[{key:"render",value:function(){var a=this,i=this,e=this.props.windowsOrder.map(function(e,t,r){function n(){i.setState({visible:!1}),i.props.executeActions({key:void 0,controlRef:i,formName:i.props.formName,schemeName:i.props.schemeName,component:i,eventName:"exit",actions:["exit"],parameters:void 0,modalId:o.id})}var o=a.props.childWindows[e],e=!0===o.closeOnOutsideClick?n():function(){};if("modal"===o.viewType)return l.a.createElement(kr.Overlay,{isVisible:a.state.visible,key:o.id,onClose:n,onBackdropPress:e},l.a.createElement(rt,Rr({key:o.id+o.keyIndex},o,{model:a.props.childModels[o.name]})));r.length;r="right";return o.sidebarSettings&&(o.sidebarSettings.from&&(r=o.sidebarSettings.from),o.sidebarSettings.width&&o.sidebarSettings.width),a.state.isrtl&&("right"===r?r="left":"left"===r&&(r="right")),l.a.createElement(kr.Overlay,{isVisible:a.state.visible,key:o.id,onClose:n,onBackdropPress:e},l.a.createElement(rt,Rr({key:o.id+o.keyIndex},o,{model:a.props.childModels[o.name]})))});return l.a.createElement(Sr.View,{ref:function(e){return a.el=e}},e)}}])&&Dr(e.prototype,t),r&&Dr(e,r),o}(),Ir=Object(t.connect)(function(e){var t,r=e.app.modals.windows,n=e.app.modals.models,o={},a={};for(t in r)if(r.hasOwnProperty(t)){var i=n[r[t].name],i=null==i?void 0:i.formParams,i=null==i?void 0:i.schemes;a[t]={id:t,errors:r[t].errors,name:r[t].name,viewType:r[t].viewType,sidebarSettings:r[t].sidebarSettings,onOpenFunc:r[t].onOpenFunc,onCloseFunc:r[t].onCloseFunc,schemes:i,isNew:null===r[t].data||void 0===r[t].data?void 0:r[t].data.isNew,hideControls:r[t].hideControls,readOnlyControls:r[t].readOnlyControls,readOnly:r[t].readOnly,preventLoad:r[t].preventLoad,flowName:r[t].flowName,schemeName:r[t].schemeName,keyIndex:r[t].keyIndex,filter:null===r[t].data||void 0===r[t].data?void 0:r[t].data.filter,type:r[t].type,callContext:r[t].callContext,closeOnOutsideClick:void 0===r[t].closeOnOutsideClick||r[t].closeOnOutsideClick},!r[t].data||void 0!==(i=r[t].data.modified)&&(a[t].data=Array.isArray(i)?xr(i):jr({},i));var l=r[t].filters;if(l){var s,c={};for(s in l)l.hasOwnProperty(s)&&(c[s]=l[s].filter(function(e){return null!==e.value}).map(function(e){return jr({},e)}));a[t].controlFilters=c}}return Object.keys(n).forEach(function(e){o[e]=n[e].model}),{childModels:o,childWindows:a,windowsOrder:e.app.modals.order}},gt)(i);function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Br(e,t){return(Br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Mr(r);return e=n?(e=Mr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Lr(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ur=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Br(e,t)}(o,Pt);var e,t,r,n=Vr(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n.apply(this,arguments)}return e=o,(t=[{key:"render",value:function(){return l.a.createElement(Sr.View,null,this.drawMainForm(),l.a.createElement(Ir,null))}}])&&Nr(e.prototype,t),r&&Nr(e,r),o}();function zr(){return(zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}c("content",function(e){return l.a.createElement(Ur,zr({key:e.key},e.props))});var Kr=r(43);c("dwkit-form",function(e){return l.a.createElement(Kr.DWKitForm,e.props)});var Wr=r(22),c=r(44),Hr=r.n(c);function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Jr(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Gr(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Gr(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function $r(){return($r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Xr(r);return e=n?(e=Xr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==qr(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(o,a["Component"]);var e,t,r,n=Zr(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e.navigator=Object(Wr.createStackNavigator)(),e}return e=o,(t=[{key:"render",value:function(){var t=this;if(!this.props.focused)return null;var e=this.navigator,r=this.props.title,n=this.renderComponent();return l.a.createElement(e.Navigator,null,l.a.createElement(e.Screen,{name:"main",options:function(e){e.navigation,e.route;return{headerTitle:r,headerLeft:t.renderHeaderBackButton.bind(t)}}},function(e){return l.a.createElement(l.a.Fragment,null,t.renderActivityIndicator(),l.a.createElement(Sr.ScrollView,null,n))}))}},{key:"renderHeaderBackButton",value:function(){return this.props.showBackButton?l.a.createElement(Wr.HeaderBackButton,{onPress:this.props.goBack.bind(this)}):null}},{key:"renderActivityIndicator",value:function(){if(0==this.props.fetchCount)return null;if(this.props.activityIndicator)return this.props.activityIndicator(this.props);return l.a.createElement(Sr.View,{style:{position:"absolute",zIndex:9999,left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center"}},l.a.createElement(Sr.ActivityIndicator,{size:"large",animating:!0,color:"#000000"}))}},{key:"renderComponent",value:function(){return this.props.url?l.a.createElement(Hr.a,{javaScriptEnabled:!0,domStorageEnabled:!0,startInLoadingState:!0,source:{uri:this.props.url}}):this.props.type==this.props.flowconst?l.a.createElement(zt,this.props):this.props.type==this.props.workflowconst?l.a.createElement(Yt,this.props):l.a.createElement(At,$r({},this.props,{formName:this.props.defaultForm}))}}])&&Yr(e.prototype,t),r&&Yr(e,r),o}(),en=Object(t.connect)(function(e,t){var r=vt(e),n=t.baseLocation,o=void 0,a=void 0;(n=e.router.location?o="string"==typeof e.router.location?e.router.location:e.router.location.pathname:n)&&(n.startsWith("http://")||n.startsWith("https://"))&&(a=n);var i=t.baseLocation;i&&i.startsWith("/form/")&&(i=N.nameFromLocation(i,"form"));var l=!t.screenName||e.router.screen==t.screenName,t=o&&o!=t.baseLocation;return Jr(Jr({},r),{},{formconst:e.settings.form,flowconst:e.settings.flow,workflowconst:e.settings.workflow,type:N.typeFromLocation(n),refreshKey:e.router.refreshKey,defaultForm:t?void 0:i,url:a,focused:l,showBackButton:t,fetchCount:e.app.fetchCount})},function(e){return Jr(Jr({},gt(e)),{},{goBack:function(){e(L.router.routechanged())}})})(c),tn=a.createRef();function rn(e,t){tn.current&&tn.current.navigate(e,t)}function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ln(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=cn(r);return e=n?(e=cn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==nn(e)&&"function"!=typeof e?sn(t):e}}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(o,a["Component"]);var e,t,r,n=ln(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=sn(e=n.call(this,e));return E.setCurrentLocation=function(e){t.props.onRouteChanged({pathname:e},!0)},E.getWindowLocation=function(){return V.getState().router.location},e}return e=o,(t=[{key:"render",value:function(){return this.props.children?l.a.Children.only(this.props.children):null}},{key:"componentDidUpdate",value:function(){var e,t=!1;this.props.push?(e="/"==this.props.push?null:{pathname:this.props.push},this.props.onRouteChanged(e,t=!0)):this.props.redirect?(t=!(location={pathname:this.props.redirect}),this.props.onRouteChanged(location,t)):this.props.reload?(t=!0,this.props.onReload?this.props.onReload():console.log("ApplicationRouter: Need to define handler for onReload"),this.props.onRouteChanged(this.props.location,t)):this.props.refresh&&(t=!0,this.props.onRefresh?this.props.onRefresh():console.log("ApplicationRouter: Need to define handler for onRefresh"),this.props.onRouteChanged(this.props.location,t))}}])&&on(e.prototype,t),r&&on(e,r),o}(),un=Object(t.connect)(function(e,t){return{push:e.router.push,redirect:e.router.redirect,refresh:e.router.refresh,reload:e.router.reload,location:e.router.location}},function(r,e){return{onRouteChanged:function(e,t){r(L.router.routechanged(tn.current,e,t))}}})(c),pn=r(45),fn={connection:null,Connect:function(a){null!==this.connection&&(this.connection.off("StateChange"),this.connection.stop());var e=a.encodeQueryData({}),t=a.getState().settings,r=t.backendUrl;r+=0<e.length?t.notificationhub+"?"+e:t.notificationhub,this.connection=(new pn.HubConnectionBuilder).withUrl(r).configureLogging("none").build(),this.connection.on("StateChange",function(e){if(null!=e&&null!==e.path&&void 0!==e.path&&"string"==typeof e.path){for(var t=e.path.split("."),r={},n=r,o=0;o<t.length;o++)o===t.length-1?n[t[o]]=e.change:(n[t[o]]={},n=n[t[o]]);a.dispatch(L.updatestate(r))}}),this.connection.start()}},dn=r(15),t=r(9),hn=r.n(t);function mn(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function yn(l){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=l.apply(e,i);function o(e){mn(n,t,r,o,a,"next",e)}function a(e){mn(n,t,r,o,a,"throw",e)}o(void 0)})}}function bn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vn,gn,wn,On=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}var e,t,n,o,a,i,l,s,c,u,p,f,d,h,m,y;return e=r,(t=[{key:"getUser",value:(y=yn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.openIdConfig){e.next=2;break}throw new Error("OpenID config not loaded yet!");case 2:return t=this.openIdConfig.userinfo_endpoint,e.next=5,this._fetchJsonResult(t);case 5:return(t=e.sent).access_token=this.authState.accessToken,e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"signinRedirect",value:(m=yn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getRouter(),e.abrupt("return",t&&t.signinRedirect&&t.signinRedirect());case 2:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"signoutRedirect",value:(h=yn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getRouter(),e.abrupt("return",t&&t.signoutRedirect&&t.signoutRedirect());case 2:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"removeUser",value:(d=yn(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.revokeToken();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"auth",value:(f=yn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getConfig(),e.next=3,this.authorizeInternal(t);case 3:return this.authState=e.sent,e.next=6,this._loadConfiguration();case 6:return this.openIdConfig=e.sent,Ke.configureHeaders(this.authState.accessToken),e.abrupt("return",this.authState);case 9:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"refreshToken",value:(p=yn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._refreshTokenExists()){e.next=2;break}return e.abrupt("return");case 2:return t=this._getConfig(),e.next=5,this.refreshInternal(t,{refreshToken:this.authState.refreshToken});case 5:this.authState=e.sent,Ke.configureHeaders(this.authState.accessToken);case 7:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"revokeToken",value:(u=yn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._refreshTokenExists()){e.next=2;break}return e.abrupt("return");case 2:return t=this._getConfig(),e.next=5,this.revokeInternal(t,{tokenToRevoke:this.authState.refreshToken,sendClientId:!0});case 5:this.authState=null,Ke.configureHeaders(void 0);case 7:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"_refreshTokenExists",value:function(){return this.authState&&this.authState.refreshToken}},{key:"_loadConfiguration",value:(c=yn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getConfig(),t=t.issuer+r._configPath,e.next=4,this._fetchJsonResult(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"_fetchJsonResult",value:(s=yn(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()(t);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Received status: "+r.status+", text: "+r.statusText);case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"_getConfig",value:function(){var e=V.getState().settings,t=hn()(e.oidcConfig);return t.issuer=e.backendUrl,t}},{key:"_getRouter",value:function(){return V.getState().settings.router}},{key:"restore",value:(l=yn(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.authState=t,e.next=3,this._loadConfiguration();case 3:return this.openIdConfig=e.sent,Ke.configureHeaders(this.authState?this.authState.accessToken:void 0),r=this.openIdConfig.userinfo_endpoint,e.next=8,this._fetchJsonResult(r);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"authorizeInternal",value:(i=yn(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dn.authorize)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"refreshInternal",value:(a=yn(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dn.refresh)(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)})},{key:"revokeInternal",value:(o=yn(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dn.revoke)(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)})}])&&bn(e.prototype,t),n&&bn(e,n),r}();function Cn(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}wn="/.well-known/openid-configuration",(gn="_configPath")in(vn=On)?Object.defineProperty(vn,gn,{value:wn,enumerable:!0,configurable:!0,writable:!0}):vn[gn]=wn;var Sn,kn,En,c=new On,t=(Sn=c,{preFetchUser:function(){return Sn.getUser().then(function(e){return Ke.configureHeaders(e.access_token),re.Promise.resolve()}).catch(function(){Sn.signinRedirect()})},logoff:function(){return Sn.removeUser().then(function(){Ke.configureHeaders(void 0),Sn.signoutRedirect()})},onLogon:function(){return Sn.auth().then(function(e){Ke.configureHeaders(e.accessToken)})},getAuthState:function(){return Sn.authState},setAuthState:(kn=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn.restore(t).catch(function(e){console.log("oidcClient.restore",e),Sn.signinRedirect()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}),En=function(){var e=this,i=arguments;return new Promise(function(t,r){var n=kn.apply(e,i);function o(e){Cn(n,t,r,o,a,"next",e)}function a(e){Cn(n,t,r,o,a,"throw",e)}o(void 0)})},function(e){return En.apply(this,arguments)})});I.addProvider("identityserver",t);var Pn=c,c=r(7),jn=r.n(c);function xn(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function _n(l){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=l.apply(e,i);function o(e){xn(n,t,r,o,a,"next",e)}function a(e){xn(n,t,r,o,a,"throw",e)}o(void 0)})}}E.loadScript=function(e,t){new Function(e)(),t&&t()};c=V.getState().settings;c.mobile=!0,c.oidcConfig={clientId:"mobile",redirectUrl:"dwkit:/oauthredirect",scopes:["openid","profile","offline_access","IdentityServerApi"],dangerouslyAllowInsecureHttpRequests:!0,additionalParameters:{prompt:"login"}},dt.common._setCookie_Values={},jn.a.getAllKeys().then(function(e){e.forEach(function(t){t.startsWith("@cookie_")&&jn.a.getItem(t).then(function(e){return dt.common._setCookie_Values[t]=e})})}),dt.common.setCookie=function(e,t){e="@cookie_"+e;return dt.common._setCookie_Values[e]=t,jn.a.setItem(e,t)},dt.common.getCookie=function(e){return dt.common._setCookie_Values["@cookie_"+e]},V.loadStateFromStorage=_n(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn.a.getItem("DWKit_GlobalState");case 2:if(!(r=e.sent)){e.next=16;break}if((t=ne.a.parse(r)).app.fetchCount=0,t.app.user)return e.next=9,jn.a.getItem("DWKit_AuthState");e.next=16;break;case 9:if(r=e.sent)return r=ne.a.parse(r),V.dispatch(L.updatestate(t)),e.next=15,V.setAuthState(r).then(function(){var e=V.getState();return V.dispatch(dt.userinfo.fetch(function(e){var t=V.getState().settings.router;t&&t.userLoaded&&t.userLoaded(e)})),Promise.resolve(e)}).catch(function(e){console.log("Store.setAuthState ERROR",e)});e.next=16;break;case 15:return e.abrupt("return",e.sent);case 16:return e.abrupt("return",Promise.resolve(V.getState()));case 17:case"end":return e.stop()}},e)})),V.saveStateToStorage=_n(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=V.getAuthState())return e.next=4,jn.a.setItem("DWKit_AuthState",ne.a.stringify(t));e.next=4;break;case 4:if(!(r=V.getState())){e.next=11;break}for(n in(r=hn()(r)).router)"function"==typeof r.router[n]&&delete r.router[n];return delete r.settings,e.next=11,jn.a.setItem("DWKit_GlobalState",ne.a.stringify(r));case 11:case"end":return e.stop()}},e)})),V.resetStateInStorage=_n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn.a.removeItem("DWKit_AuthState");case 2:return e.next=4,jn.a.removeItem("DWKit_GlobalState");case 4:case"end":return e.stop()}},e)})),V.setScreen=function(e){V.dispatch(L.router.setscreen(e))},V.switchSceen=function(e){var t=V.getState(),r={app:{form:t.app.form,modals:t.app.modals},router:t.router},n=null;(n=t.app.screens&&t.app.screens[e]?t.app.screens[e]:{app:{form:u.app.form,modals:u.app.modals},router:u.router}).app.screens||(n.app.screens={}),n.app.screens[r.router.screen]=r,n.router.screen=e,V.dispatch(L.updatestate(n))},le.switchSceen=V.switchSceen,Te.navigate=function(e){e.state;e=e.parameters;void 0!==e&&void 0!==e.target?rn(e.target):console.error("For call 'redirect' action you need to set the 'target' parameter!")}}],L.c=B,L.d=function(e,t,r){L.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},L.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},L.t=function(t,e){if(1&e&&(t=L(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(L.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)L.d(r,n,function(e){return t[e]}.bind(null,n));return r},L.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return L.d(t,"a",t),t},L.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},L.p="",L(L.s=58);function L(e){if(B[e])return B[e].exports;var t=B[e]={i:e,l:!1,exports:{}};return N[e].call(t.exports,t,t.exports,L),t.l=!0,t.exports}var N,B});